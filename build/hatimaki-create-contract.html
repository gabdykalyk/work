<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Новый договор</title>

    <!-- <link href="bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet"> -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link href="fonts/fontawesome/css/all.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/css/select2.min.css" rel="stylesheet" />
<link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet" />
<link href="css/main.min.css" rel="stylesheet">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>

<body>
    <div class="hat-scaffold">
        <div class="hat-scaffold__navbar">
            <nav class="hat-navbar">
    <div class="hat-navbar__content-wrapper">
        <div class="hat-navbar__content">
            <div class="hat-navbar__header">
                <div class="hat-navbar__user">
                    <div class="hat-navbar__avatar">
                        <img class="hat-navbar__avatar-img" src="images/avatar.jpg">
                    </div>

                    <div class="hat-navbar__user-name">
                        Анастасия Соколова
                    </div>
                </div>

                <div class="hat-navbar__notifications">
                    <div class="hat-navbar__notifications-icon">
                        <div class="hat-navbar__notifications-icon-counter">28</div>
                        <i class="far fa-bell"></i>
                    </div>
                </div>
            </div>

            <ul class="nav hat-navbar__menu">
                <li class="hat-navbar__menu-item" data-hat-navbar-drawer-content-name="calculations">
                    <i class="far fa-calculator hat-navbar__menu-item-icon"></i>
                    <span class="hat-navbar__menu-item-name">Расчёты</span>
                </li>

                <li class="hat-navbar__menu-item" data-hat-navbar-drawer-content-name="hr">
                    <i class="far fa-user-tie hat-navbar__menu-item-icon"></i>
                    <span class="hat-navbar__menu-item-name">Кадры</span>
                </li>

                <li class="hat-navbar__menu-item" data-hat-navbar-drawer-content-name="documents">
                    <i class="far fa-chart-bar hat-navbar__menu-item-icon"></i>
                    <span class="hat-navbar__menu-item-name">Отчёты</span>
                </li>

                <li class="hat-navbar__menu-item" data-hat-navbar-drawer-content-name="reference">
                    <i class="far fa-book hat-navbar__menu-item-icon"></i>
                    <span class="hat-navbar__menu-item-name">Справочники</span>
                </li>

                <li class="hat-navbar__menu-item" data-hat-navbar-drawer-content-name="search">
                    <i class="far fa-bars hat-navbar__menu-item-icon"></i>
                    <span class="hat-navbar__menu-item-name">Все разделы</span>
                </li>
            </ul>

            <div class="hat-navbar__spacer"></div>

            <div class="hat-navbar__actions hat-navbar__actions--main">
                <a href="#" class="hat-navbar__action">
                    <i class="far fa-cog hat-navbar__action-icon"></i>
                    <span class="hat-navbar__action-name">Настройки</span>
                </a>

                <a href="#" class="hat-navbar__action">
                    <i class="far fa-life-ring hat-navbar__action-icon"></i>
                    <span class="hat-navbar__action-name">Помощь</span>
                </a>
            </div>

            <button class="btn hat-navbar__toggle">
                <i class="fas fa-chevron-left"></i>
            </button>
        </div>
    </div>

    <div class="hat-navbar__drawer">
        <div class="hat-navbar__drawer-content-wrapper scrollbar-inner">
            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="user" data-hat-navbar-drawer-class="hat-navbar__drawer-user">
                <div class="hat-navbar__submenu">
                    <div class="hat-navbar__submenu-header hat-navbar__additional-user-name" style="display: none">
                        Анастасия Соколова
                    </div>

                    <div class="hat-navbar__submenu-content">
                        <a class="hat-navbar__submenu-item" href="#">Профиль</a>
                        <a class="hat-navbar__submenu-item" href="#">Настройки</a>
                    </div>
                </div>

                <a class="hat-navbar__logout-button" href="#">
                    <i class="far fa-sign-out"></i>
                    Выход
                </a>
            </div>

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="notifications" data-hat-navbar-drawer-class="hat-navbar__drawer-notifications">
                <ul class="notice-list">
                    <li>
                        <p>16.05.2019 <span class="danger">Выписан штраф с объяснительной</span></p>
                        <a href="#" class="btn btn-default btn-go">Перейти к просмотру</a>
                    </li>
                    <li>
                        <p>16.05.2019 <span class="danger">Выписано нарушение с объяснительной</span></p>
                        <a href="#" class="btn btn-default btn-go">Перейти к просмотру</a>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__img" style="background-image: url(images/img1.jpg);"></div>
                            </a>
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                    <li>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__img" style="background-image: url(images/img1.jpg);"></div>
                            </a>
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                            <a class="file__block" href="#">
                                <div class="file__img" style="background-image: url(images/img1.jpg);"></div>
                            </a>
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                    <li>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__img" style="background-image: url(images/img1.jpg);"></div>
                            </a>
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                    <li>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="calculations" data-hat-navbar-drawer-class="hat-navbar__drawer-menu-base">
                <div class="hat-navbar__submenu">
                    <div class="hat-navbar__submenu-header">Расчёты</div>
                    <div class="hat-navbar__submenu-content">
                        <a class="hat-navbar__submenu-item" href="#">Сотрудники</a>
                        <a class="hat-navbar__submenu-item" href="#">Штатная численность</a>
                        <a class="hat-navbar__submenu-item" href="#">Потребность в персонале</a>
                        <a class="hat-navbar__submenu-item" href="#">Кандидаты</a>
                        <a class="hat-navbar__submenu-item hat-navbar__submenu-item--active" href="#">Жалобы и
                            предложения</a>
                        <a class="hat-navbar__submenu-item" href="#">Приказы/инструкции</a>
                        <a class="hat-navbar__submenu-item" href="#">Анкеты водителей</a>
                        <a class="hat-navbar__submenu-item" href="#">Праздничные надбавки</a>
                        <a class="hat-navbar__submenu-item" href="#">Надбавки за лучшие показатели</a>
                        <a class="hat-navbar__submenu-item" href="#">Договоры</a>
                        <a class="hat-navbar__submenu-item" href="#">Управление уведомлениями</a>
                    </div>
                </div>
            </div>

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="hr" data-hat-navbar-drawer-class="hat-navbar__drawer-menu-base">
                <div class="hat-navbar__submenu">
                    <div class="hat-navbar__submenu-header">Кадры</div>
                    <div class="hat-navbar__submenu-content">
                        <a class="hat-navbar__submenu-item" href="#">Сотрудники</a>
                        <a class="hat-navbar__submenu-item" href="#">Штатная численность</a>
                        <a class="hat-navbar__submenu-item" href="#">Потребность в персонале</a>
                        <a class="hat-navbar__submenu-item" href="#">Кандидаты</a>
                        <a class="hat-navbar__submenu-item hat-navbar__submenu-item--active" href="#">Жалобы и
                            предложения</a>
                        <a class="hat-navbar__submenu-item" href="#">Приказы/инструкции</a>
                        <a class="hat-navbar__submenu-item" href="#">Анкеты водителей</a>
                        <a class="hat-navbar__submenu-item" href="#">Праздничные надбавки</a>
                        <a class="hat-navbar__submenu-item" href="#">Надбавки за лучшие показатели</a>
                        <a class="hat-navbar__submenu-item" href="#">Договоры</a>
                        <a class="hat-navbar__submenu-item" href="#">Управление уведомлениями</a>
                    </div>
                </div>
            </div >

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="documents" data-hat-navbar-drawer-class="hat-navbar__drawer-menu-base">
                <div class="hat-navbar__submenu">
                    <div class="hat-navbar__submenu-header">Документы</div>
                    <div class="hat-navbar__submenu-content">
                        <a class="hat-navbar__submenu-item" href="#">Сотрудники</a>
                        <a class="hat-navbar__submenu-item" href="#">Штатная численность</a>
                        <a class="hat-navbar__submenu-item" href="#">Потребность в персонале</a>
                        <a class="hat-navbar__submenu-item" href="#">Кандидаты</a>
                        <a class="hat-navbar__submenu-item hat-navbar__submenu-item--active" href="#">Жалобы и
                            предложения</a>
                        <a class="hat-navbar__submenu-item" href="#">Приказы/инструкции</a>
                        <a class="hat-navbar__submenu-item" href="#">Анкеты водителей</a>
                        <a class="hat-navbar__submenu-item" href="#">Праздничные надбавки</a>
                        <a class="hat-navbar__submenu-item" href="#">Надбавки за лучшие показатели</a>
                        <a class="hat-navbar__submenu-item" href="#">Договоры</a>
                        <a class="hat-navbar__submenu-item" href="#">Управление уведомлениями</a>
                    </div>
                </div>
            </div>

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="reference" data-hat-navbar-drawer-class="hat-navbar__drawer-menu-base">
                <div class="hat-navbar__submenu">
                    <div class="hat-navbar__submenu-header">Справочники</div>
                    <div class="hat-navbar__submenu-content">
                        <a class="hat-navbar__submenu-item" href="#">Сотрудники</a>
                        <a class="hat-navbar__submenu-item" href="#">Штатная численность</a>
                        <a class="hat-navbar__submenu-item" href="#">Потребность в персонале</a>
                        <a class="hat-navbar__submenu-item" href="#">Кандидаты</a>
                        <a class="hat-navbar__submenu-item hat-navbar__submenu-item--active" href="#">Жалобы и
                            предложения</a>
                        <a class="hat-navbar__submenu-item" href="#">Приказы/инструкции</a>
                        <a class="hat-navbar__submenu-item" href="#">Анкеты водителей</a>
                        <a class="hat-navbar__submenu-item" href="#">Праздничные надбавки</a>
                        <a class="hat-navbar__submenu-item" href="#">Надбавки за лучшие показатели</a>
                        <a class="hat-navbar__submenu-item" href="#">Договоры</a>
                        <a class="hat-navbar__submenu-item" href="#">Управление уведомлениями</a>
                    </div>
                </div>
            </div>

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="search" data-hat-navbar-drawer-class="hat-navbar__drawer-menu-search">
                <div class="hat-navbar__contents">
                    <div class="hat-navbar__contents-search-field  hat-navbar__contents-search-field--empty">
                        <input class="hat-navbar__contents-search-field-input" placeholder="Поиск">
                        <button class="btn hat-navbar__contents-search-field-clear-button">
                            <i class="fal fa-times"></i>
                        </button>
                    </div>

                    <div class="hat-navbar__contents-content">
                        <div class="hat-navbar__contents-content-column">
                            <div class="hat-navbar__submenu">
                                <div class="hat-navbar__submenu-header">Отчёты</div>
                                <div class="hat-navbar__submenu-content">
                                    <a class="hat-navbar__submenu-item" href="#">Свободный отчёт</a>
                                    <a class="hat-navbar__submenu-item" href="#">Доставка свободный</a>
                                    <a class="hat-navbar__submenu-item" href="#">Оплата труда</a>
                                    <a class="hat-navbar__submenu-item" href="#">Доставка по сотрудникам</a>
                                    <a class="hat-navbar__submenu-item" href="#">КОРФ/Нагрузка/Опоздания</a>
                                    <a class="hat-navbar__submenu-item" href="#">КОРФ/Нагрузка/Опоздания по должностям</a>
                                    <a class="hat-navbar__submenu-item" href="#">Свободный — таблица</a>
                                    <a class="hat-navbar__submenu-item" href="#">Опоздания</a>
                                    <a class="hat-navbar__submenu-item" href="#">Депозиты</a>
                                    <a class="hat-navbar__submenu-item" href="#">Рекомендации по смене разрядов</a>
                                    <a class="hat-navbar__submenu-item" href="#">Штрафы и премии</a>
                                    <a class="hat-navbar__submenu-item" href="#">KPI и отзывы водителей</a>
                                    <a class="hat-navbar__submenu-item" href="#">Водители, не добравшиеся до минималки</a>
                                    <a class="hat-navbar__submenu-item" href="#">Внешние заказы</a>
                                    <a class="hat-navbar__submenu-item" href="#">Сводный по нарушениям</a>
                                </div>
                            </div>
                        </div>

                        <div class="hat-navbar__contents-content-column">
                            <div class="hat-navbar__submenu">
                                <div class="hat-navbar__submenu-header">Пользователи</div>
                                <div class="hat-navbar__submenu-content">
                                    <a class="hat-navbar__submenu-item" href="#">Список пользователей</a>
                                    <a class="hat-navbar__submenu-item" href="#">Роли пользователей</a>
                                    <a class="hat-navbar__submenu-item" href="#">Ответственные за карьеру</a>
                                </div>
                            </div>

                            <div class="hat-navbar__submenu">
                                <div class="hat-navbar__submenu-header">Графики</div>
                                <div class="hat-navbar__submenu-content">
                                    <a class="hat-navbar__submenu-item" href="#">Мероприятия</a>
                                    <a class="hat-navbar__submenu-item" href="#">Рабочие графики</a>
                                </div>
                            </div>

                            <div class="hat-navbar__submenu">
                                <div class="hat-navbar__submenu-header">Листовки</div>
                                <div class="hat-navbar__submenu-content">
                                    <a class="hat-navbar__submenu-item" href="#">Статистика по листовкам</a>
                                    <a class="hat-navbar__submenu-item" href="#">Отработанные адреса</a>
                                </div>
                            </div>

                            <div class="hat-navbar__submenu">
                                <div class="hat-navbar__submenu-header">Маркетинг</div>
                                <div class="hat-navbar__submenu-content">
                                    <a class="hat-navbar__submenu-item" href="#">Маркетинг</a>
                                    <a class="hat-navbar__submenu-item" href="#">Акции</a>
                                </div>
                            </div>
                        </div>

                        <div class="hat-navbar__contents-content-column">
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Штрафы/Премии</a>
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Нарушения</a>
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Плохие отзывы</a>
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Жалобы и
                                предложения</a>
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Зоны доставки</a>
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Инструкция</a>
                        </div>
                    </div>

                    <div class="hat-navbar__actions hat-navbar__actions--additional">
                        <a href="#" class="hat-navbar__action">
                            <i class="far fa-cog hat-navbar__action-icon"></i>
                            <span class="hat-navbar__action-name">Настройки</span>
                        </a>

                        <a href="#" class="hat-navbar__action">
                            <i class="far fa-life-ring hat-navbar__action-icon"></i>
                            <span class="hat-navbar__action-name">Помощь</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="hat-navbar__backdrop"></div>
</nav>

        </div>

        <div class="hat-scaffold__body">
            <div class="hat-scaffold__content-wrapper">
                <div class="create-contract__content" data-bind="childrenComplete: onInit">
                    <div class="hat-scaffold__head create-contract__head">
                        <h1>Новый договор</h1>

                        <div class="spacer"></div>

                        <button class="btn btn-default btn-p25">К списку договоров</button>
                    </div>

                    <div class="row create-contract__row">
                        <div class="col-xs-6 col-md-4">
                            <div class="form-group required">
                                <label for="type">Типа документа</label>
                                <select class="form-control" name="type" id="type" data-bind="value: type, select2: { minimumResultsForSearch: 0, allowClear: true, placeholder: '' }">
                                    <option></option>
                                    <option value="1">Тип #1</option>
                                    <option value="2">Тип #2</option>
                                    <option value="3">Тип #3</option>
                                    <option value="4">Тип #4</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-xs-6 col-md-4">
                            <div class="form-group">
                                <label for="category">Категория</label>
                                <select class="form-control" name="category" id="category" data-bind="value: category, select2: { minimumResultsForSearch: 0, allowClear: true, placeholder: '' }">
                                    <option></option>
                                    <option value="1">Категория #1</option>
                                    <option value="2">Категория #2</option>
                                    <option value="3">Категория #3</option>
                                    <option value="4">Категория #4</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-xs-12 col-md-8">
                            <div class="form-group">
                                <label for="branches">Филиалы для договора</label>

                                <div class="create-contract__branches-form-control">
                                    <div class="btn-group" role="group">
                                        <a href="#" type="button" class="btn btn-default" title="Только для"
                                            data-bind="css: { 'active': branchesMode() }, click: function () { branchesMode(true); }">
                                            <i class="far fa-layer-plus"></i>
                                        </a>
                                        <a href="#" type="button" class="btn btn-default" title="Для всех, кроме"
                                           data-bind="css: { 'active': !branchesMode() }, click: function () { branchesMode(false); }">
                                            <i class="far fa-layer-minus"></i>
                                        </a>
                                    </div>

                                    <select class="form-control" name="branches[]" id="branches" multiple data-bind="element: branchesFormControlElement, select2">
                                        <option value="1">Филиал #1</option>
                                        <option value="2">Филиал #2</option>
                                        <option value="3">Филиал #3</option>
                                        <option value="4">Филиал #4</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-12 col-md-8">
                            <div class="form-group">
                                <label for="positions">Должности для договора</label>

                                <div class="create-contract__branches-form-control">
                                    <div class="btn-group" role="group">
                                        <a href="#" type="button" class="btn btn-default" title="Только для"
                                           data-bind="css: { 'active': positionsMode() }, click: function () { positionsMode(true); }">
                                            <i class="far fa-layer-plus"></i>
                                        </a>
                                        <a href="#" type="button" class="btn btn-default" title="Для всех, кроме"
                                           data-bind="css: { 'active': !positionsMode() }, click: function () { positionsMode(false); }">
                                            <i class="far fa-layer-minus"></i>
                                        </a>
                                    </div>

                                    <select class="form-control" name="positions[]" id="positions" multiple data-bind="element: positionsFormControlElement, select2">
                                        <option value="1">Должность #1</option>
                                        <option value="2">Должность #2</option>
                                        <option value="3">Должность #3</option>
                                        <option value="4">Должность #4</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-12 col-md-8">
                            <div class="form-group required">
                                <label for="text">Текст договора</label>

                                <textarea class="form-control form-control-inp-text" name="text" id="text"
                                    data-bind="element: textFormControlElement">
                                </textarea>
                            </div>
                        </div>

                        <div class="col-xs-12 col-md-4">
                            <div class="create-contract__editor-shortcuts">
                                <span class="create-contract__editor-shortcuts-header">Доступные поля</span>

                                <div class="form-group search-global search-global--empty create-contract__editor-shortcuts-search">
                                    <input class="form-control" placeholder="Поиск">

                                    <button type="button" class="btn btn-default search-global__search-clear-button"
                                            title="Очистить">
                                        <i class="far fa-times"></i>
                                    </button>
                                </div>

                                <div class="create-contract__editor-shortcuts-list" data-bind="scrollbar">
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#ORDER_ID#</a> — ID в системе заказа Битрикс<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#ORDER_DATE#</a> — Дата и время заказа<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#PS_NAME#</a> — Тип оплаты<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#PHONE#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#POST_ID#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#CONTRACT_DATE#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#POST_CODE#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#COMPANY_SHORT_NAME#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#COMPANY_FULL_NAME#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#REQUISITES#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#ADDRESS#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#ADDRESS2#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#FIO#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                    <div class="create-contract__editor-shortcut"><button type="button" class="btn create-contract__editor-shortcut-copy-button" title="Скопировать в буфер обмена"><i class="far fa-clone"></i></button><a href="#">#INN#</a> — Номер телефона клиента<br></div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-12">
                            <div class="create-contract__actions">
                                <button class="btn btn-default btn-p25" data-bind="click: reset">
                                    Сбросить изменения
                                </button>

                                <button class="btn btn-primary btn-p25" data-bind="click: submit">
                                    Сохранить
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
        integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
        crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"
        integrity="sha256-AAhU14J4Gv8bFupUUcHaPQfvrdNauRHMt+S4UVcaJb0=" crossorigin="anonymous"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
</script>

<!-- Bootstrap DateTimepicker, https://eonasdan.github.io/bootstrap-datetimepicker/ -->
<script type="text/javascript" src="js/moment-with-locales.min.js"></script>
<script type="text/javascript" src="js/bootstrap-datetimepicker.min.js"></script>

<!-- Select2, https://select2.org/getting-started/basic-usage -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.full.min.js"></script>

<!-- Custom Scroll, http://gromo.github.io/jquery.scrollbar/-->
<script src="js/jquery.scrollbar.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/nestedSortable/2.0.0/jquery.mjs.nestedSortable.min.js"
        integrity="sha256-EnaBcZsgejHg52kCwmsQHxvCIL0nl9YmWnPKQoKjWhg=" crossorigin="anonymous"></script>

<!-- Highcharts, https://api.highcharts.com/highcharts/ -->
<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/modules/funnel.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<script type="text/javascript" src="js/js-gl.js"></script>


    <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js"></script>-->
    <script type="text/javascript" src="https://knockoutjs.com/downloads/knockout-3.5.0.debug.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/knockout.validation@2.0.4/dist/knockout.validation.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js" integrity="sha256-VeNaFBVDhoX3H+gJ37DpT/nTuZTdjYro9yBruHjVmoQ=" crossorigin="anonymous"></script>

    <script type="text/javascript" src="js/tinymce/js/tinymce/tinymce.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            initHatNavbar(document);

            ko.bindingHandlers.element = {
                init: function (element, valueAccessor) {
                    valueAccessor()(element);
                }
            };

            ko.validation.init({ insertMessages: false });

            ko.bindingHandlers.contractsCategoryOpen = {
                init: function(element, valueAccessor) {
                    const value = ko.unwrap(valueAccessor());

                    if (value) {
                        $(element).css('height', '');
                        $(element).css('display', 'none');

                        $(element).slideDown(0);
                    } else {
                        $(element).slideUp(0, () => {
                            $(element).css('height', '0');
                            $(element).css('display', 'block');
                        });
                    }

                    $(element).data('contracts-category-open-open', value);
                },
                update: function(element, valueAccessor, allBindings) {
                    const value = ko.unwrap(valueAccessor());
                    const duration = allBindings.get('slideDuration') || 200;

                    if ($(element).data('contracts-category-open-open') !== value) {
                        if (value) {
                            $(element).css('height', '');
                            $(element).css('display', 'none');

                            $(element).slideDown(duration);
                        } else {
                            $(element).slideUp(duration, () => {
                                $(element).css('height', '0');
                                $(element).css('display', 'block');
                            });
                        }

                        $(element).data('contracts-category-open-open', value);
                    }
                }
            };

            ko.bindingHandlers.contractsSortable = {
                init: function(element, valueAccessor, allBindings, viewModel) {
                    $(element).nestedSortable({
                        items: '.create-contract__table-row:not(.create-contract__table-contract-row--deleted)',
                        listType: 'ul',
                        doNotClear: true,
                        maxLevels: 2,
                        disableNestingClass: 'create-contract__table-contract-row',
                        tabSize: 10,
                        isAllowed: ($placeholder, $placeholderParent, $currentItem) => {
                            return $currentItem.hasClass('create-contract__table-contract-row') || !$placeholderParent;
                        },
                        change: function(mouseEvent, event) {
                            const $placeholder = event.placeholder;

                            if ($placeholder.hasClass('create-contract__table-contract-row')) {
                                $placeholder.toggle($placeholder.nextAll().filter('.create-contract__table-category-row').length === 0);
                            } else {
                                $placeholder.toggle($placeholder.prevAll().filter('.create-contract__table-contract-row').length === 0);
                            }
                        },
                        update: function(mouseEvent, event) {
                            const categoryId = event.item.data('contracts-category-id');

                            if (categoryId !== undefined) {
                                const index = $('.create-contract__table-category-row').toArray().indexOf(event.item.get()[0]);

                                if (allBindings()['contractsSortableCategorySort']) {
                                    allBindings()['contractsSortableCategorySort'].bind(viewModel)(categoryId, index);
                                }
                            } else {
                                const contractId = event.item.data('contracts-contract-id');
                                const categoryId = event.item.parent().hasClass('create-contract__table-body') ? null : event.item.closest('.create-contract__table-category-row').data('contracts-category-id');
                                const index = event.item.parent().children('.create-contract__table-contract-row').toArray().indexOf(event.item.get()[0]);

                                if (allBindings()['contractsSortableContractSort']) {
                                    allBindings()['contractsSortableContractSort'].bind(viewModel)(contractId, categoryId, index);
                                }
                            }

                            event.item.remove();
                        }
                    });
                }
            };

            ko.bindingHandlers.select2 = {
                init: function (element, valueAccessor, allBindings) {
                    const $element = $(element);
                    const isMultiple = $element.prop('multiple');
                    const valueObservable = allBindings()[!isMultiple ? 'value' : 'selectedOptions'];

                    const customOptionNames = ['wrapperCssClass'];

                    const defaultOptions = {
                        minimumResultsForSearch: Infinity,
                        language: 'ru',
                        width: 'element',
                        dropdownAutoWidth: true
                    };

                    if (valueObservable) {
                        $element.val(ko.utils.unwrapObservable(valueObservable));
                    }

                    const options = ko.utils.unwrapObservable(valueAccessor());

                    const customOptions = _.pick(options, customOptionNames);

                    const originalRenderFn = $.fn.select2.amd.require('jquery.select2').prototype.render;

                    $.fn.select2.amd.require('jquery.select2').prototype.render = function () {
                        const $container = originalRenderFn.call(this, ...arguments);

                        if ('wrapperCssClass' in customOptions) {
                            $container.addClass(customOptions.wrapperCssClass);
                        }

                        return $container;
                    };

                    $element.select2($.extend(defaultOptions, _.omit(options, customOptionNames)));

                    $.fn.select2.amd.require('jquery.select2').prototype.render = originalRenderFn;

                    if ('wrapperCssClass' in customOptions) {
                        const $wrapper = $element.data('select2').$container;
                        $wrapper.addClass(customOptions.wrapperCssClass);
                    }

                    $element.data('select2').$results.addClass('scrollbar-inner').scrollbar();

                    if (valueObservable) {
                        if (ko.isObservable(valueObservable)) {
                            $element.on('change', () => {
                                const value = $element.val();
                                valueObservable(value);
                            });
                        }
                    }
                },
                update: function (element, valueAccessor, allBindings) {
                    const $element = $(element);
                    const isMultiple = $element.prop('multiple');

                    if (!isMultiple) {
                        const valueObservable = allBindings()['value'];

                        if (valueObservable && ko.isObservable(valueObservable)) {
                            valueObservable.subscribe(v => {
                                $element.val(v).trigger('change');
                            });
                        }
                    }
                }
            };

            ko.bindingHandlers.scrollbar = {
                init: function (element) {
                    $(element).addClass('scrollbar-inner').scrollbar();
                }
            };

            const ViewModel = function() {
                this.branchesFormControlElement = ko.observable();
                this.positionsFormControlElement = ko.observable();
                this.textFormControlElement = ko.observable();

                this.isSubmitted = ko.observable(false);

                this.type = ko.observable('').extend({required: true});
                this.category = ko.observable('');
                this.branchesMode = ko.observable(true);
                this.positionsMode = ko.observable(true);

                this.submit = function () {
                    this.isSubmitted(true);
                };

                this.reset = function () {
                    this.type('');
                    this.category('');
                    this.branchesMode(true);
                    this.positionsMode(true);

                    $(this.branchesFormControlElement()).val('').trigger('change');
                    $(this.positionsFormControlElement()).val('').trigger('change');
                    tinymce.get(this.textFormControlElement().getAttribute('id')).setContent('');
                };
            };

            const viewModel = new ViewModel();

            const $content = $('.create-contract__content');

            viewModel.onInit = function() {
                tinymce.init({
                    selector: '#text',
                    statusbar: false,
                    height: 500,
                    language: 'ru',
                    language_url : '/tinymce-languages/ru.js'
                });

                const $shortcuts = $content.find('.create-contract__editor-shortcut');

                initSearchGlobal($content.find('.create-contract__editor-shortcuts-search').get()[0]);
                initSearch($content.find('.create-contract__editor-shortcuts-search').get()[0], $shortcuts);

                $shortcuts.each((index, element) => {
                    const $variable = $(element).find('a');

                    $(element).find('.create-contract__editor-shortcut-copy-button').on('click', function () {
                        navigator.clipboard.writeText($variable.text());
                        $(this).addClass('bounceIn');
                        setTimeout(() => {
                            $(this).removeClass('bounceIn');
                        }, 750);
                    });

                    $variable.on('click', e => {
                        const editor = tinymce.get('text');
                        editor.focus();
                        editor.selection.setContent($(e.target).text());
                        editor.focus();
                        return false;
                    });
                });

                $shortcuts.on('click', 'a', function(e){
                    const editor = tinymce.get('text');
                    editor.focus();
                    editor.selection.setContent($(e.target).text());
                    editor.focus();
                    return false;
                });
            };

            ko.applyBindings(
                viewModel,
                $content.get()[0]
            );
        });
    </script>
</body>
</html>
