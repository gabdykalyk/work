<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Правовые статусы</title>

    <!-- <link href="bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet"> -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link href="fonts/fontawesome/css/all.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/css/select2.min.css" rel="stylesheet" />
<link href="css/main.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>

<body>
    <div class="hat-scaffold">
        <div class="hat-scaffold__navbar">
            <nav class="hat-navbar">
    <div class="hat-navbar__content-wrapper">
        <div class="hat-navbar__content">
            <div class="hat-navbar__header">
                <div class="hat-navbar__user">
                    <div class="hat-navbar__avatar">
                        <img class="hat-navbar__avatar-img" src="images/avatar.jpg">
                    </div>

                    <div class="hat-navbar__user-name">
                        Анастасия Соколова
                    </div>
                </div>

                <div class="hat-navbar__notifications">
                    <div class="hat-navbar__notifications-icon">
                        <div class="hat-navbar__notifications-icon-counter">28</div>
                        <i class="far fa-bell"></i>
                    </div>
                </div>
            </div>

            <ul class="nav hat-navbar__menu">
                <li class="hat-navbar__menu-item" data-hat-navbar-drawer-content-name="calculations">
                    <i class="far fa-calculator hat-navbar__menu-item-icon"></i>
                    <span class="hat-navbar__menu-item-name">Расчёты</span>
                </li>

                <li class="hat-navbar__menu-item" data-hat-navbar-drawer-content-name="hr">
                    <i class="far fa-user-tie hat-navbar__menu-item-icon"></i>
                    <span class="hat-navbar__menu-item-name">Кадры</span>
                </li>

                <li class="hat-navbar__menu-item" data-hat-navbar-drawer-content-name="documents">
                    <i class="far fa-chart-bar hat-navbar__menu-item-icon"></i>
                    <span class="hat-navbar__menu-item-name">Отчёты</span>
                </li>

                <li class="hat-navbar__menu-item" data-hat-navbar-drawer-content-name="reference">
                    <i class="far fa-book hat-navbar__menu-item-icon"></i>
                    <span class="hat-navbar__menu-item-name">Справочники</span>
                </li>

                <li class="hat-navbar__menu-item" data-hat-navbar-drawer-content-name="search">
                    <i class="far fa-bars hat-navbar__menu-item-icon"></i>
                    <span class="hat-navbar__menu-item-name">Все разделы</span>
                </li>
            </ul>

            <div class="hat-navbar__spacer"></div>

            <div class="hat-navbar__actions hat-navbar__actions--main">
                <a href="#" class="hat-navbar__action">
                    <i class="far fa-cog hat-navbar__action-icon"></i>
                    <span class="hat-navbar__action-name">Настройки</span>
                </a>

                <a href="#" class="hat-navbar__action">
                    <i class="far fa-life-ring hat-navbar__action-icon"></i>
                    <span class="hat-navbar__action-name">Помощь</span>
                </a>
            </div>

            <button class="btn hat-navbar__toggle">
                <i class="fas fa-chevron-left"></i>
            </button>
        </div>
    </div>

    <div class="hat-navbar__drawer">
        <div class="hat-navbar__drawer-content-wrapper scrollbar-inner">
            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="user" data-hat-navbar-drawer-class="hat-navbar__drawer-user">
                <div class="hat-navbar__submenu">
                    <div class="hat-navbar__submenu-header hat-navbar__additional-user-name" style="display: none">
                        Анастасия Соколова
                    </div>

                    <div class="hat-navbar__submenu-content">
                        <a class="hat-navbar__submenu-item" href="#">Профиль</a>
                        <a class="hat-navbar__submenu-item" href="#">Настройки</a>
                    </div>
                </div>

                <a class="hat-navbar__logout-button" href="#">
                    <i class="far fa-sign-out"></i>
                    Выход
                </a>
            </div>

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="notifications" data-hat-navbar-drawer-class="hat-navbar__drawer-notifications">
                <ul class="notice-list">
                    <li>
                        <p>16.05.2019 <span class="danger">Выписан штраф с объяснительной</span></p>
                        <a href="#" class="btn btn-default btn-go">Перейти к просмотру</a>
                    </li>
                    <li>
                        <p>16.05.2019 <span class="danger">Выписано нарушение с объяснительной</span></p>
                        <a href="#" class="btn btn-default btn-go">Перейти к просмотру</a>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__img" style="background-image: url(images/img1.jpg);"></div>
                            </a>
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                    <li>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__img" style="background-image: url(images/img1.jpg);"></div>
                            </a>
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                            <a class="file__block" href="#">
                                <div class="file__img" style="background-image: url(images/img1.jpg);"></div>
                            </a>
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                    <li>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                    </li>
                    <li>
                        <p>28.04.2019 собрание для операторов, водителей, тех. сотрудников и администраторов филиалов
                            Бутово, Щербинка, Эталон, Коммунарка</p>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__img" style="background-image: url(images/img1.jpg);"></div>
                            </a>
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                    <li>
                        <div class="file">
                            <a class="file__block" href="#">
                                <div class="file__file" style="color: #337AB7;"><i class="far fa-file-word"></i></div>
                            </a>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="calculations" data-hat-navbar-drawer-class="hat-navbar__drawer-menu-base">
                <div class="hat-navbar__submenu">
                    <div class="hat-navbar__submenu-header">Расчёты</div>
                    <div class="hat-navbar__submenu-content">
                        <a class="hat-navbar__submenu-item" href="#">Сотрудники</a>
                        <a class="hat-navbar__submenu-item" href="#">Штатная численность</a>
                        <a class="hat-navbar__submenu-item" href="#">Потребность в персонале</a>
                        <a class="hat-navbar__submenu-item" href="#">Кандидаты</a>
                        <a class="hat-navbar__submenu-item hat-navbar__submenu-item--active" href="#">Жалобы и
                            предложения</a>
                        <a class="hat-navbar__submenu-item" href="#">Приказы/инструкции</a>
                        <a class="hat-navbar__submenu-item" href="#">Анкеты водителей</a>
                        <a class="hat-navbar__submenu-item" href="#">Праздничные надбавки</a>
                        <a class="hat-navbar__submenu-item" href="#">Надбавки за лучшие показатели</a>
                        <a class="hat-navbar__submenu-item" href="#">Договоры</a>
                        <a class="hat-navbar__submenu-item" href="#">Управление уведомлениями</a>
                    </div>
                </div>
            </div>

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="hr" data-hat-navbar-drawer-class="hat-navbar__drawer-menu-base">
                <div class="hat-navbar__submenu">
                    <div class="hat-navbar__submenu-header">Кадры</div>
                    <div class="hat-navbar__submenu-content">
                        <a class="hat-navbar__submenu-item" href="#">Сотрудники</a>
                        <a class="hat-navbar__submenu-item" href="#">Штатная численность</a>
                        <a class="hat-navbar__submenu-item" href="#">Потребность в персонале</a>
                        <a class="hat-navbar__submenu-item" href="#">Кандидаты</a>
                        <a class="hat-navbar__submenu-item hat-navbar__submenu-item--active" href="#">Жалобы и
                            предложения</a>
                        <a class="hat-navbar__submenu-item" href="#">Приказы/инструкции</a>
                        <a class="hat-navbar__submenu-item" href="#">Анкеты водителей</a>
                        <a class="hat-navbar__submenu-item" href="#">Праздничные надбавки</a>
                        <a class="hat-navbar__submenu-item" href="#">Надбавки за лучшие показатели</a>
                        <a class="hat-navbar__submenu-item" href="#">Договоры</a>
                        <a class="hat-navbar__submenu-item" href="#">Управление уведомлениями</a>
                    </div>
                </div>
            </div >

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="documents" data-hat-navbar-drawer-class="hat-navbar__drawer-menu-base">
                <div class="hat-navbar__submenu">
                    <div class="hat-navbar__submenu-header">Документы</div>
                    <div class="hat-navbar__submenu-content">
                        <a class="hat-navbar__submenu-item" href="#">Сотрудники</a>
                        <a class="hat-navbar__submenu-item" href="#">Штатная численность</a>
                        <a class="hat-navbar__submenu-item" href="#">Потребность в персонале</a>
                        <a class="hat-navbar__submenu-item" href="#">Кандидаты</a>
                        <a class="hat-navbar__submenu-item hat-navbar__submenu-item--active" href="#">Жалобы и
                            предложения</a>
                        <a class="hat-navbar__submenu-item" href="#">Приказы/инструкции</a>
                        <a class="hat-navbar__submenu-item" href="#">Анкеты водителей</a>
                        <a class="hat-navbar__submenu-item" href="#">Праздничные надбавки</a>
                        <a class="hat-navbar__submenu-item" href="#">Надбавки за лучшие показатели</a>
                        <a class="hat-navbar__submenu-item" href="#">Договоры</a>
                        <a class="hat-navbar__submenu-item" href="#">Управление уведомлениями</a>
                    </div>
                </div>
            </div>

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="reference" data-hat-navbar-drawer-class="hat-navbar__drawer-menu-base">
                <div class="hat-navbar__submenu">
                    <div class="hat-navbar__submenu-header">Справочники</div>
                    <div class="hat-navbar__submenu-content">
                        <a class="hat-navbar__submenu-item" href="#">Сотрудники</a>
                        <a class="hat-navbar__submenu-item" href="#">Штатная численность</a>
                        <a class="hat-navbar__submenu-item" href="#">Потребность в персонале</a>
                        <a class="hat-navbar__submenu-item" href="#">Кандидаты</a>
                        <a class="hat-navbar__submenu-item hat-navbar__submenu-item--active" href="#">Жалобы и
                            предложения</a>
                        <a class="hat-navbar__submenu-item" href="#">Приказы/инструкции</a>
                        <a class="hat-navbar__submenu-item" href="#">Анкеты водителей</a>
                        <a class="hat-navbar__submenu-item" href="#">Праздничные надбавки</a>
                        <a class="hat-navbar__submenu-item" href="#">Надбавки за лучшие показатели</a>
                        <a class="hat-navbar__submenu-item" href="#">Договоры</a>
                        <a class="hat-navbar__submenu-item" href="#">Управление уведомлениями</a>
                    </div>
                </div>
            </div>

            <div class="hat-navbar__drawer-content" data-hat-navbar-drawer-content-name="search" data-hat-navbar-drawer-class="hat-navbar__drawer-menu-search">
                <div class="hat-navbar__contents">
                    <div class="hat-navbar__contents-search-field  hat-navbar__contents-search-field--empty">
                        <input class="hat-navbar__contents-search-field-input" placeholder="Поиск">
                        <button class="btn hat-navbar__contents-search-field-clear-button">
                            <i class="fal fa-times"></i>
                        </button>
                    </div>

                    <div class="hat-navbar__contents-content">
                        <div class="hat-navbar__contents-content-column">
                            <div class="hat-navbar__submenu">
                                <div class="hat-navbar__submenu-header">Отчёты</div>
                                <div class="hat-navbar__submenu-content">
                                    <a class="hat-navbar__submenu-item" href="#">Свободный отчёт</a>
                                    <a class="hat-navbar__submenu-item" href="#">Доставка свободный</a>
                                    <a class="hat-navbar__submenu-item" href="#">Оплата труда</a>
                                    <a class="hat-navbar__submenu-item" href="#">Доставка по сотрудникам</a>
                                    <a class="hat-navbar__submenu-item" href="#">КОРФ/Нагрузка/Опоздания</a>
                                    <a class="hat-navbar__submenu-item" href="#">КОРФ/Нагрузка/Опоздания по должностям</a>
                                    <a class="hat-navbar__submenu-item" href="#">Свободный — таблица</a>
                                    <a class="hat-navbar__submenu-item" href="#">Опоздания</a>
                                    <a class="hat-navbar__submenu-item" href="#">Депозиты</a>
                                    <a class="hat-navbar__submenu-item" href="#">Рекомендации по смене разрядов</a>
                                    <a class="hat-navbar__submenu-item" href="#">Штрафы и премии</a>
                                    <a class="hat-navbar__submenu-item" href="#">KPI и отзывы водителей</a>
                                    <a class="hat-navbar__submenu-item" href="#">Водители, не добравшиеся до минималки</a>
                                    <a class="hat-navbar__submenu-item" href="#">Внешние заказы</a>
                                    <a class="hat-navbar__submenu-item" href="#">Сводный по нарушениям</a>
                                </div>
                            </div>
                        </div>

                        <div class="hat-navbar__contents-content-column">
                            <div class="hat-navbar__submenu">
                                <div class="hat-navbar__submenu-header">Пользователи</div>
                                <div class="hat-navbar__submenu-content">
                                    <a class="hat-navbar__submenu-item" href="#">Список пользователей</a>
                                    <a class="hat-navbar__submenu-item" href="#">Роли пользователей</a>
                                    <a class="hat-navbar__submenu-item" href="#">Ответственные за карьеру</a>
                                </div>
                            </div>

                            <div class="hat-navbar__submenu">
                                <div class="hat-navbar__submenu-header">Графики</div>
                                <div class="hat-navbar__submenu-content">
                                    <a class="hat-navbar__submenu-item" href="#">Мероприятия</a>
                                    <a class="hat-navbar__submenu-item" href="#">Рабочие графики</a>
                                </div>
                            </div>

                            <div class="hat-navbar__submenu">
                                <div class="hat-navbar__submenu-header">Листовки</div>
                                <div class="hat-navbar__submenu-content">
                                    <a class="hat-navbar__submenu-item" href="#">Статистика по листовкам</a>
                                    <a class="hat-navbar__submenu-item" href="#">Отработанные адреса</a>
                                </div>
                            </div>

                            <div class="hat-navbar__submenu">
                                <div class="hat-navbar__submenu-header">Маркетинг</div>
                                <div class="hat-navbar__submenu-content">
                                    <a class="hat-navbar__submenu-item" href="#">Маркетинг</a>
                                    <a class="hat-navbar__submenu-item" href="#">Акции</a>
                                </div>
                            </div>
                        </div>

                        <div class="hat-navbar__contents-content-column">
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Штрафы/Премии</a>
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Нарушения</a>
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Плохие отзывы</a>
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Жалобы и
                                предложения</a>
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Зоны доставки</a>
                            <a class="hat-navbar__submenu-item hat-navbar__submenu-item--single" href="#">Инструкция</a>
                        </div>
                    </div>

                    <div class="hat-navbar__actions hat-navbar__actions--additional">
                        <a href="#" class="hat-navbar__action">
                            <i class="far fa-cog hat-navbar__action-icon"></i>
                            <span class="hat-navbar__action-name">Настройки</span>
                        </a>

                        <a href="#" class="hat-navbar__action">
                            <i class="far fa-life-ring hat-navbar__action-icon"></i>
                            <span class="hat-navbar__action-name">Помощь</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="hat-navbar__backdrop"></div>
</nav>

        </div>

        <div class="hat-scaffold__body">
            <div class="hat-scaffold__content-wrapper">
                <div class="law-statuses__content" data-bind="childrenComplete: onInit">
                    <div class="law-statuses__header">
                        <h1>Правовые статусы</h1>
                    </div>

                    <div class="law-statuses__sub-header">
                        <div class="form-group law-statuses__search search-global search-global--empty">
                            <input class="form-control" placeholder="Поиск" data-bind="textInput: searchValue">

                            <button type="button" class="btn btn-default search-global__search-clear-button"
                                    title="Удалить">
                                <i class="far fa-times"></i>
                            </button>
                        </div>

                        <button class="btn btn-primary btn-p25 law-statuses__add-button">Добавить статус</button>
                    </div>

                    <div class="law-statuses__table">
                        <div class="law-statuses__table-head">
                            <div class="law-statuses__table-head-row">
                                <div class="law-statuses__table-head-cell law-statuses__table-name-head-cell">
                                    Название
                                </div>

                                <div class="law-statuses__table-head-cell law-statuses__table-citizenship-head-cell">
                                    Гражданство
                                </div>

                                <div class="law-statuses__table-head-cell law-statuses__table-actions-head-cell"></div>
                            </div>
                        </div>

                        <ul class="law-statuses__table-body" data-bind="documentsSortable: true, documentsSortableStatusSort: statusSort, documentsSortableDocumentSort: documentSort">
                            <!-- ko foreach: { data: statuses, beforeRemove: tableRowBeforeRemove } -->
                                <!-- ko if: $root.isStatusVisible($data.id) -->
                                  <li
                                      class="law-statuses__table-row law-statuses__table-status-row"
                                      data-bind="
                                          css: {
                                              'law-statuses__table-status-row--empty': !$root.hasDocuments($data.id),
                                              'law-statuses__table-status-row--last': $index() === $root.statuses().length - 1 && $root.getDocuments(null).length > 0
                                          },
                                          attr: {
                                              'data-documents-status-id': id
                                          }
                                      "
                                  >
                                    <div class="law-statuses__table-row-header">
                                        <div class="law-statuses__table-cell law-statuses__table-name-cell">
                                            <div class="law-statuses__table-status-row-toggle" data-bind="click: function() { $root.toggleStatus($data.id); }">
                                                <!-- ko if: $root.hasDocuments($data.id) -->
                                                    <!-- ko if: $root.isStatusOpen($data.id) -->
                                                    <i class="fa fa-chevron-circle-up"></i>
                                                    <!-- /ko -->

                                                    <!-- ko if: !$root.isStatusOpen($data.id) -->
                                                    <i class="fa fa-chevron-circle-down"></i>
                                                    <!-- /ko -->
                                                <!-- /ko -->
                                                <span class="law-statuses__table-name" data-bind="text: name()"></span>
                                            </div>
                                        </div>

                                        <div class="law-statuses__table-cell law-statuses__table-citizenship-cell">
                                            <!-- ko text: citizenship().length > 0 ? citizenship() : '-' -->
                                            <!-- /ko -->
                                        </div>

                                        <div class="law-statuses__table-cell law-statuses__table-actions-cell">
                                            <button type="button" class="btn btn-default btn-w-30 law-statuses__table-row-edit-button"
                                                    title="Редактировать">
                                                <i class="far fa-pencil"></i>
                                            </button>

                                            <button type="button" class="btn btn-default btn-w-30 law-statuses__table-row-remove-button"
                                                    title="Удалить" data-bind="click: function() {$root.removeStatus($data.id);}">
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <ul class="law-statuses__table-row-content" data-bind="documentsTypeOpen: $root.isStatusDocumentsVisible($data.id)">
                                        <!-- ko foreach: { data: $root.getDocuments($data.id), beforeRemove: $root.tableRowBeforeRemove } -->
                                            <!-- ko if: $root.isDocumentVisible($data.id) -->
                                                <!-- ko template: { name: 'table-document-row-template', data: $data } --><!-- /ko -->
                                            <!-- /ko -->
                                        <!-- /ko -->
                                    </ul>
                                </li>
                                <!-- /ko -->
                            <!-- /ko -->

                            <!-- ko foreach: { data: getDocuments(null), beforeRemove: $root.tableRowBeforeRemove } -->
                                <!-- ko if: $root.isDocumentVisible($data.id) -->
                                    <!-- ko template: { name: 'table-document-row-template', data: $data } --><!-- /ko -->
                                <!-- /ko -->
                            <!-- /ko -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/html" id="table-document-row-template">
        <li class="law-statuses__table-row law-statuses__table-document-row" data-bind="attr: { 'data-documents-document-id': id }">
            <div class="law-statuses__table-row-header">
                <div class="law-statuses__table-cell law-statuses__table-name-cell">
                    <span class="law-statuses__table-name" data-bind="text: name"></span>
                </div>

                <div class="law-statuses__table-cell law-statuses__table-citizenship-cell"></div>

                <div class="law-statuses__table-cell law-statuses__table-actions-cell"></div>
            </div>
        </li>
    </script>

    <div class="modal fade law-statuses__modal modal-global" tabindex="-1" role="dialog" id="law-statuses__modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>

                    <h4 class="modal-title">Создать правовой статус</h4>
                </div>

                <div class="modal-body">
                    <form action="" method="post" class="form-respons">
                        <div class="form-group required law-statuses__modal-name-form-group">
                            <label for="law-statuses__modal-name">Название статуса</label>
                            <input type="text" class="form-control" value="" name="law-statuses__modal-name"
                                   id="law-statuses__modal-name">
                            <span class="help-block" style="display: none">Должно быть не меньше 2 символов</span>
                        </div>

                        <div class="form-group law-statuses__modal-citizenship-form-group">
                            <label for="law-statuses__modal-citizenship">Гражданство</label>
                            <select class="form-control" name="law-statuses__modal-citizenship[]" id="law-statuses__modal-citizenship" multiple="multiple">
                                <option value="1">Россия</option>
                                <option value="2">Украина</option>
                                <option value="3">Белоруссия</option>
                                <option value="4">Казахстан</option>
                            </select>
                        </div>

                        <div class="form-btns clearfix law-statuses__modal-save-button">
                            <button type="button" class="btn btn-primary">Сохранить</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
        integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
        crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"
        integrity="sha256-AAhU14J4Gv8bFupUUcHaPQfvrdNauRHMt+S4UVcaJb0=" crossorigin="anonymous"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
</script>

<!-- Bootstrap DateTimepicker, https://eonasdan.github.io/bootstrap-datetimepicker/ -->
<script type="text/javascript" src="js/moment-with-locales.min.js"></script>
<script type="text/javascript" src="js/bootstrap-datetimepicker.min.js"></script>

<!-- Select2, https://select2.org/getting-started/basic-usage -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.full.min.js"></script>

<!-- Custom Scroll, http://gromo.github.io/jquery.scrollbar/-->
<script src="js/jquery.scrollbar.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/nestedSortable/2.0.0/jquery.mjs.nestedSortable.min.js"
        integrity="sha256-EnaBcZsgejHg52kCwmsQHxvCIL0nl9YmWnPKQoKjWhg=" crossorigin="anonymous"></script>

<script type="text/javascript" src="js/js-gl.js"></script>


    <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js"></script>-->
    <script type="text/javascript" src="https://knockoutjs.com/downloads/knockout-3.5.0.debug.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            initHatNavbar(document);

            ko.bindingHandlers.documentsTypeOpen = {
                init: function(element, valueAccessor) {
                    const value = ko.unwrap(valueAccessor());

                    if (value) {
                        $(element).css('height', '');
                        $(element).css('display', 'none');

                        $(element).slideDown(0);
                    } else {
                        $(element).slideUp(0, () => {
                            $(element).css('height', '0');
                            $(element).css('display', 'block');
                        });
                    }

                    $(element).data('documents-status-open-open', value);
                },
                update: function(element, valueAccessor, allBindings) {
                    const value = ko.unwrap(valueAccessor());
                    const duration = allBindings.get('slideDuration') || 200;

                    if ($(element).data('documents-status-open-open') !== value) {
                        if (value) {
                            $(element).css('height', '');
                            $(element).css('display', 'none');

                            $(element).slideDown(duration);
                        } else {
                            $(element).slideUp(duration, () => {
                                $(element).css('height', '0');
                                $(element).css('display', 'block');
                            });
                        }

                        $(element).data('documents-status-open-open', value);
                    }
                }
            };

            ko.bindingHandlers.documentsSortable = {
                init: function(element, valueAccessor, allBindings, viewModel) {
                    $(element).nestedSortable({
                        items: '.law-statuses__table-row',
                        listType: 'ul',
                        doNotClear: true,
                        maxLevels: 2,
                        disableNestingClass: 'law-statuses__table-document-row',
                        tabSize: 10,
                        isAllowed: ($placeholder, $placeholderParent, $currentItem) => {
                            return $currentItem.hasClass('law-statuses__table-document-row') || !$placeholderParent;
                        },
                        change: function(mouseEvent, event) {
                            const $placeholder = event.placeholder;

                            if ($placeholder.hasClass('law-statuses__table-document-row')) {
                                $placeholder.toggle($placeholder.nextAll().filter('.law-statuses__table-status-row').length === 0);
                            } else {
                                $placeholder.toggle($placeholder.prevAll().filter('.law-statuses__table-document-row').length === 0);
                            }
                        },
                        update: function(mouseEvent, event) {
                            const statusId = event.item.data('documents-status-id');

                            if (statusId !== undefined) {
                                const index = $('.law-statuses__table-status-row').toArray().indexOf(event.item.get()[0]);

                                if (allBindings()['documentsSortableStatusSort']) {
                                    allBindings()['documentsSortableStatusSort'].bind(viewModel)(statusId, index);
                                }
                            } else {
                                const documentId = event.item.data('documents-document-id');
                                const statusId = event.item.parent().hasClass('law-statuses__table-body') ? null : event.item.closest('.law-statuses__table-status-row').data('documents-status-id');
                                const index = event.item.parent().children('.law-statuses__table-document-row').toArray().indexOf(event.item.get()[0]);

                                if (allBindings()['documentsSortableDocumentSort']) {
                                    allBindings()['documentsSortableDocumentSort'].bind(viewModel)(documentId, statusId, index);
                                }
                            }

                            event.item.remove();
                        }
                    });
                }
            };

            const ViewModel = function(statuses, documents) {
                this.statuses = ko.observableArray(statuses.map(t => ({
                    id: t.id,
                    name: ko.observable(t.name),
                    citizenship: ko.observable(t.citizenship)
                })));
                this.documents = ko.observableArray(documents.map(d => ({
                    id: d.id,
                    statusId: ko.observable(d.statusId),
                    name: d.name,
                    index: ko.observable(d.index)
                })));
                this.openStatuses = ko.observableArray([]);
                this.searchValue = ko.observable('');

                this.getDocuments = function(statusId) {
                    return this.documents()
                        .filter(d => d.statusId() === statusId)
                        .sort((a, b) => {
                            if (a.index() > b.index()) {
                                return 1;
                            } else {
                                return -1;
                            }
                        });
                };

                this.getStatus = function(statusId) {
                    return this.statuses().find(t => t.id === statusId);
                };

                this.getDocument = function(documentId) {
                    return this.documents().find(d => d.id === documentId);
                };

                this.isStatusOpen = function(statusId) {
                    return this.openStatuses().findIndex(id => id === statusId) !== -1;
                };

                this.isStatusVisible = function(statusId) {
                    const searchValue = this.searchValue().toLowerCase();
                    return searchValue === '' ||
                        (
                            this.getStatus(statusId).name().toLowerCase().includes(searchValue) ||
                            this.getDocuments(statusId).some(d => d.name.toLowerCase().includes(searchValue))
                        );
                };

                this.isStatusDocumentsVisible = function(statusId) {
                    const searchValue = this.searchValue().toLowerCase();
                    return this.isStatusOpen(statusId) ||
                            (
                                searchValue !== '' &&
                                (
                                    this.getStatus(statusId).name().toLowerCase().includes(searchValue) ||
                                    this.getDocuments(statusId).some(d => d.name.toLowerCase().includes(searchValue))
                                )
                            );
                };

                this.isDocumentVisible = function(documentId) {
                    const searchValue = this.searchValue().toLowerCase();
                    const document = this.getDocument(documentId);
                    return searchValue === '' ||
                        document.name.toLowerCase().includes(searchValue) ||
                        (document.statusId() !== null && this.getStatus(document.statusId()).name().toLowerCase().includes(searchValue));
                };

                this.hasDocuments = function(statusId) {
                    return this.getDocuments(statusId).length;
                };

                this.toggleStatus = function(statusId) {
                    if (this.hasDocuments(statusId)) {
                        if (this.isStatusOpen(statusId)) {
                            this.openStatuses.remove(statusId)
                        } else {
                            this.openStatuses.push(statusId);
                        }
                    }
                };

                this.openStatus = function(statusId) {
                    if (this.hasDocuments(statusId)) {
                        if (!this.isStatusOpen(statusId)) {
                            this.openStatuses.push(statusId);
                        }
                    }
                };

                this.removeStatus = function(statusId) {
                    this.documents.remove(this.getDocuments(statusId));
                    this.statuses.remove(this.getStatus(statusId));
                    this.openStatuses.remove(statusId);
                };

                this.tableRowBeforeRemove = function(element) {
                    $(element).hide(200, () => $(element).remove());
                };

                this.statusSort = function(statusId, index) {
                    const type = this.statuses.remove(this.getStatus(statusId))[0];
                    this.statuses.splice(index, 0, type);
                };

                this.documentSort = function(documentId, statusId, index) {
                    const document = this.getDocument(documentId);
                    const previousStatusId = document.statusId;

                    this.documents.remove(document);

                    this.getDocuments(previousStatusId()).forEach((d, i) => d.index(i));
                    this.getDocuments(statusId).filter(d => d.index() >= index).forEach((d, i) => d.index(index + i + 1));

                    document.statusId(statusId);
                    document.index(index);
                    this.documents.push(document);

                    this.openStatus(statusId);
                };
            };

            const viewModel = new ViewModel(
                [
                    {id: 0, name: 'Резидент РФ', citizenship: ''},
                    {id: 1, name: 'Граждане ЕС', citizenship: ''},
                    {id: 2, name: 'Высококвалифицированные специалисты', citizenship: 'Украина, Белоруссия, Казахстан'}
                ],
                [
                    {id: 0, name: 'Миграционная карта', statusId: 0, index: 0},
                    {id: 1, name: 'РВП', statusId: 0, index: 1},
                    {id: 2, name: 'Договор о материальной ответственности', statusId: 0, index: 2},
                    {id: 3, name: 'Патент', statusId: 1, index: 0},
                    {id: 4, name: 'Вид на жительство', statusId: null, index: 0}
                ]
            );

            const $documentsContent = $('.law-statuses__content');

            viewModel.onInit = function() {
                initSearchGlobal($documentsContent.find('.law-statuses__search').get()[0]);

                const $modal = $('.law-statuses__modal');
                const $modalNameFormGroup = $('.law-statuses__modal-name-form-group');
                $modal.modal({
                    show: false
                });

                $('.law-statuses__add-button').on('click', () => {
                    $modal.modal('show');
                });

                $('.law-statuses__modal-save-button').on('click', () => {
                    const value = $modalNameFormGroup.find('.form-control').val();
                    const hasError = value.length < 2;
                    $modalNameFormGroup.toggleClass('has-error', hasError);
                    $modalNameFormGroup.find('.help-block').toggle(hasError);

                    if (!hasError) {
                        $modal.modal('hide');
                    }
                });

                $('.law-statuses__modal-citizenship-form-group .form-control').select2({
                    width: '100%'
                });
            };

            ko.applyBindings(
                viewModel,
                $documentsContent.get()[0]
            );
        });
    </script>

    <!-- TODO: удалить после перехода всех страниц на новое меню -->
    <style>
    html, body {
        height: 100%;
    }

    body {
        padding: 0;
        min-height: unset !important;
		overflow: hidden;
    }
</style>

</body>
</html>
