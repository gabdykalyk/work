<!DOCTYPE html>
<html class="hrm-page login-page hrm-page--initializing" data-bind="childrenComplete: childrenComplete" lang="ru">
<head>
    <title>Sakura</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="HandheldFriendly" content="true" />
<meta content="IE=edge" http-equiv="X-UA-Compatible" />
<link href="https://fonts.googleapis.com/css?family=Fira+Sans:100,200,300,400,500,600,700,800,900&display=swap&subset=cyrillic" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.10.2/css/OverlayScrollbars.min.css" integrity="sha256-zUBmWpj0DsZzFautKgMOtiOkT6ECQ+a6RitMns7+HRM=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://unpkg.com/tippy.js@5/dist/backdrop.css" />
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
<link rel="stylesheet" href="assets/fonts/fontawesome/css/all.css" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<link rel="stylesheet" href="assets/css/main.css" />

</head>

<body>
    <div class="hrm-scaffold login-page__scaffold">
        <div class="hrm-scaffold__body">
            <div class="hrm-scaffold__content login-page__content">
                <div class="login-page__form" data-bind="using: formModel()">
                    <div class="login-page__form-logo"></div>

                    <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                        <div class="login-page__form-field" data-bind="
                            hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                        ">
                            <label data-bind="hrmFormFieldLabel: label">Логин</label>

                            <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                <input data-bind="
                                    textInput: login,
                                    hrmFormFieldInputControl: control,
                                    hrmFormFieldInputControlErrorStateMatcher: $root.formControlErrorStateMatcher.bind($root)
                                ">
                            </div>

                            <div data-bind="
                                component: {name: 'hrm-form-field-error'},
                                hrmSlide,
                                hrmSlideValue: control() !== null ? control().errorState : false,
                                hrmSlideDuration: 150
                            ">
                                <!-- ko text: $parent.login.error() --><!-- /ko -->
                            </div>
                        </div>
                    <!-- /ko -->

                    <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                        <div class="login-page__form-field" data-bind="
                            hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                        ">
                            <label data-bind="hrmFormFieldLabel: label">Пароль</label>

                            <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                <input data-bind="
                                    textInput: password,
                                    hrmFormFieldInputControl: control,
                                    hrmFormFieldInputControlErrorStateMatcher: $root.formControlErrorStateMatcher.bind($root)
                                " type="password">
                            </div>

                            <div data-bind="
                                component: {name: 'hrm-form-field-error'},
                                hrmSlide,
                                hrmSlideValue: control() !== null ? control().errorState : false,
                                hrmSlideDuration: 150
                            ">
                                <!-- ko text: $parent.password.error() --><!-- /ko -->
                            </div>
                        </div>
                    <!-- /ko -->

                    <button class="hrm-button hrm-basic-button hrm-primary-button login-page__form-submit-button"
                            data-bind="click: function () {$root.submitForm();}">
                        <span class="hrm-primary-button__content">Войти</span>
                        <span class="hrm-primary-button__background hrm-primary-button__hover-background"></span>
                        <span class="hrm-primary-button__background hrm-primary-button__active-background"></span>
                    </button>
                </div>
            </div>

            <div class="hrm-scaffold__footer login-page__footer" data-bind="component: {name: 'hrm-basic-footer'}"></div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-debug.js" integrity="sha256-M5ZomNNnrnEB2WjSbnty5GWGqq6UuAAVNnWECisgEis=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/knockout.validation@2.0.4/dist/knockout.validation.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.12/js/select2.full.min.js" integrity="sha256-vucLmrjdfi9YwjGY/3CQ7HnccFSS/XRS1M/3k/FDXJw=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/i18n/ru.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/simplebar/5.1.0/simplebar.min.js" integrity="sha256-hFddD6XMIwFba4ITQjpv5WWE557w6O0w9RRfmGjIz4k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.10.2/js/OverlayScrollbars.min.js" integrity="sha256-5Tj3ZUgjHEGwF7TxpOgbPpjhq+WxXvpfb+qr9OxRHtY=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.10.2/js/jquery.overlayScrollbars.min.js" integrity="sha256-RE+oy7ofA6XerySMpTlDcg0gFUwHN3n0qQ5fUIZVq/M=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/gh/RobinHerbots/jquery.inputmask@4.0.9/dist/jquery.inputmask.bundle.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js" integrity="sha256-AdQN98MVZs44Eq2yTwtoKufhnU+uZ7v2kXnD5vqzZVo=" crossorigin="anonymous"></script>
<script src="https://unpkg.com/popper.js@1"></script>
<script src="https://unpkg.com/tippy.js@5"></script>
<script src="https://unpkg.com/sticky-events@3.1.1/dist/sticky-events.umd.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js" integrity="sha256-VeNaFBVDhoX3H+gJ37DpT/nTuZTdjYro9yBruHjVmoQ=" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script src="assets/js/main.js"></script>

    <script type="text/javascript">
    $(function () {
        const $page = $(document.documentElement);

        const ViewModel = function () {
            this.subscriptions = [];

            this.isFormSubmitted = ko.observable(false);

            this.loginError = ko.observable(null);

            this.formModel = ko.validatedObservable({
                login: ko.observable('').extend({
                    required: {
                        message: 'Обязательное поле'
                    }
                }),
                password: ko.observable('').extend({
                    required: {
                        message: 'Обязательное поле'
                    },
                    validation: {
                        validator: () => {
                            return this.loginError() === null;
                        },
                        message: 'Неправильный логин и/или пароль'
                    }
                })
            });

            this.isValid = ko.pureComputed(() => {
                return this.formModel().login() !== '' && this.formModel().password() !== '';
            });

            this.formControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return this.isFormSubmitted() && !formControl.isValid();
                });
            };

            this.childrenComplete = function () {
                $page.removeClass('hrm-page--initializing');
            };

            this.submitForm = function () {
                this.isFormSubmitted(true);

                if (this.isValid()) {
                    if (this.formModel().login() !== '123456' || this.formModel().password() !== '123456') {
                        this.loginError({message: 'Неправильный логин и/или пароль'});
                    }
                }
            };

            (() => {
                this.subscriptions.push(this.formModel().login.subscribe(() => {
                    this.loginError(null);
                }));

                this.subscriptions.push(this.formModel().password.subscribe(() => {
                    this.loginError(null);
                }));
            })();
        };

        ViewModel.prototype.dispose = function() {
            this.subscriptions.forEach(s => s.dispose());
        };

        const viewModel = new ViewModel();

        ko.applyBindings(
            viewModel,
            $page.get()[0]
        );
    });
</script>

</body>
</html>
