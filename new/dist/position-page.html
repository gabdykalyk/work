<!DOCTYPE html>
<html class="hrm-page position-page hrm-page--initializing"
      data-bind="descendantsComplete: descendantsComplete" lang="ru">
<head>
    <title>Sakura</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="HandheldFriendly" content="true" />
<meta content="IE=edge" http-equiv="X-UA-Compatible" />
<link href="https://fonts.googleapis.com/css?family=Fira+Sans:100,200,300,400,500,600,700,800,900&display=swap&subset=cyrillic" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.10.2/css/OverlayScrollbars.min.css" integrity="sha256-zUBmWpj0DsZzFautKgMOtiOkT6ECQ+a6RitMns7+HRM=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://unpkg.com/tippy.js@5/dist/backdrop.css" />
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
<link rel="stylesheet" href="assets/fonts/fontawesome/css/all.css" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.css" integrity="sha256-vZ3SaLOjnKO/gGvcUWegySoDU6ff33CS5i9ot8J9Czk=" crossorigin="anonymous" />

<link rel="stylesheet" href="assets/css/main.css" />

</head>

<body>
    <div class="hrm-scaffold">
        <div class="hrm-scaffold__sidebar"
             data-bind="component: {name: 'hrm-main-sidebar', params: {collapsed: isSidebarCollapsed}}">
        </div>
        <div class="hrm-scaffold__body">
            <div class="hrm-scaffold__content position-page__content">
                <div class="position-page__header">
                    <span class="position-page__title">
                        Новая должность
                    </span>

                    <!-- ko if: viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                        <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_secondary
                                       hrm-button-with-arrow-left-icon position-page__back-button">
                            К списку должностей
                        </button>
                    <!-- /ko -->

                    <!-- ko if: viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                        <button class="hrm-button hrm-circle-icon-button hrm-circle-icon-button--theme_secondary
                                       hrm-circle-arrow-left-icon-button position-page__back-button">
                        </button>
                    <!-- /ko -->
                </div>

                <div class="position-page__navigation"
                     data-bind="component: {name: 'hrm-tab-group', params: {items: navigationTabs, activeItem: activeTab}}">
                </div>

                <!-- ko template: {
                    foreach: hrmTemplateIf($root.activeTab() === 0, $data),
                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                } -->
                    <!-- ko let: {'$tab': $root.workloadTabViewModel} -->
    <div class="position-page__tab-pane position-page__workload-tab-pane"
         data-bind="using: $tab.formModel.value">
        <!-- ko if: !$tab.isResetting() -->
            <div class="position-page__section">
                <div class="position-page__section-row position-page__workload-tab-pane-section-row">
                    <div class="position-page__section-row-content">
                        <div class="position-page__section-row-item
                                    position-page__workload-tab-pane-section-row-name-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div data-bind="
                                    hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                ">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Название должности

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Название должности'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <input data-bind="
                                            textInput: name,
                                            hrmFormFieldInputControl: control,
                                            hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                        " placeholder="Введите название">
                                    </div>

                                    <div data-bind="
                                        component: {name: 'hrm-form-field-error'},
                                        hrmSlide,
                                        hrmSlideValue: control() !== null ? control().errorState : false,
                                        hrmSlideDuration: 150
                                    ">
                                        <!-- ko text: $parent.name.error() --><!-- /ko -->
                                    </div>
                                </div>
                            <!-- /ko -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="position-page__section">
                <span class="position-page__section-title">Основная нагрузка</span>

                <div class="position-page__section-row position-page__workload-tab-pane-section-row">
                    <div class="position-page__section-row-content">
                        <div class="position-page__section-row-item
                                    position-page__workload-tab-pane-section-row-workload-type-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div data-bind="
                                   hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                ">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Тип нагрузки

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Тип нагрузки'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <select data-bind="
                                            value: workloadType,
                                            hrmSelect, hrmSelectPlaceholder: 'Выберите тип', hrmSelectAllowClear: true,
                                            hrmFormFieldSelectControl: control,
                                            hrmFormFieldSelectControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                        ">
                                            <option></option>
                                            <option value="0">Объём товара по всему предприятию</option>
                                            <option value="1">Объём товара по категориям</option>
                                            <option value="2">Оборот филиала</option>
                                            <option value="3">Оборот филиала по типу заказа</option>
                                            <option value="4">Оборот филиала по категориям</option>
                                            <option value="5">Оборот товаров, закреплённых за сотрудником</option>
                                            <option value="6">Количество заказов, закрепленных за сотрудником</option>
                                            <option value="7">Количество заказов, произведенных в филиале</option>
                                            <option value="8">Количество заказов по типу заказа, произведенных в филиале</option>
                                            <option value="9">Оплата за смену</option>
                                            <option value="10">Оплата за час</option>
                                        </select>
                                    </div>

                                    <div data-bind="
                                        component: {name: 'hrm-form-field-error'},
                                        hrmSlide,
                                        hrmSlideValue: control() !== null ? control().errorState : false,
                                        hrmSlideDuration: 150
                                    ">
                                        <!-- ko text: $parent.workloadType.error() --><!-- /ko -->
                                    </div>
                                </div>
                            <!-- /ko -->
                        </div>

                        <!-- ko template: {
                            foreach: hrmTemplateIf(['1', '4'].includes(workloadType()), $data),
                            afterAdd: hrmFadeAfterAddFactory(100, 100),
                            beforeRemove: hrmFadeBeforeRemoveFactory(100)
                        } -->
                            <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.tabletMaxWidth -->
                                <div class="position-page__section-row-wrapper"></div>
                            <!-- /ko -->

                            <div class="position-page__section-row-item
                                        position-page__workload-tab-pane-section-row-dish-categories-item">
                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                    <div data-bind="
                                       hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                    ">
                                        <label data-bind="hrmFormFieldLabel: label">
                                           Категории

                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                    data-bind="hrmTooltip, hrmTooltipText: 'Категории'">
                                            </button>
                                        </label>

                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                            <select data-bind="
                                                options: $root.dishCategories,
                                                optionsText: 'name',
                                                optionsValue: 'id',
                                                optionsCaption: '',
                                                selectedOptions: dishCategories,
                                                hrmSelect, hrmSelectSearchEnabled: true,
                                                hrmSelectPlaceholder: 'Введите категории',
                                                hrmFormFieldSelectControl: control
                                            " multiple>
                                                <option></option>
                                            </select>
                                        </div>
                                    </div>
                                <!-- /ko -->
                            </div>

                            <div class="position-page__section-row-item
                                        position-page__workload-tab-pane-section-row-dish-categories-exclusion-flag-item">
                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                    <div class="hrm-form-field-switch-group"
                                         data-bind="hrmSwitchGroup, hrmSwitchGroupControlRef: control, hrmSwitchGroupLabelRef: label">
                                        <div data-bind="component: {name: 'hrm-switch', params: {checked: dishCategoriesExclusionFlag, exportAs: control}}"></div>
                                        <label data-bind="hrmSwitchGroupLabel: label">
                                            Все категории, кроме указанных
                                        </label>
                                    </div>
                                <!-- /ko -->
                            </div>
                        <!-- /ko -->

                        <!-- ko template: {
                            foreach: hrmTemplateIf(['3', '8'].includes(workloadType()), $data),
                            afterAdd: hrmFadeAfterAddFactory(100, 100),
                            beforeRemove: hrmFadeBeforeRemoveFactory(100)
                        } -->
                            <div class="position-page__section-row-item
                                        position-page__workload-tab-pane-section-row-order-types-item">
                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                    <div data-bind="
                                       hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                    ">
                                        <label data-bind="hrmFormFieldLabel: label">
                                            Тип заказа

                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                    data-bind="hrmTooltip, hrmTooltipText: 'Тип заказа'">
                                            </button>
                                        </label>

                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                            <select data-bind="
                                                selectedOptions: orderTypes,
                                                hrmSelect, hrmSelectSearchEnabled: true,
                                                hrmFormFieldSelectControl: control
                                            " multiple>
                                                <option></option>
                                                <option value="0">Зал</option>
                                                <option value="1">Доставка</option>
                                                <option value="2">Самовызов</option>
                                            </select>
                                        </div>
                                    </div>
                                <!-- /ko -->
                            </div>
                        <!-- /ko -->
                    </div>
                </div>

                <div class="position-page__section-row position-page__workload-tab-pane-section-row">
                    <div class="position-page__section-row-content">
                        <div class="position-page__section-row-item
                                    position-page__workload-tab-pane-section-row-units-item">
                            <!-- ko with: {value: ['6', '7'].includes(workloadType()) ? '1' : units} -->
                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                    <div data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                        <label data-bind="hrmFormFieldLabel: label">
                                            Единицы

                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                    data-bind="hrmTooltip, hrmTooltipText: 'Единицы'">
                                            </button>
                                        </label>

                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                            <select data-bind="
                                                value: value,
                                                hrmSelect,
                                                hrmFormFieldSelectControl: control,
                                                attr: {disabled: ['6', '7'].includes($parent.workloadType())}
                                            ">
                                                <option></option>
                                                <option value="1">Штуки</option>
                                                <option value="2">Рубли</option>
                                                <option value="3">Норма времени</option>
                                            </select>
                                        </div>
                                    </div>
                                <!-- /ko -->
                            <!-- /ko -->
                        </div>
                    </div>
                </div>

                <div class="position-page__section-row position-page__workload-tab-pane-section-row">
                    <div class="position-page__section-row-content">
                        <div class="position-page__section-row-item
                                    position-page__workload-tab-pane-section-row-production-standard-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div class="position-page__production-standard-form-field" data-bind="
                                    hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                ">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Норматив выработки

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Норматив выработки'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldComplexControl: control">
                                        <div class="hrm-radio-group position-page__production-standard-form-field-type-control">
                                            <div class="hrm-radio-group__radio">
                                                <input class="hrm-radio-group__radio-input" data-bind="checked: productionStandard.type"
                                                       type="radio" value="0" id="position-page-production-standard-type-number-radio" checked/>
                                                <label class="hrm-radio-group__radio-label" for="position-page-production-standard-type-number-radio">
                                                    Число
                                                </label>
                                            </div>

                                            <div class="hrm-radio-group__radio">
                                                <input class="hrm-radio-group__radio-input" data-bind="checked: productionStandard.type"
                                                       type="radio" value="1" id="position-page-production-standard-type-range-radio"/>
                                                <label class="hrm-radio-group__radio-label" for="position-page-production-standard-type-range-radio">
                                                    Диапазон
                                                </label>
                                            </div>
                                        </div>

                                        <div class="position-page__production-standard-form-field-control-wrapper">
                                            <!-- ko template: {
                                                foreach: hrmTemplateIf(productionStandard.type() === '0', $data),
                                                afterAdd: hrmFadeAfterAddFactory(200, 200),
                                                beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                            } -->
                                                <!-- ko let: {control: ko.observable(null)} -->
                                                    <div class="position-page__production-standard-form-field-value-control"
                                                         data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                        <input data-bind="
                                                            textInput: productionStandard.value,
                                                            hrmFormFieldInputControl: control,
                                                            hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                                        " placeholder="0">
                                                    </div>
                                                <!-- /ko -->
                                            <!-- /ko -->

                                            <!-- ko template: {
                                                foreach: hrmTemplateIf(productionStandard.type() === '1', $data),
                                                afterAdd: hrmFadeAfterAddFactory(200, 200),
                                                beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                            } -->
                                                <div class="position-page__production-standard-form-field-range-control">
                                                    <!-- ko let: {control: ko.observable(null)} -->
                                                        <div class="position-page__production-standard-form-field-range-control-min-control"
                                                             data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <input data-bind="
                                                                textInput: productionStandard.range.min,
                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                hrmFormFieldInputControl: control,
                                                                hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                                            " placeholder="0">
                                                        </div>
                                                    <!-- /ko -->

                                                    <span class="position-page__production-standard-form-field-range-control-separator">—</span>

                                                    <!-- ko let: {control: ko.observable(null)} -->
                                                        <div class="position-page__production-standard-form-field-range-control-max-control"
                                                             data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <input data-bind="
                                                                textInput: productionStandard.range.max,
                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                hrmFormFieldInputControl: control,
                                                                hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                                            " placeholder="0">
                                                        </div>
                                                    <!-- /ko -->
                                                </div>
                                            <!-- /ko -->

                                            <span class="position-page__production-standard-form-field-suffix"
                                                  data-bind="text: $tab.productionStandardFormFieldRangeControlSuffix">
                                            </span>
                                        </div>
                                    </div>

                                    <div data-bind="
                                        component: {name: 'hrm-form-field-error'},
                                        hrmSlide,
                                        hrmSlideValue: control() !== null ? control().errorState : false,
                                        hrmSlideDuration: 150
                                    ">
                                        <!-- ko text: $parent.workloadType.error() --><!-- /ko -->
                                    </div>
                                </div>
                            <!-- /ko -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="position-page__section position-page__workload-tab-pane-additional-workload-section"
                 data-bind="css:{'position-page__section--disabled': $tab.additionalWorkloadSectionDisabled}">
                <span class="position-page__section-title">
                    Дополнительная нагрузка
                    <span class="position-page__section-title-postscript">необязательно</span>
                </span>

                <!-- ko foreach: {
                    data: additionalWorkload,
                    afterAdd: hrmFadeAfterAddFactory(100),
                    beforeRemove: hrmFadeBeforeRemoveFactory(100)}
                -->
                    <div class="position-page__section-row position-page__workload-tab-pane-section-row
                                position-page__workload-tab-pane-additional-workload-section-row"
                         data-bind="css:{'position-page__workload-tab-pane-additional-workload-section-row--type_other': type() === '2'}">
                        <div class="position-page__section-row-content">
                            <div class="position-page__section-row-item
                                        position-page__workload-tab-pane-additional-workload-section-row-workload-type-item">
                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                    <div data-bind="
                                       hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                    ">
                                        <label data-bind="hrmFormFieldLabel: label">
                                            Тип нагрузки

                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                    data-bind="hrmTooltip, hrmTooltipText: 'Тип нагрузки'">
                                            </button>
                                        </label>

                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                            <select data-bind="
                                                value: type,
                                                hrmSelect, hrmSelectPlaceholder: 'Выберите тип', hrmSelectAllowClear: true,
                                                hrmFormFieldSelectControl: control,
                                                attr: {disabled: $tab.additionalWorkloadSectionDisabled}
                                            ">
                                                <option></option>
                                                <option value="0">Объём товара по всему предприятию</option>
                                                <option value="1">Объём товара по категориям</option>
                                                <option value="2">Другое</option>
                                            </select>
                                        </div>
                                    </div>
                                <!-- /ko -->
                            </div>

                            <!-- ko template: {
                                foreach: hrmTemplateIf(type() === '2' && !$tab.additionalWorkloadSectionDisabled(), $data),
                                afterAdd: hrmFadeAfterAddFactory(100, 100),
                                beforeRemove: hrmFadeBeforeRemoveFactory(100)
                            } -->
                                <div class="position-page__section-row-item
                                            position-page__workload-tab-pane-additional-workload-section-row-name-item">
                                    <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                        <div data-bind="
                                           hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                        ">
                                            <label data-bind="hrmFormFieldLabel: label">
                                                Название

                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                               hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                        data-bind="hrmTooltip, hrmTooltipText: 'Название'">
                                                </button>
                                            </label>

                                            <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                <input data-bind="
                                                    textInput: name,
                                                    hrmFormFieldInputControl: control,
                                                    hrmFormFieldInputControlErrorStateMatcher: $tab.additionalWorkloadSectionFormControlErrorStateMatcher.bind($tab),
                                                    attr: {disabled: $tab.additionalWorkloadSectionDisabled}
                                                " placeholder="Введите название">
                                            </div>

                                            <div data-bind="
                                                component: {name: 'hrm-form-field-error'},
                                                hrmSlide,
                                                hrmSlideValue: control() !== null ? control().errorState : false,
                                                hrmSlideDuration: 150
                                            ">
                                                <!-- ko text: $parent.name.error() --><!-- /ko -->
                                            </div>
                                        </div>
                                    <!-- /ko -->
                                </div>
                            <!-- /ko -->

                            <!-- ko template: {
                                foreach: hrmTemplateIf(type() !== '' && !$tab.additionalWorkloadSectionDisabled(), $data),
                                afterAdd: hrmFadeAfterAddFactory(100, 100),
                                beforeRemove: hrmFadeBeforeRemoveFactory(100)
                            } -->
                                <div class="position-page__section-row-item
                                            position-page__workload-tab-pane-additional-workload-section-row-factor-item">
                                    <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                        <div data-bind="
                                           hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                        ">
                                            <label data-bind="hrmFormFieldLabel: label">
                                                Коэффициент

                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                               hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                        data-bind="hrmTooltip, hrmTooltipText: 'Коэффициент'">
                                                </button>
                                            </label>

                                            <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                <input data-bind="
                                                    textInput: factor,
                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                    hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                    hrmFormFieldInputControl: control,
                                                    hrmFormFieldInputControlErrorStateMatcher: $tab.additionalWorkloadSectionFormControlErrorStateMatcher.bind($tab),
                                                    attr: {disabled: $tab.additionalWorkloadSectionDisabled}
                                                " placeholder="0">
                                            </div>

                                            <div data-bind="
                                                component: {name: 'hrm-form-field-error'},
                                                hrmSlide,
                                                hrmSlideValue: control() !== null ? control().errorState : false,
                                                hrmSlideDuration: 150
                                            ">
                                                <!-- ko text: $parent.factor.error() --><!-- /ko -->
                                            </div>
                                        </div>
                                    <!-- /ko -->
                                </div>
                            <!-- /ko -->

                            <!-- ko template: {
                                foreach: hrmTemplateIf(!['', '2'].includes(type()) && !$tab.additionalWorkloadSectionDisabled(), $data),
                                afterAdd: hrmFadeAfterAddFactory(100, 100),
                                beforeRemove: hrmFadeBeforeRemoveFactory(100)
                            } -->
                                <div class="position-page__section-row-item
                                            position-page__workload-tab-pane-additional-workload-section-row-units-item">
                                    <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                        <div class="position-page__workload-tab-pane-additional-units-form-field" data-bind="
                                           hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                        ">
                                            <label data-bind="hrmFormFieldLabel: label">
                                                Единицы
                                            </label>

                                            <div data-bind="
                                                hrmFormFieldComplexControl: control,
                                                hrmFormFieldComplexControlDisabled: $tab.additionalWorkloadSectionDisabled,
                                                text: $root.getUnitsName($parents[1].units())
                                            ">
                                                Норма времени
                                            </div>
                                        </div>
                                    <!-- /ko -->
                                </div>
                            <!-- /ko -->

                            <!-- ko template: {
                                foreach: hrmTemplateIf($parent.additionalWorkload()[0].type() !== '' && !$tab.additionalWorkloadSectionDisabled(), $data),
                                afterAdd: hrmFadeAfterAddFactory(100, 100),
                                beforeRemove: hrmFadeBeforeRemoveFactory(100)
                            } -->
                                <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                    <button class="hrm-button hrm-button-with-icon hrm-button-with-trash-icon
                                                   hrm-button-with-icon--theme_negative position-page__workload-tab-pane-additional-workload-section-row-remove-button"
                                            data-bind="click: function () {$tab.removeAdditionalWorkloadItem($data);}">
                                        Удалить
                                    </button>
                                <!-- /ko -->

                                <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                                    <button class="hrm-button hrm-icon-button hrm-trash-icon-button
                                                   hrm-icon-button--theme_negative position-page__workload-tab-pane-additional-workload-section-row-remove-button"
                                            title="Удалить"
                                            data-bind="click: function () {$tab.removeAdditionalWorkloadItem($data);}">
                                    </button>
                                <!-- /ko -->
                            <!-- /ko -->
                        </div>
                    </div>
                <!-- /ko -->

                <!-- ko if: additionalWorkload()[additionalWorkload().length - 1].type() !== '' && !$tab.additionalWorkloadSectionDisabled() -->
                    <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_neutral
                                   hrm-button-with-plus-icon"
                            data-bind="click: function () {$tab.addAdditionalWorkloadItem();}">
                        Добавить нагрузку
                    </button>
                <!-- /ko -->
            </div>

            <div class="position-page__tab-pane-action-list">
                <button class="hrm-button hrm-basic-button
                               position-page__tab-pane-action-list-item position-page__cancel-button"
                        data-bind="click: function() {$tab.cancel();}">
                    Отменить
                </button>

                <button class="hrm-button hrm-basic-button hrm-accent-button
                               position-page__tab-pane-action-list-item position-page__save-button"
                        data-bind="
                            click: function() {$tab.submit()},
                            attr: {disabled: $tab.isSubmitted() && !$tab.isValid()}
                        ">
                    Сохранить
                </button>
            </div>
        <!-- /ko -->
    </div>
<!-- /ko -->

                <!-- /ko -->

                <!-- ko template: {
                    foreach: hrmTemplateIf($root.activeTab() === 1, $data),
                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                } -->
                    <!-- ko let: {'$tab': $root.salaryTabViewModel} -->
    <div class="position-page__tab-pane position-page__salary-tab-pane"
         data-bind="using: $tab.formModel.value">
        <div class="position-page__section">
            <div class="position-page__section-row position-page__salary-tab-pane-section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item
                                position-page__salary-tab-pane-section-row-bulk-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__salary-tab-pane-bulk-form-field"
                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    <span>Фикс. дневной оклад, <i class="far fa-ruble-sign"></i></span>

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Фикс. дневной оклад, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: bulk,
                                        hrmMask, hrmMaskPattern: 'decimal',
                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                    " placeholder="0">
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.bulk.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
        </div>

        <div class="position-page__section">
            <span class="position-page__section-title">
                Премирование
                <span class="position-page__section-title-postscript">необязательно</span>
            </span>

            <div class="position-page__section-row position-page__salary-tab-pane-section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item
                                position-page__salary-tab-pane-section-row-bonus-rate-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__salary-tab-pane-bonus-rate-form-field"
                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    <span>Ставка премии, <i class="far fa-ruble-sign"></i></span>

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Ставка премии, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: bonus.rate,
                                        hrmMask, hrmMaskPattern: 'decimal',
                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                    " placeholder="0">
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.bonus.rate.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->
                    </div>

                    <div class="position-page__section-row-item
                                position-page__salary-tab-pane-section-row-bonus-sum-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__salary-tab-pane-bonus-sum-form-field"  data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    <span>Сумма переработки, <i class="far fa-ruble-sign"></i></span>

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Сумма переработки'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: bonus.sum,
                                        hrmMask, hrmMaskPattern: 'decimal',
                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                    " placeholder="0">
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.bonus.sum.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->

                        <span class="position-page__salary-tab-pane-section-row-bonus-sum-item-suffix">рублей</span>
                    </div>
                </div>
            </div>

            <div class="position-page__section-row position-page__salary-tab-pane-section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item
                                position-page__salary-tab-pane-section-row-bonus-max-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__salary-tab-pane-bonus-max-form-field"
                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    <span>Максимальная премия, <i class="far fa-ruble-sign"></i></span>

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Максимальная премия, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: bonus.max,
                                        hrmMask, hrmMaskPattern: 'decimal',
                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                    " placeholder="0">
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.bonus.max.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
        </div>

        <div class="position-page__section">
            <span class="position-page__section-title">
                Депремирование
                <span class="position-page__section-title-postscript">необязательно</span>
            </span>

            <div class="position-page__section-row position-page__salary-tab-pane-section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item
                                position-page__salary-tab-pane-section-row-fine-rate-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__salary-tab-pane-fine-rate-form-field"
                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    <span>Ставка штрафа, <i class="far fa-ruble-sign"></i></span>

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Ставка штрафа, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: fine.rate,
                                        hrmMask, hrmMaskPattern: 'decimal',
                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                    " placeholder="0">
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.fine.rate.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->
                    </div>

                    <div class="position-page__section-row-item
                                position-page__salary-tab-pane-section-row-fine-sum-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__salary-tab-pane-fine-sum-form-field"  data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    <span>Сумма недоработки, <i class="far fa-ruble-sign"></i></span>

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Сумма недоработки'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: fine.sum,
                                        hrmMask, hrmMaskPattern: 'decimal',
                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                    " placeholder="0">
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.fine.sum.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->

                        <span class="position-page__salary-tab-pane-section-row-fine-sum-item-suffix">рублей</span>
                    </div>
                </div>
            </div>

            <div class="position-page__section-row position-page__salary-tab-pane-section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item
                                position-page__salary-tab-pane-section-row-fine-max-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__salary-tab-pane-fine-max-form-field"
                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    <span>Максимальный штраф, <i class="far fa-ruble-sign"></i></span>

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Максимальный штраф, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: fine.max,
                                        hrmMask, hrmMaskPattern: 'decimal',
                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                    " placeholder="0">
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.fine.max.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
        </div>

        <div class="position-page__section">
            <span class="position-page__section-title">
                Премиальный счёт
                <span class="position-page__section-title-postscript">необязательно</span>
            </span>

            <div class="position-page__section-row position-page__salary-tab-pane-section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item
                                position-page__salary-tab-pane-section-row-premium-account-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="hrm-form-field-switch-group position-page__salary-tab-pane-section-row-premium-account-item-switch-group"
                                 data-bind="hrmSwitchGroup, hrmSwitchGroupControlRef: control, hrmSwitchGroupLabelRef: label">
                                <div data-bind="component: {name: 'hrm-switch', params: {checked: premiumAccount, exportAs: control}}"></div>
                                <label data-bind="hrmSwitchGroupLabel: label">
                                    Начислять премирование/депремирование на премиальный счет

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-switch-group__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Начислять премирование/депремирование на премиальный счет'">
                                    </button>
                                </label>
                            </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
        </div>

        <div class="position-page__tab-pane-action-list">
            <button class="hrm-button hrm-basic-button
                           position-page__tab-pane-action-list-item position-page__cancel-button"
                    data-bind="click: function() {$tab.cancel();}">
                Отменить
            </button>

            <button class="hrm-button hrm-basic-button hrm-accent-button
                           position-page__tab-pane-action-list-item position-page__save-button"
                    data-bind="
                        click: function() {$tab.submit();},
                        attr: {disabled: $tab.isSubmitted() && !$tab.isValid()}
                    ">
                Сохранить
            </button>
        </div>
    </div>
<!-- /ko -->

                <!-- /ko -->

                <!-- ko template: {
                    foreach: hrmTemplateIf($root.activeTab() === 2, $data),
                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                } -->
                    <!-- ko let: {'$tab': $root.ranksTabViewModel} -->
    <div class="position-page__tab-pane position-page__ranks-tab-pane"
         data-bind="using: $tab.formModel.value">
        <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_neutral
                       hrm-button-with-plus-icon position-page__ranks-tab-pane-add-button position-page__ranks-tab-pane-first-add-button"
                data-bind="click: function() {$tab.create();}">
            Добавить разряд
        </button>

        <!-- ko template: {
            foreach: hrmTemplateIf(ranks().length > 0, $data),
            afterAdd: hrmFadeAfterAddFactory(200),
            beforeRemove: hrmFadeBeforeRemoveFactory(200)
        } -->
            <!-- ko if: !$tab.isResetting() -->
                <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                    <div class="row">
                        <div class="col-12 col-xl-9">
                            <table class="position-page__ranks-tab-pane-table" data-bind="hrmTable">
                                <thead>
                                    <tr>
                                        <th class="position-page__ranks-tab-pane-table-number-head-cell">
                                            № разряда
                                        </th>
                                        <th>Фикс. дневной оклад сотрудника, <i class="far fa-ruble-sign"></i></th>
                                        <th>Коэффициент норматива выработки</th>
                                        <th>Коэффициент для расчета премии</th>
                                        <th>Коэффициент для расчета штрафа</th>
                                        <th class="position-page__ranks-tab-pane-table-actions-head-cell"></th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <!-- ko foreach: {
                                        data: ranks,
                                        afterAdd: hrmFadeAfterAddFactory(200),
                                        beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                    } -->
                                        <tr>
                                            <td class="position-page__ranks-tab-pane-table-number-cell"
                                                data-bind="text: number">
                                            </td>
                                            <td class="position-page__ranks-tab-pane-table-salary-bulk-cell"
                                                data-bind="text: $root.formatDecimal(salaryBulk())">
                                            </td>
                                            <td class="position-page__ranks-tab-pane-table-production-standard-cell"
                                                data-bind="text: $root.formatDecimal(productionStandardFactor())">
                                            </td>
                                            <td class="position-page__ranks-tab-pane-table-bonus-factory-cell"
                                                data-bind="text: $root.formatDecimal(bonusFactor())">
                                            </td>
                                            <td class="position-page__ranks-tab-pane-table-fine-factory-cell"
                                                data-bind="text: $root.formatDecimal(fineFactor())">
                                            </td>
                                            <td class="position-page__ranks-tab-pane-table-actions-cell">
                                                <button class="hrm-button hrm-icon-button hrm-pencil-icon-button
                                                               hrm-icon-button--theme_secondary"
                                                        title="Редактировать"
                                                        data-bind="click: function () {$tab.edit($data);}">
                                                </button><!--
                                                --><button class="hrm-button hrm-icon-button hrm-trash-icon-button
                                                               hrm-icon-button--theme_negative position-page__ranks-tab-pane-table-delete-button"
                                                        title="Удалить"
                                                        data-bind="click: function () {$tab.delete($data);}">
                                                </button>
                                            </td>
                                        </tr>
                                    <!-- /ko -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                <!-- /ko -->

                <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                    <div class="hrm-table__fixed-section-container
                                position-page__ranks-tab-pane-table-fixed-section-container">
                        <table class="hrm-table__fixed-section hrm-table__fixed-section--position_left
                                      position-page__ranks-tab-pane-table
                                      position-page__ranks-tab-pane-table-fixed-section"
                               data-bind="hrmTable">
                            <tbody>
                                <tr>
                                    <th class="position-page__ranks-tab-pane-table-number-head-cell">
                                        № разряда
                                    </th>
                                </tr>

                                <tr>
                                    <th>Фикс. дневной оклад сотрудника, <i class="far fa-ruble-sign"></i></th>
                                </tr>

                                <tr>
                                    <th>Коэффициент норматива выработки</th>
                                </tr>

                                <tr>
                                    <th>Коэффициент для расчета премии</th>
                                </tr>

                                <tr>
                                    <th>Коэффициент для расчета штрафа</th>
                                </tr>

                                <tr>
                                    <th class="position-page__ranks-tab-pane-table-actions-head-cell"></th>
                                </tr>
                            </tbody>
                        </table>

                        <div data-bind="component: {
                            name: 'hrm-scrollable-wrapper',
                            params: {
                                options: {left: {disabled: true}}
                            }
                        }">
                            <table class="position-page__ranks-tab-pane-table" data-bind="hrmTable">
                                <tbody>
                                    <tr>
                                        <th class="position-page__ranks-tab-pane-table-number-head-cell">
                                            № разряда
                                        </th>

                                        <!-- ko foreach: {
                                            data: ranks,
                                            afterAdd: hrmFadeAfterAddFactory(200),
                                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                        } -->
                                            <td class="position-page__ranks-tab-pane-table-number-cell"
                                                data-bind="text: number">
                                            </td>
                                        <!-- /ko -->
                                    </tr>

                                    <tr>
                                        <th>Фикс. дневной оклад сотрудника, <i class="far fa-ruble-sign"></i></th>

                                        <!-- ko foreach: {
                                            data: ranks,
                                            afterAdd: hrmFadeAfterAddFactory(200),
                                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                        } -->
                                            <td class="position-page__ranks-tab-pane-table-salary-bulk-cell"
                                                data-bind="text: $root.formatDecimal(salaryBulk())">
                                            </td>
                                        <!-- /ko -->
                                    </tr>

                                    <tr>
                                        <th>Коэффициент норматива выработки</th>

                                        <!-- ko foreach: {
                                            data: ranks,
                                            afterAdd: hrmFadeAfterAddFactory(200),
                                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                        } -->
                                            <td class="position-page__ranks-tab-pane-table-production-standard-cell"
                                                data-bind="text: $root.formatDecimal(productionStandardFactor())">
                                            </td>
                                        <!-- /ko -->
                                    </tr>

                                    <tr>
                                        <th>Коэффициент для расчета премии</th>

                                        <!-- ko foreach: {
                                            data: ranks,
                                            afterAdd: hrmFadeAfterAddFactory(200),
                                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                        } -->
                                            <td class="position-page__ranks-tab-pane-table-bonus-factory-cell"
                                                data-bind="text: $root.formatDecimal(bonusFactor())">
                                            </td>
                                        <!-- /ko -->
                                    </tr>

                                    <tr>
                                        <th>Коэффициент для расчета штрафа</th>

                                        <!-- ko foreach: {
                                            data: ranks,
                                            afterAdd: hrmFadeAfterAddFactory(200),
                                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                        } -->
                                            <td class="position-page__ranks-tab-pane-table-fine-factory-cell"
                                                data-bind="text: $root.formatDecimal(fineFactor())">
                                            </td>
                                        <!-- /ko -->
                                    </tr>

                                    <tr>
                                        <th class="position-page__ranks-tab-pane-table-actions-head-cell"></th>

                                        <!-- ko foreach: {
                                            data: ranks,
                                            afterAdd: hrmFadeAfterAddFactory(200),
                                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                        } -->
                                            <td class="position-page__ranks-tab-pane-table-actions-cell">
                                                <button class="hrm-button hrm-icon-button hrm-pencil-icon-button
                                                                   hrm-icon-button--theme_secondary"
                                                        title="Редактировать"
                                                        data-bind="click: function () {$tab.edit($data);}">
                                                </button>

                                                <button class="hrm-button hrm-icon-button hrm-trash-icon-button
                                                                   hrm-icon-button--theme_negative position-page__ranks-tab-pane-table-delete-button"
                                                        title="Удалить"
                                                        data-bind="click: function () {$tab.delete($data);}">
                                                </button>
                                            </td>
                                        <!-- /ko -->
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                <!-- /ko -->
            <!-- /ko -->
        <!-- /ko -->

        <!-- ko template: {
            foreach: hrmTemplateIf(ranks().length > 0, $data),
            afterAdd: hrmFadeAfterAddFactory(200),
            beforeRemove: hrmFadeBeforeRemoveFactory(200)
        } -->
            <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_neutral
                           hrm-button-with-plus-icon position-page__ranks-tab-pane-add-button position-page__ranks-tab-pane-second-add-button"
                    data-bind="click: function() {$tab.create();}">
                Добавить разряд
            </button>
        <!-- /ko -->

        <div class="position-page__tab-pane-action-list">
            <button class="hrm-button hrm-basic-button
                           position-page__tab-pane-action-list-item position-page__cancel-button"
                    data-bind="
                        click: function() {$tab.cancel();},
                        attr: {disabled: $root.formModel.value().ranks().length === 0 && $tab.lastFormModelValue.ranks.length === 0}
                    ">
                Отменить
            </button>

            <button class="hrm-button hrm-basic-button hrm-accent-button
                           position-page__tab-pane-action-list-item position-page__save-button"
                    data-bind="
                        click: function() {$tab.submit();},
                        attr: {disabled: !$tab.isValid()}
                    ">
                Сохранить
            </button>
        </div>
    </div>
<!-- /ko -->

                <!-- /ko -->

                <!-- ko template: {
                    foreach: hrmTemplateIf($root.activeTab() === 3, $data),
                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                } -->
                    <!-- ko let: {'$tab': $root.specialitiesTabViewModel} -->
    <div class="position-page__tab-pane position-page__specialities-tab-pane"
         data-bind="using: $tab.formModel.value">
        <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_neutral
                       hrm-button-with-plus-icon position-page__specialities-tab-pane-add-button position-page__specialities-tab-pane-first-add-button"
                data-bind="click: function() {$tab.create();}">
            Добавить специальность
        </button>

        <!-- ko template: {
            foreach: hrmTemplateIf(specialities().length > 0, $data),
            afterAdd: hrmFadeAfterAddFactory(200),
            beforeRemove: hrmFadeBeforeRemoveFactory(200)
        } -->
            <!-- ko if: !$tab.isResetting() -->
                <div class="row">
                    <div class="col-12 col-md-8 col-xl-4">
                        <table class="position-page__specialities-tab-pane-table" data-bind="hrmTable">
                            <thead>
                                <tr>
                                    <th>Название</th>
                                    <th class="position-page__specialities-tab-pane-table-actions-head-cell"></th>
                                </tr>
                            </thead>

                            <tbody>
                                <!-- ko foreach: {
                                    data: specialities,
                                    afterAdd: hrmFadeAfterAddFactory(200),
                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                } -->
                                    <tr>
                                        <td data-bind="text: name"></td>
                                        <td class="position-page__specialities-tab-pane-table-actions-cell">
                                            <button class="hrm-button hrm-icon-button hrm-pencil-icon-button
                                                           hrm-icon-button--theme_secondary"
                                                    title="Редактировать"
                                                    data-bind="click: function () {$tab.edit($data);}">
                                            </button><!--
                                            --><button class="hrm-button hrm-icon-button hrm-trash-icon-button
                                                           hrm-icon-button--theme_negative position-page__specialities-tab-pane-table-delete-button"
                                                    title="Удалить"
                                                    data-bind="click: function () {$tab.delete($data);}">
                                            </button>
                                        </td>
                                    </tr>
                                <!-- /ko -->
                            </tbody>
                        </table>
                    </div>
                </div>
            <!-- /ko -->
        <!-- /ko -->

        <!-- ko template: {
            foreach: hrmTemplateIf(specialities().length > 0, $data),
            afterAdd: hrmFadeAfterAddFactory(200),
            beforeRemove: hrmFadeBeforeRemoveFactory(200)
        } -->
            <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_neutral
                           hrm-button-with-plus-icon position-page__specialities-tab-pane-add-button position-page__specialities-tab-pane-second-add-button"
                    data-bind="click: function() {$tab.create();}">
                Добавить специальность
            </button>
        <!-- /ko -->

        <div class="position-page__tab-pane-action-list">
            <button class="hrm-button hrm-basic-button
                           position-page__tab-pane-action-list-item position-page__cancel-button"
                    data-bind="
                        click: function() {$tab.cancel();},
                        attr: {disabled: $root.formModel.value().specialities().length === 0 && $tab.lastFormModelValue.specialities.length === 0}
                    ">
                Отменить
            </button>

            <button class="hrm-button hrm-basic-button hrm-accent-button
                           position-page__tab-pane-action-list-item position-page__save-button"
                    data-bind="
                        click: function() {$tab.submit();},
                        attr: {disabled: !$tab.isValid()}
                    ">
                Сохранить
            </button>
        </div>
    </div>
<!-- /ko -->

                <!-- /ko -->

                <!-- ko template: {
                    foreach: hrmTemplateIf($root.activeTab() === 4, $data),
                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                } -->
                    <!-- ko let: {'$tab': $root.shiftsTabViewModel} -->
    <div class="position-page__tab-pane position-page__shifts-tab-pane"
         data-bind="using: $tab.formModel.value">
        <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_neutral
                       hrm-button-with-plus-icon position-page__shifts-tab-pane-add-button position-page__shifts-tab-pane-first-add-button"
                data-bind="click: function() {$tab.create();}">
            Добавить смену
        </button>

        <!-- ko template: {
            foreach: hrmTemplateIf(shifts().length > 0, $data),
            afterAdd: hrmFadeAfterAddFactory(200),
            beforeRemove: hrmFadeBeforeRemoveFactory(200)
        } -->
            <!-- ko if: !$tab.isResetting() -->
                <div class="position-page__shifts-tab-pane-list">
                    <!-- ko foreach: {
                        data: shifts,
                        afterAdd: hrmFadeAfterAddFactory(200),
                        beforeRemove: hrmFadeBeforeRemoveFactory(200)
                    } -->
                        <!-- ko let: {isOpen: ko.observable(true)} -->
                            <div class="position-page__shifts-tab-pane-list-item">
                                <div class="position-page__shifts-tab-pane-list-item-header">
                                    <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                        <button class="hrm-button hrm-circle-icon-button
                                                       hrm-circle-icon-button--theme_neutral
                                                       hrm-circle-arrow-down-icon-button
                                                       position-page__shifts-tab-pane-list-item-toggle-button"
                                                data-bind="click: function() {isOpen(!isOpen());}">
                                        </button>
                                    <!-- /ko -->

                                    <span class="position-page__shifts-tab-pane-list-item-title"
                                          data-bind="text: 'Смена ' + ($index() + 1), click: function() {isOpen(!isOpen());}">
                                    </span>

                                    <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                                        <button class="hrm-button hrm-icon-button hrm-trash-icon-button
                                                       hrm-icon-button--theme_negative position-page__shifts-tab-pane-list-item-delete-button"
                                                title="Удалить"
                                                data-bind="click: function () {$tab.delete($rawData);}">
                                        </button>
                                    <!-- /ko -->

                                    <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                        <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_negative
                                                       hrm-button-with-trash-icon position-page__shifts-tab-pane-list-item-delete-button"
                                                data-bind="click: function () {$tab.delete($rawData);}">
                                            Удалить
                                        </button>
                                    <!-- /ko -->
                                </div>

                                <div class="position-page__shifts-tab-pane-list-item-body"
                                     data-bind="hrmSlide, hrmSlideValue: isOpen() || $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth">
                                    <div class="position-page__section-row">
                                        <div class="position-page__section-row-content">
                                            <div class="position-page__section-row-item">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="position-page__shifts-tab-pane-list-item-interval-form-field" data-bind="
                                                        hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">Часовой интервал</label>

                                                        <div data-bind="hrmFormFieldComplexControl: control">
                                                            <div class="position-page__shifts-tab-pane-list-item-interval-form-field-control">
                                                                <!-- ko let: {control: ko.observable(null)} -->
                                                                    <div class="position-page__shifts-tab-pane-list-item-interval-form-field-control-start-control"
                                                                         data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                        <input data-bind="
                                                                            textInput: interval.start,
                                                                            hrmTimeAutocompleter,
                                                                            hrmMask,
                                                                            hrmMaskPattern: 'datetime',
                                                                            hrmMaskOptions: {
                                                                                inputFormat: 'HH:MM',
                                                                                placeholder: ' '
                                                                            },
                                                                            hrmFormFieldInputControl: control,
                                                                            hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                                                        " placeholder="00:00">
                                                                    </div>
                                                                <!-- /ko -->

                                                                <span class="position-page__shifts-tab-pane-list-item-interval-form-field-control-separator">—</span>

                                                                <!-- ko let: {control: ko.observable(null)} -->
                                                                    <div class="position-page__shifts-tab-pane-list-item-interval-form-field-control-end-control"
                                                                         data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                        <input data-bind="
                                                                            textInput: interval.end,
                                                                            hrmTimeAutocompleter,
                                                                            hrmMask,
                                                                            hrmMaskPattern: 'datetime',
                                                                            hrmMaskOptions: {
                                                                                inputFormat: 'HH:MM',
                                                                                placeholder: ' '
                                                                            },
                                                                            hrmFormFieldInputControl: control,
                                                                            hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                                                        " placeholder="00:00">
                                                                    </div>
                                                                <!-- /ko -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                <!-- /ko -->
                                            </div>

                                            <div class="position-page__section-row-item">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="position-page__shifts-tab-pane-list-item-salary-factor-form-field" data-bind="
                                                       hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">
                                                            Коэффициент для оклада

                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Коэффициент для оклада'">
                                                            </button>
                                                        </label>

                                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <input data-bind="
                                                                textInput: salaryFactor,
                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                hrmFormFieldInputControl: control,
                                                                hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                                            " placeholder="0">
                                                        </div>

                                                        <div data-bind="
                                                            component: {name: 'hrm-form-field-error'},
                                                            hrmSlide,
                                                            hrmSlideValue: control() !== null ? control().errorState : false,
                                                            hrmSlideDuration: 150
                                                        ">
                                                            <!-- ko text: $parent.salaryFactor.error() --><!-- /ko -->
                                                        </div>
                                                    </div>
                                                <!-- /ko -->
                                            </div>

                                            <div class="position-page__section-row-item">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="position-page__production-standard-form-field" data-bind="
                                                        hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">
                                                            Норматив выработки

                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Норматив выработки'">
                                                            </button>
                                                        </label>

                                                        <div data-bind="hrmFormFieldComplexControl: control">
                                                            <div class="hrm-radio-group position-page__production-standard-form-field-type-control">
                                                                <!-- ko let: {prefix: 'position-page-shifts-tab-pane-production-standard-type-' + $index() + '-'} -->
                                                                    <div class="hrm-radio-group__radio">
                                                                        <input class="hrm-radio-group__radio-input" data-bind="checked: productionStandard.type, attr: {id: prefix + 'number-radio'}"
                                                                               type="radio" value="0" checked/>
                                                                        <label class="hrm-radio-group__radio-label" data-bind="attr: {for: prefix + 'number-radio'}">
                                                                            Число
                                                                        </label>
                                                                    </div>

                                                                    <div class="hrm-radio-group__radio">
                                                                        <input class="hrm-radio-group__radio-input" data-bind="checked: productionStandard.type, attr: {id: prefix + 'range-radio'}"
                                                                               type="radio" value="1"/>
                                                                        <label class="hrm-radio-group__radio-label" data-bind="attr: {for: prefix + 'range-radio'}">
                                                                            Диапазон
                                                                        </label>
                                                                    </div>
                                                                <!-- /ko -->
                                                            </div>

                                                            <div class="position-page__production-standard-form-field-control-wrapper">
                                                                <!-- ko template: {
                                                                    foreach: hrmTemplateIf(productionStandard.type() === '0', $data),
                                                                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                } -->
                                                                    <!-- ko let: {control: ko.observable(null)} -->
                                                                        <div class="position-page__production-standard-form-field-value-control"
                                                                             data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                            <input data-bind="
                                                                                textInput: productionStandard.value,
                                                                                hrmFormFieldInputControl: control,
                                                                                hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                                                            " placeholder="0">
                                                                        </div>
                                                                    <!-- /ko -->
                                                                <!-- /ko -->

                                                                <!-- ko template: {
                                                                    foreach: hrmTemplateIf(productionStandard.type() === '1', $data),
                                                                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                } -->
                                                                    <div class="position-page__production-standard-form-field-range-control">
                                                                        <!-- ko let: {control: ko.observable(null)} -->
                                                                            <div class="position-page__production-standard-form-field-range-control-min-control"
                                                                                 data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                                <input data-bind="
                                                                                    textInput: productionStandard.range.min,
                                                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                                                    hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                                    hrmFormFieldInputControl: control,
                                                                                    hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                                                                " placeholder="0">
                                                                            </div>
                                                                        <!-- /ko -->

                                                                        <span class="position-page__production-standard-form-field-range-control-separator">—</span>

                                                                        <!-- ko let: {control: ko.observable(null)} -->
                                                                            <div class="position-page__production-standard-form-field-range-control-max-control"
                                                                                 data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                                <input data-bind="
                                                                                    textInput: productionStandard.range.max,
                                                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                                                    hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                                    hrmFormFieldInputControl: control,
                                                                                    hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                                                                " placeholder="0">
                                                                            </div>
                                                                        <!-- /ko -->
                                                                    </div>
                                                                <!-- /ko -->

                                                                <span class="position-page__production-standard-form-field-suffix">
                                                                    рублей
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                <!-- /ko -->
                                            </div>
                                        </div>
                                    </div>

                                    <div class="position-page__section-row">
                                        <div class="position-page__section-row-content">
                                            <div class="position-page__section-row-item">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="position-page__shifts-tab-pane-list-item-bonus-factor-form-field" data-bind="
                                                       hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">
                                                            <span>Ставка премии, <i class="far fa-ruble-sign"></i></span>

                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Ставка премии, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                            </button>
                                                        </label>

                                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <input data-bind="
                                                                textInput: bonus.factor,
                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                hrmFormFieldInputControl: control
                                                            " placeholder="0">
                                                        </div>
                                                    </div>
                                                <!-- /ko -->
                                            </div>

                                            <div class="position-page__section-row-item position-page__shifts-tab-pane-list-item-bonus-sum-section-row-item">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="position-page__shifts-tab-pane-list-item-bonus-sum-form-field" data-bind="
                                                       hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">
                                                            <span>Сумма переработки, <i class="far fa-ruble-sign"></i></span>

                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Сумма переработки, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                            </button>
                                                        </label>

                                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <input data-bind="
                                                                textInput: bonus.sum,
                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                hrmFormFieldInputControl: control
                                                            " placeholder="0">
                                                        </div>
                                                    </div>
                                                <!-- /ko -->

                                                <span class="position-page__shifts-tab-pane-list-item-bonus-sum-section-row-item-suffix">
                                                    рублей
                                                </span>
                                            </div>

                                            <div class="position-page__section-row-item position-page__shifts-tab-pane-list-item-bonus-max-section-row-item">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="position-page__shifts-tab-pane-list-item-bonus-max-form-field" data-bind="
                                                       hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">
                                                            <span>Максимальная премия, <i class="far fa-ruble-sign"></i></span>

                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Максимальная премия, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                            </button>
                                                        </label>

                                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <input data-bind="
                                                                textInput: bonus.max,
                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                hrmFormFieldInputControl: control
                                                            " placeholder="0">
                                                        </div>
                                                    </div>
                                                <!-- /ko -->
                                            </div>
                                        </div>
                                    </div>

                                    <div class="position-page__section-row">
                                        <div class="position-page__section-row-content">
                                            <div class="position-page__section-row-item">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="position-page__shifts-tab-pane-list-item-fine-factor-form-field" data-bind="
                                                       hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">
                                                            <span>Ставка штрафа, <i class="far fa-ruble-sign"></i></span>

                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Ставка штрафа, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                            </button>
                                                        </label>

                                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <input data-bind="
                                                                textInput: fine.factor,
                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                hrmFormFieldInputControl: control
                                                            " placeholder="0">
                                                        </div>
                                                    </div>
                                                <!-- /ko -->
                                            </div>

                                            <div class="position-page__section-row-item position-page__shifts-tab-pane-list-item-fine-sum-section-row-item">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="position-page__shifts-tab-pane-list-item-fine-sum-form-field" data-bind="
                                                       hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">
                                                            <span>Сумма недоработки, <i class="far fa-ruble-sign"></i></span>

                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Сумма недоработки, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                            </button>
                                                        </label>

                                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <input data-bind="
                                                                textInput: fine.sum,
                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                hrmFormFieldInputControl: control
                                                            " placeholder="0">
                                                        </div>
                                                    </div>
                                                <!-- /ko -->

                                                <span class="position-page__shifts-tab-pane-list-item-fine-sum-section-row-item-suffix">
                                                    рублей
                                                </span>
                                            </div>

                                            <div class="position-page__section-row-item position-page__shifts-tab-pane-list-item-fine-max-section-row-item">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="position-page__shifts-tab-pane-list-item-fine-max-form-field" data-bind="
                                                       hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">
                                                            <span>Максимальный штраф, <i class="far fa-ruble-sign"></i></span>

                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Максимальный штраф, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                            </button>
                                                        </label>

                                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <input data-bind="
                                                                textInput: fine.max,
                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                hrmFormFieldInputControl: control
                                                            " placeholder="0">
                                                        </div>
                                                    </div>
                                                <!-- /ko -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- /ko -->
                    <!-- /ko -->
                </div>
            <!-- /ko -->
        <!-- /ko -->

        <!-- ko template: {
            foreach: hrmTemplateIf(shifts().length > 0, $data),
            afterAdd: hrmFadeAfterAddFactory(200),
            beforeRemove: hrmFadeBeforeRemoveFactory(200)
        } -->
            <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_neutral
                           hrm-button-with-plus-icon position-page__shifts-tab-pane-add-button position-page__shifts-tab-pane-second-add-button"
                    data-bind="click: function() {$tab.create();}">
                Добавить смену
            </button>
        <!-- /ko -->

        <div class="position-page__tab-pane-action-list">
            <button class="hrm-button hrm-basic-button
                           position-page__tab-pane-action-list-item position-page__cancel-button"
                    data-bind="
                        click: function() {$tab.cancel();},
                        attr: {disabled: $root.formModel.value().shifts().length === 0 && $tab.lastFormModelValue.shifts.length === 0}
                    ">
                Отменить
            </button>

            <button class="hrm-button hrm-basic-button hrm-accent-button
                           position-page__tab-pane-action-list-item position-page__save-button"
                    data-bind="
                        click: function() {$tab.submit();},
                        attr: {disabled: ($tab.isSubmitted() && !$tab.isValid()) || $root.formModel.value().shifts().length === 0}
                    ">
                Сохранить
            </button>
        </div>
    </div>
<!-- /ko -->

                <!-- /ko -->

                <!-- ko template: {
                    foreach: hrmTemplateIf($root.activeTab() === 5, $data),
                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                } -->
                    <!-- ko let: {'$tab': $root.depositTabViewModel} -->
    <div class="position-page__tab-pane position-page__deposit-tab-pane"
         data-bind="using: $tab.formModel.value">
        <div class="position-page__section">
            <div class="position-page__section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__deposit-tab-pane-sum-form-field"
                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    <span>Сумма депозита, <i class="far fa-ruble-sign"></i></span>

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Сумма депозита, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: deposit.sum,
                                        hrmMask, hrmMaskPattern: 'decimal',
                                        hrmMaskOptions: {digits: '0', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                    " placeholder="0">
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.deposit.sum.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->
                    </div>

                    <div class="position-page__section-row-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="hrm-form-field-switch-group position-page__deposit-tab-pane-manual-switch-group"
                                 data-bind="hrmSwitchGroup, hrmSwitchGroupControlRef: control, hrmSwitchGroupLabelRef: label">
                                <div data-bind="component: {name: 'hrm-switch', params: {checked: deposit.manual, exportAs: control}}"></div>
                                <label data-bind="hrmSwitchGroupLabel: label">
                                    Снимать в ручном режиме

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-switch-group__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Снимать в ручном режиме'">
                                    </button>
                                </label>
                            </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>

            <div data-bind="hrmFade, hrmFadeValue: !deposit.manual()">
                <div class="position-page__section-row">
                    <div class="position-page__section-row-content">
                        <div class="position-page__section-row-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div class="position-page__deposit-tab-pane-shift-sum-form-field" data-bind="
                                    hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                ">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Взимать за смену

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Взимать за смену'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldComplexControl: control">
                                        <div class="hrm-radio-group position-page__deposit-tab-pane-shift-sum-form-field-type-control">
                                            <!-- ko let: {prefix: 'position-page-deposit-tab-pane-shift-sum-'} -->
                                                <div class="hrm-radio-group__radio">
                                                    <input class="hrm-radio-group__radio-input" data-bind="checked: deposit.shiftSum.type, attr: {id: prefix + 'value-radio'}"
                                                           type="radio" value="0" checked/>
                                                    <label class="hrm-radio-group__radio-label" data-bind="attr: {for: prefix + 'value-radio'}">
                                                        <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                                                            Рубли
                                                        <!-- /ko -->

                                                        <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                                            <i class="fas fa-ruble-sign"></i>
                                                        <!-- /ko -->
                                                    </label>
                                                </div>

                                                <div class="hrm-radio-group__radio">
                                                    <input class="hrm-radio-group__radio-input" data-bind="checked: deposit.shiftSum.type, attr: {id: prefix + 'percentage-radio'}"
                                                           type="radio" value="1"/>
                                                    <label class="hrm-radio-group__radio-label" data-bind="attr: {for: prefix + 'percentage-radio'}">
                                                        <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                                                            Проценты
                                                        <!-- /ko -->

                                                        <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                                            %
                                                        <!-- /ko -->
                                                    </label>
                                                </div>
                                            <!-- /ko -->
                                        </div>

                                        <!-- ko let: {control: ko.observable(null)} -->
                                            <div class="position-page__deposit-tab-pane-shift-sum-form-field-value-control"
                                                 data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                <input data-bind="
                                                    textInput: deposit.shiftSum.value,
                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                    hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                    hrmFormFieldInputControl: control,
                                                    hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                                " placeholder="0">
                                            </div>
                                        <!-- /ko -->
                                    </div>
                                </div>
                            <!-- /ko -->
                        </div>
                    </div>
                </div>

                <div class="position-page__section-row">
                    <div class="position-page__section-row-content">
                        <div class="position-page__section-row-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div class="position-page__deposit-tab-pane-min-salary-form-field"
                                     data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        <span>При минимальной ЗП, <i class="far fa-ruble-sign"></i></span>

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'При минимальной ЗП, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <input data-bind="
                                            textInput: deposit.minSalary,
                                            hrmMask, hrmMaskPattern: 'decimal',
                                            hrmMaskOptions: {digits: '0', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                            hrmFormFieldInputControl: control
                                        " placeholder="0">
                                    </div>

                                    <div class="hrm-form-field__hint">необязательно</div>
                                </div>
                            <!-- /ko -->
                        </div>

                        <div class="position-page__section-row-item position-page__deposit-tab-pane-shift-count-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div class="position-page__deposit-tab-pane-shift-count-form-field"
                                     data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Количество смен

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Количество смен'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <input data-bind="
                                            textInput: deposit.shiftCount,
                                            hrmMask, hrmMaskPattern: 'decimal',
                                            hrmMaskOptions: {digits: '0', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                            hrmFormFieldInputControl: control
                                        " placeholder="0">
                                    </div>

                                    <div class="hrm-form-field__hint">необязательно</div>
                                </div>
                            <!-- /ko -->
                        </div>

                        <div class="position-page__section-row-item position-page__deposit-tab-pane-rank-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div class="position-page__deposit-tab-pane-rank-form-field"
                                     data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Разряд

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Разряд'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <select data-bind="
                                            value: deposit.rank,
                                            hrmSelect, hrmSelectAllowClear: true, hrmSelectPlaceholder: '', hrmSelectSearchEnabled: true,
                                            hrmFormFieldSelectControl: control
                                        ">
                                            <option></option>
                                            <option value="0">1</option>
                                            <option value="1">2</option>
                                            <option value="2">3</option>
                                            <option value="3">4</option>
                                            <option value="4">5</option>
                                        </select>
                                    </div>

                                    <div class="hrm-form-field__hint">необязательно</div>
                                </div>
                            <!-- /ko -->
                        </div>

                        <div class="position-page__section-row-item position-page__deposit-tab-pane-is-assigned-to-branch-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div class="hrm-form-field-switch-group position-page__deposit-tab-pane-is-assigned-to-branch-switch-group"
                                     data-bind="hrmSwitchGroup, hrmSwitchGroupControlRef: control, hrmSwitchGroupLabelRef: label">
                                    <div data-bind="component: {name: 'hrm-switch', params: {checked: deposit.isAssignedToBranch, exportAs: control}}"></div>
                                    <label data-bind="hrmSwitchGroupLabel: label">
                                        Закреплен за филиалом

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-switch-group__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Закреплен за филиалом'">
                                        </button>
                                    </label>
                                </div>
                            <!-- /ko -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="position-page__tab-pane-action-list">
            <button class="hrm-button hrm-basic-button
                           position-page__tab-pane-action-list-item position-page__cancel-button"
                    data-bind="
                        click: function() {$tab.cancel();}
                    ">
                Отменить
            </button>

            <button class="hrm-button hrm-basic-button hrm-accent-button
                           position-page__tab-pane-action-list-item position-page__save-button"
                    data-bind="
                        click: function() {$tab.submit();},
                        attr: {disabled: $tab.isSubmitted() && !$tab.isValid()}
                    ">
                Сохранить
            </button>
        </div>
    </div>
<!-- /ko -->

                <!-- /ko -->

                <!-- ko template: {
                    foreach: hrmTemplateIf($root.activeTab() === 6, $data),
                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                } -->
                    <!-- ko let: {'$tab': $root.equipmentTabViewModel} -->
    <!-- ko template: { afterRender: $tab.afterRender } -->
        <div class="position-page__tab-pane position-page__equipment-tab-pane"
             data-bind="using: $tab.formModel.value">
            <!-- ko let: {control: ko.observable(null)} -->
                <div class="hrm-search-form-field position-page__equipment-tab-pane-search-form-field"
                     data-bind="hrmFormField, hrmFormFieldControlRef: control">
                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                        <i class="hrm-form-field__basis-prefix hrm-form-field-icon hrm-form-field-search-icon"></i>

                        <input data-bind="
                            textInput: $tab.searchTerm,
                            hrmFormFieldInputControl: control
                        " placeholder="Поиск">
                    </div>
                </div>
            <!-- /ko -->

            <div class="position-page__equipment-tab-pane-list">
                <!-- ko foreach: $tab.filteredEquipment -->
                    <div class="position-page__equipment-tab-pane-list-item">
                        <!-- ko let: {checkboxGroup: ko.observable(null)} -->
                            <div class="position-page__equipment-tab-pane-list-item-checkbox-group"
                                 data-bind="component: {name: 'hrm-checkbox-group', params: {exportAs: checkboxGroup}}">
                                <div data-bind="component: {name: 'hrm-checkbox', params: {checked: $tab.getEquipmentChecked($parent.id), owner: checkboxGroup}}"></div>
                                <label data-bind="hrmCheckboxGroupLabel, hrmCheckboxGroupLabelOwner: checkboxGroup, text: $parent.name">
                                </label>
                            </div>
                        <!-- /ko -->
                    </div>
                <!-- /ko -->
            </div>

            <div class="position-page__tab-pane-action-list">
                <button class="hrm-button hrm-basic-button
                               position-page__tab-pane-action-list-item position-page__cancel-button"
                        data-bind="
                            click: function() {$tab.cancel();}
                        ">
                    Отменить
                </button>

                <button class="hrm-button hrm-basic-button hrm-accent-button
                               position-page__tab-pane-action-list-item position-page__save-button"
                        data-bind="
                            click: function() {$tab.submit();}
                        ">
                    Сохранить
                </button>
            </div>
        </div>
    <!-- /ko -->
<!-- /ko -->

                <!-- /ko -->

                <!-- ko template: {
                    foreach: hrmTemplateIf($root.activeTab() === 7, $data),
                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                } -->
                    <!-- ko let: {'$tab': $root.recruitingTabViewModel} -->
    <div class="position-page__tab-pane position-page__recruiting-tab-pane"
         data-bind="using: $tab.formModel.value">
        <div class="position-page__section">
            <div class="position-page__section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__recruiting-tab-pane-position-code-form-field"
                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    Код должности

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Код должности'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: recruiting.positionCode,
                                        hrmMask, hrmMaskOptions : {regex: '[\\dA-Za-z][\\w]*'},
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                    " placeholder="0">
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.recruiting.positionCode.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->
                    </div>

                    <div class="position-page__section-row-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__recruiting-tab-pane-template-form-field"
                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    Шаблон для анкеты

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Шаблон для анкеты'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <select data-bind="
                                        value: recruiting.template  ,
                                        hrmSelect, hrmSelectAllowClear: true, hrmSelectPlaceholder: '', hrmSelectSearchEnabled: true,
                                        hrmFormFieldSelectControl: control
                                    ">
                                        <option></option>
                                        <option value="0">1</option>
                                        <option value="1">2</option>
                                        <option value="2">3</option>
                                        <option value="3">4</option>
                                        <option value="4">5</option>
                                    </select>
                                </div>

                                <div class="hrm-form-field__hint">необязательно</div>
                            </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>

            <div class="position-page__section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__recruiting-tab-pane-hatimaki-vacancy-id-form-field"
                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                <label data-bind="hrmFormFieldLabel: label">
                                    ID вакансии на сайте Хатимаки

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'ID вакансии на сайте Хатимаки'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: recruiting.hatimakiVacancyId,
                                        hrmMask, hrmMaskPattern: '999999999',
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $tab.formControlErrorStateMatcher.bind($tab)
                                    " placeholder="Девятизначное число">
                                </div>

                                <div class="hrm-form-field__hint" data-bind="
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? !control().errorState() : true,
                                    hrmSlideDuration: 150
                                ">
                                    необязательно
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.recruiting.hatimakiVacancyId.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>

            <div class="position-page__section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="position-page__deposit-tab-pane-avito-vacancy-xml-form-field" data-bind="
                                hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                            ">
                                <label data-bind="hrmFormFieldLabel: label">
                                    XML для вакансии на сайте Avito

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'XML для вакансии на сайте Avito'">
                                    </button>
                                </label>

                                <div data-bind="hrmFormFieldComplexControl: control">
                                    <div data-bind="component: {
                                        name: 'position-page-xml-control',
                                        params: {value: recruiting.avitoVacancyXml}
                                    }">
                                    </div>
                                </div>
                            </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>

            <div class="position-page__section-row">
                <div class="position-page__section-row-content">
                    <div class="position-page__section-row-item">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div class="hrm-form-field-switch-group position-page__deposit-tab-pane-avito-activity-switch-group"
                                 data-bind="hrmSwitchGroup, hrmSwitchGroupControlRef: control, hrmSwitchGroupLabelRef: label">
                                <div data-bind="component: {name: 'hrm-switch', params: {checked: recruiting.avitoActivity, exportAs: control}}"></div>
                                <label data-bind="hrmSwitchGroupLabel: label">
                                    Активность для сайта Avito

                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                   hrm-switch-group__label-info-button hrm-circle-icon-button--theme_neutral"
                                            data-bind="hrmTooltip, hrmTooltipText: 'Активность для сайта Avito'">
                                    </button>
                                </label>
                            </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
        </div>

        <div class="position-page__tab-pane-action-list">
            <button class="hrm-button hrm-basic-button
                           position-page__tab-pane-action-list-item position-page__cancel-button"
                    data-bind="
                        click: function() {$tab.cancel();}
                    ">
                Отменить
            </button>

            <button class="hrm-button hrm-basic-button hrm-accent-button
                           position-page__tab-pane-action-list-item position-page__save-button"
                    data-bind="
                        click: function() {$tab.submit();},
                        attr: {disabled: $tab.isSubmitted() && !$tab.isValid()}
                    ">
                Сохранить
            </button>
        </div>
    </div>
<!-- /ko -->

                <!-- /ko -->
            </div>
        </div>
    </div>

    <script type="text/html" id="position-page-delete-rank-modal-content-template">
        <div data-bind="component: {
            name: 'positions-page-delete-rank-modal-dialog',
            params: {data, modalElement, cancel: function () {close();}, submit: function () {close(true);}}
        }" role="document">
        </div>
    </script>

    <script type="text/html" id="position-page-rank-modal-content-template">
        <div class="position-page__rank-modal-dialog-wrapper">
            <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                <div class="position-page__rank-modal-dialog-wrapper-actions">
                    <button class="hrm-button position-page__rank-modal-dialog-wrapper-close-button"
                            data-bind="click: function () {close();}">
                    </button>
                </div>
            <!-- /ko -->

            <div data-bind="component: { name: 'position-page__rank-modal-dialog', params: { data, modalElement, cancel: function () { close(); }, submit: function ($data) { close($data); } } }" role="document"></div>
        </div>
    </script>

    <script type="text/html" id="position-page-delete-speciality-modal-content-template">
        <div data-bind="component: {
            name: 'positions-page-delete-speciality-modal-dialog',
            params: {data, modalElement, cancel: function () {close();}, submit: function () {close(true);}}
        }" role="document">
        </div>
    </script>

    <script type="text/html" id="position-page-speciality-modal-content-template">
        <div data-bind="component: {
            name: 'positions-page-speciality-modal-dialog',
            params: {data, modalElement, cancel: function () {close();}, submit: function ($data) {close($data);}}
        }" role="document">
        </div>
    </script>

    <!-- ko component: {name: 'hrm-modal-container', params: {opens: modalOpens}} --><!-- /ko -->

    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-debug.js" integrity="sha256-M5ZomNNnrnEB2WjSbnty5GWGqq6UuAAVNnWECisgEis=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/knockout.validation@2.0.4/dist/knockout.validation.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.12/js/select2.full.min.js" integrity="sha256-vucLmrjdfi9YwjGY/3CQ7HnccFSS/XRS1M/3k/FDXJw=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/i18n/ru.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/simplebar/5.1.0/simplebar.min.js" integrity="sha256-hFddD6XMIwFba4ITQjpv5WWE557w6O0w9RRfmGjIz4k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.10.2/js/OverlayScrollbars.min.js" integrity="sha256-5Tj3ZUgjHEGwF7TxpOgbPpjhq+WxXvpfb+qr9OxRHtY=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.10.2/js/jquery.overlayScrollbars.min.js" integrity="sha256-RE+oy7ofA6XerySMpTlDcg0gFUwHN3n0qQ5fUIZVq/M=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/gh/RobinHerbots/jquery.inputmask@4.0.9/dist/jquery.inputmask.bundle.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js" integrity="sha256-AdQN98MVZs44Eq2yTwtoKufhnU+uZ7v2kXnD5vqzZVo=" crossorigin="anonymous"></script>
<script src="https://unpkg.com/popper.js@1"></script>
<script src="https://unpkg.com/tippy.js@5"></script>
<script src="https://unpkg.com/sticky-events@3.1.1/dist/sticky-events.umd.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js" integrity="sha256-VeNaFBVDhoX3H+gJ37DpT/nTuZTdjYro9yBruHjVmoQ=" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.js" integrity="sha256-id5Qk/MwQJxgNlDFDpVymUuReXfTUZiaQKb8arrddQM=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/mode/xml/xml.min.js" integrity="sha256-Lfk8z6WUsBN6YiCaMpH6bxBHyRqkPK4O2QbQHFNUS40=" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script src="assets/js/main.js"></script>

    <script type="text/javascript">
    $(function () {
        ko.components.register('positions-page-delete-rank-modal-dialog', {
            viewModel: {
                createViewModel: function (params, componentInfo) {
                    const $element = $(componentInfo.element);
                    $element.addClass([
                        'modal-dialog',
                        'modal-dialog-centered',
                        'hrm-modal-dialog',
                        'hrm-basic-modal-dialog',
                        'position-page__delete-rank-modal-dialog',
                        'position-page__delete-rank-modal-dialog--initializing'
                    ]);

                    return new (function () {
                        this.initializing = ko.observable(true);

                        this.cancel = function () {
                            if ('cancel' in params) {
                                params.cancel();
                            }
                        };

                        this.submit = function () {
                            if ('submit' in params) {
                                params.submit();
                            }
                        };

                        this.afterRender = function () {
                            $element.removeClass('position-page__delete-rank-modal-dialog--initializing');
                            this.initializing(false);
                        }.bind(this);
                    });
                }
            },
            template: `
                <!-- ko template: { afterRender: afterRender } -->
                    <button class="hrm-button hrm-basic-modal-dialog__close-button"
                            data-bind="click: function() { cancel(); }" aria-label="Close">
                    </button>

                    <div class="hrm-basic-modal-dialog__header">
                        <h2 class="hrm-basic-modal-dialog__title">Удалить разряд</h2>
                    </div>

                    <div class="hrm-basic-modal-dialog__body">
                        Разряд будет удален без возможности восстановления.
                    </div>

                    <div class="hrm-basic-modal-dialog__action-list">
                        <button class="hrm-button hrm-basic-button hrm-basic-modal-dialog__action-list-item
                                       position-page__delete-rank-modal-dialog-cancel-button"
                                data-bind="click: function() {cancel();}">
                            Отменить
                        </button>

                        <button class="hrm-button hrm-basic-button hrm-accent-button hrm-basic-modal-dialog__action-list-item
                                       position-page__delete-rank-modal-dialog-submit-button"
                                data-bind="click: function() {submit();}">
                            Удалить
                        </button>
                    </div>
                <!-- /ko -->
            `
        });
    });
</script>

    <template id="position-page-rank-modal-dialog-template">
    <!-- ko template: { afterRender: afterRender } -->
        <!-- ko if: viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
            <button class="hrm-button position-page__rank-modal-dialog-close-button"
                    data-bind="click: function() {cancel();}" aria-label="Close">
            </button>
        <!-- /ko -->

        <!-- ko if: !isLoading() -->
            <div class="position-page__rank-modal-dialog-header">
                <span class="position-page__rank-modal-dialog-title"
                      data-bind="text: mode === 'create' ? 'Новый разряд' : 'Редактировать разряд'">
                </span>

                <!-- ko if: mode === 'edit' -->
                    <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_negative
                                   hrm-button-with-times-icon position-page__rank-modal-dialog-delete-button"
                            data-bind="click: function() {onDelete();}">
                        Удалить разряд
                    </button>
                <!-- /ko -->
            </div>

            <!-- ko using: formModel -->
                <div class="hrm-section">
                    <div class="row position-page__rank-modal-dialog-row">
                        <div class="col-4 col-md-2 position-page__rank-modal-dialog-row-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div data-bind="
                                    hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                ">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Номер

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Номер'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <input data-bind="
                                            textInput: number,
                                            hrmMask, hrmMaskPattern: 'decimal',
                                            hrmMaskOptions: {digits: '0', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                            hrmFormFieldInputControl: control,
                                            hrmFormFieldInputControlErrorStateMatcher: $component.formControlErrorStateMatcher.bind($component)
                                        " placeholder="0">
                                    </div>

                                    <div data-bind="
                                        component: {name: 'hrm-form-field-error'},
                                        hrmSlide,
                                        hrmSlideValue: control() !== null ? control().errorState : false,
                                        hrmSlideDuration: 150
                                    ">
                                        <!-- ko text: $parent.number.error() --><!-- /ko -->
                                    </div>
                                </div>
                            <!-- /ko -->
                        </div>

                        <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div data-bind="
                                    hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                ">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        <span>Фикс. оклад в час, <i class="far fa-ruble-sign"></i></span>

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Фикс. оклад в час, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <input data-bind="
                                            textInput: salaryBulk,
                                            hrmMask, hrmMaskPattern: 'decimal',
                                            hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                            hrmFormFieldInputControl: control,
                                            hrmFormFieldInputControlErrorStateMatcher: $component.formControlErrorStateMatcher.bind($component)
                                        " placeholder="0">
                                    </div>

                                    <div data-bind="
                                        component: {name: 'hrm-form-field-error'},
                                        hrmSlide,
                                        hrmSlideValue: control() !== null ? control().errorState : false,
                                        hrmSlideDuration: 150
                                    ">
                                        <!-- ko text: $parent.salaryBulk.error() --><!-- /ko -->
                                    </div>
                                </div>
                            <!-- /ko -->
                        </div>

                        <div class="col-12 col-md-7 position-page__rank-modal-dialog-row-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div class="hrm-form-field-switch-group position-page__rank-modal-dialog-documents-required-switch-group"
                                     data-bind="hrmSwitchGroup, hrmSwitchGroupControlRef: control, hrmSwitchGroupLabelRef: label">
                                    <div data-bind="component: {name: 'hrm-switch', params: {checked: documentsRequired, exportAs: control}}"></div>
                                    <label data-bind="hrmSwitchGroupLabel: label">
                                        Для смены разряда нужно наличие обязательных документов с неистекшим сроком годности

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-switch-group__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Для смены разряда нужно наличие обязательных документов с неистекшим сроком годности'">
                                        </button>
                                    </label>
                                </div>
                            <!-- /ko -->
                        </div>
                    </div>

                    <div class="row position-page__rank-modal-dialog-row">
                        <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div data-bind="
                                    hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                    hrmFormFieldFixedLabel: true
                                ">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Коэффициент норматива выработки

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Коэффициент норматива выработки'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <input data-bind="
                                            textInput: productionStandardFactor,
                                            hrmMask, hrmMaskPattern: 'decimal',
                                            hrmMaskOptions: {digits: '0,2', allowMinus: false, rightAlign: false},
                                            hrmFormFieldInputControl: control,
                                            hrmFormFieldInputControlErrorStateMatcher: $component.formControlErrorStateMatcher.bind($component)
                                        " placeholder="0">
                                    </div>

                                    <div data-bind="
                                        component: {name: 'hrm-form-field-error'},
                                        hrmSlide,
                                        hrmSlideValue: control() !== null ? control().errorState : false,
                                        hrmSlideDuration: 150
                                    ">
                                        <!-- ko text: $parent.productionStandardFactor.error() --><!-- /ko -->
                                    </div>

                                    <div class="hrm-form-field__hint">необязательно</div>
                                </div>
                            <!-- /ko -->
                        </div>

                        <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div data-bind="
                                    hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                    hrmFormFieldFixedLabel: true
                                ">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Коэффициент расчета премии

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Коэффициент расчета премии'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <input data-bind="
                                            textInput: bonusFactor,
                                            hrmMask, hrmMaskPattern: 'decimal',
                                            hrmMaskOptions: {digits: '0,2', allowMinus: false, rightAlign: false},
                                            hrmFormFieldInputControl: control,
                                            hrmFormFieldInputControlErrorStateMatcher: $component.formControlErrorStateMatcher.bind($component)
                                        " placeholder="0">
                                    </div>

                                    <div class="hrm-form-field__hint">необязательно</div>
                                </div>
                            <!-- /ko -->
                        </div>

                        <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div data-bind="
                                    hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                    hrmFormFieldFixedLabel: true
                                ">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Коэффициент расчета штрафа

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Коэффициент расчета штрафа'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <input data-bind="
                                            textInput: fineFactor,
                                            hrmMask, hrmMaskPattern: 'decimal',
                                            hrmMaskOptions: {digits: '0,2', allowMinus: false, rightAlign: false},
                                            hrmFormFieldInputControl: control,
                                            hrmFormFieldInputControlErrorStateMatcher: $component.formControlErrorStateMatcher.bind($component)
                                        " placeholder="0">
                                    </div>

                                    <div class="hrm-form-field__hint">необязательно</div>
                                </div>
                            <!-- /ko -->
                        </div>
                    </div>

                    <div class="row position-page__rank-modal-dialog-row">
                        <div class="col-12 col-md-6 position-page__rank-modal-dialog-row-item">
                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                <div data-bind="
                                    hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                    hrmFormFieldFixedLabel: true
                                ">
                                    <label data-bind="hrmFormFieldLabel: label">
                                        Период увеличения норматива премии

                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                       hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                data-bind="hrmTooltip, hrmTooltipText: 'Период увеличения норматива премии'">
                                        </button>
                                    </label>

                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                        <select data-bind="
                                            value: bonusIncreasePeriod,
                                            hrmSelect, hrmSelectAllowClear: true, hrmSelectPlaceholder: 'Период',
                                            hrmFormFieldSelectControl: control
                                        ">
                                            <option></option>
                                            <option value="1">Неделя</option>
                                            <option value="2">Месяц</option>
                                            <option value="3">Год</option>
                                        </select>
                                    </div>

                                    <div data-bind="
                                        component: {name: 'hrm-form-field-error'},
                                        hrmSlide,
                                        hrmSlideValue: control() !== null ? control().errorState : false,
                                        hrmSlideDuration: 150
                                    ">
                                        <!-- ko text: $parent.productionStandardFactor.error() --><!-- /ko -->
                                    </div>

                                    <div class="hrm-form-field__hint">необязательно</div>
                                </div>
                            <!-- /ko -->
                        </div>
                    </div>
                </div>

                <div class="hrm-section">
                    <div class="hrm-section__header">
                        <span class="hrm-section__title">Дополнительные настройки</span>
                        <span class="hrm-section__postscript">необязательно</span>
                    </div>

                    <!-- ko foreach: {
                            data: conditions,
                            afterAdd: hrmFadeAfterAddFactory(200),
                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                        } -->
                            <div class="position-page__rank-modal-dialog-condition">
                                <div class="row position-page__rank-modal-dialog-row position-page__rank-modal-dialog-condition-row">
                                    <div class="col-4 col-md-2 position-page__rank-modal-dialog-row-item">
                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                            <div data-bind="
                                                hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                            ">
                                                <label data-bind="hrmFormFieldLabel: label">
                                                    Выработка

                                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                            data-bind="hrmTooltip, hrmTooltipText: 'Выработка'">
                                                    </button>
                                                </label>

                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                    <input class="position-page__rank-modal-dialog-condition-production-form-control" data-bind="
                                                        textInput: production,
                                                        hrmMask, hrmMaskPattern: '99:99',
                                                        hrmFormFieldInputControl: control,
                                                        hrmFormFieldInputControlErrorStateMatcher: $component.formControlErrorStateMatcher.bind($component)
                                                    " placeholder="00:00">
                                                </div>

                                                <div data-bind="
                                                    component: {name: 'hrm-form-field-error'},
                                                    hrmSlide,
                                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                                    hrmSlideDuration: 150
                                                ">
                                                    <!-- ko text: $parent.production.error() --><!-- /ko -->
                                                </div>
                                            </div>
                                        <!-- /ko -->
                                    </div>

                                    <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                            <div data-bind="
                                                hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                            ">
                                                <label data-bind="hrmFormFieldLabel: label">
                                                    Коэффициент выработки

                                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                            data-bind="hrmTooltip, hrmTooltipText: 'Коэффициент выработки'">
                                                    </button>
                                                </label>

                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                    <input data-bind="
                                                        textInput: productionFactor,
                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                        hrmMaskOptions: {digits: '0,2', allowMinus: false, rightAlign: false},
                                                        hrmFormFieldInputControl: control
                                                    " placeholder="0">
                                                </div>
                                            </div>
                                        <!-- /ko -->
                                    </div>

                                    <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                            <div data-bind="
                                                hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                            ">
                                                <label data-bind="hrmFormFieldLabel: label">
                                                    Коэффициент премии

                                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                            data-bind="hrmTooltip, hrmTooltipText: 'Коэффициент премии'">
                                                    </button>
                                                </label>

                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                    <input data-bind="
                                                        textInput: bonusFactor,
                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                        hrmMaskOptions: {digits: '0,2', allowMinus: false, rightAlign: false},
                                                        hrmFormFieldInputControl: control
                                                    " placeholder="0">
                                                </div>
                                            </div>
                                        <!-- /ko -->
                                    </div>

                                    <div class="col-12 col-md-1 position-page__rank-modal-dialog-row-item position-page__rank-modal-dialog-condition-row-remove-button-item">
                                        <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                            <button class="hrm-button hrm-button-with-icon hrm-button-with-trash-icon
                                                           hrm-button-with-icon--theme_negative position-page__rank-modal-dialog-condition-row-remove-button"
                                                    data-bind="click: function () {$component.removeCondition($data);}">
                                                Удалить
                                            </button>
                                        <!-- /ko -->

                                        <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                                            <button class="hrm-button hrm-icon-button hrm-trash-icon-button
                                                           hrm-icon-button--theme_negative position-page__rank-modal-dialog-condition-row-remove-button"
                                                    title="Удалить"
                                                    data-bind="click: function () {$component.removeCondition($data);}">
                                            </button>
                                        <!-- /ko -->
                                    </div>
                                </div>
                            </div>
                        <!-- /ko -->

                    <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_neutral
                                   hrm-button-with-plus-icon position-page__rank-modal-dialog-add-condition-button"
                            data-bind="click: function() {$component.addCondition();}">
                        Добавить условие
                    </button>
                </div>

                <!-- ko let: {isOpen: ko.observable(false)} -->
                    <div class="hrm-section position-page__rank-modal-dialog-change-rank-recommendations-section">
                        <div class="hrm-section__header">
                            <!-- ko if: $component.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                <button class="hrm-button hrm-circle-icon-button
                                               hrm-circle-icon-button--theme_neutral
                                               hrm-circle-arrow-down-icon-button
                                               position-page__rank-modal-dialog-change-rank-recommendations-section-toggle-button"
                                        data-bind="click: function() {isOpen(!isOpen());}">
                                </button>
                            <!-- /ko -->

                            <div class="position-page__rank-modal-dialog-change-rank-recommendations-section-header-text"
                                 data-bind="click: function() {isOpen(!isOpen());}">
                                <span class="hrm-section__title">Рекомендации по повышению или понижению разрядов</span>
                                <span class="hrm-section__postscript">необязательно</span>
                            </div>
                        </div>

                        <div data-bind="hrmSlide, hrmSlideValue: isOpen() || $component.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth">
                            <div class="row position-page__rank-modal-dialog-row">
                                <div class="col-7 col-md-3 position-page__rank-modal-dialog-row-item">
                                    <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                        <div data-bind="
                                            hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                            hrmFormFieldFixedLabel: true
                                        ">
                                            <label data-bind="hrmFormFieldLabel: label">
                                                Миним. кол-во смен для получения разряда

                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                               hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                        data-bind="hrmTooltip, hrmTooltipText: 'Миним. кол-во смен для получения разряда'">
                                                </button>
                                            </label>

                                            <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                <input data-bind="
                                                    textInput: fineFactor,
                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                    hrmMaskOptions: {digits: '0', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                    hrmFormFieldInputControl: control,
                                                ">
                                            </div>
                                        </div>
                                    <!-- /ko -->
                                </div>
                            </div>

                            <div class="hrm-section hrm-section--sub-section position-page__rank-modal-dialog-bonus-and-fine-sum-section">
                                <div class="hrm-section__header">
                                    <span class="hrm-section__title">Суммы штрафов и премий</span>
                                </div>

                                <div class="row position-page__rank-modal-dialog-row">
                                    <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                            <div data-bind="
                                                hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                                hrmFormFieldFixedLabel: true
                                            ">
                                                <label data-bind="hrmFormFieldLabel: label">
                                                    <span>Общая, абсол., <i class="far fa-ruble-sign"></i></span>

                                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                            data-bind="hrmTooltip, hrmTooltipText: 'Общая, абсол., &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                    </button>
                                                </label>

                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                    <span class="hrm-form-field__basis-prefix">></span>

                                                    <input data-bind="
                                                        textInput: bonusAndFineCommonAbsoluteSum,
                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                        hrmFormFieldInputControl: control
                                                    " placeholder="0">
                                                </div>
                                            </div>
                                        <!-- /ko -->
                                    </div>

                                    <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                            <div data-bind="
                                                hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                                hrmFormFieldFixedLabel: true
                                            ">
                                                <label data-bind="hrmFormFieldLabel: label">
                                                    <span>Назначенных, абсол., <i class="far fa-ruble-sign"></i></span>

                                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                            data-bind="hrmTooltip, hrmTooltipText: 'Назначенных, абсол., &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                    </button>
                                                </label>

                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                    <span class="hrm-form-field__basis-prefix">></span>

                                                    <input data-bind="
                                                        textInput: bonusAndFineAssignedAbsoluteSum,
                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                        hrmFormFieldInputControl: control
                                                    " placeholder="0">
                                                </div>
                                            </div>
                                        <!-- /ko -->
                                    </div>

                                    <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                            <div data-bind="
                                                hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                                hrmFormFieldFixedLabel: true
                                            ">
                                                <label data-bind="hrmFormFieldLabel: label">
                                                    <span>Рассчитанных, абсол., <i class="far fa-ruble-sign"></i></span>

                                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                            data-bind="hrmTooltip, hrmTooltipText: 'Рассчитанных, абсол., &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                    </button>
                                                </label>

                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                    <span class="hrm-form-field__basis-prefix">></span>

                                                    <input data-bind="
                                                        textInput: bonusAndFineCalculatedAbsoluteSum,
                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                        hrmFormFieldInputControl: control
                                                    " placeholder="0">
                                                </div>
                                            </div>
                                        <!-- /ko -->
                                    </div>
                                </div>

                                <div class="row position-page__rank-modal-dialog-row">
                                    <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                            <div data-bind="
                                                hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                                hrmFormFieldFixedLabel: true
                                            ">
                                                <label data-bind="hrmFormFieldLabel: label">
                                                    <span>Назначенных, относит., <i class="far fa-ruble-sign"></i></span>

                                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                            data-bind="hrmTooltip, hrmTooltipText: 'Назначенных, относит., &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                    </button>
                                                </label>

                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                    <span class="hrm-form-field__basis-prefix">></span>

                                                    <input data-bind="
                                                        textInput: bonusAndFineAssignedRelativeSum,
                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                        hrmFormFieldInputControl: control
                                                    " placeholder="0">
                                                </div>
                                            </div>
                                        <!-- /ko -->
                                    </div>

                                    <div class="col-8 col-md-3 position-page__rank-modal-dialog-row-item">
                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                            <div data-bind="
                                                hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label,
                                                hrmFormFieldFixedLabel: true
                                            ">
                                                <label data-bind="hrmFormFieldLabel: label">
                                                    <span>Рассчитанных, относит., <i class="far fa-ruble-sign"></i></span>

                                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                   hrm-form-field__label-info-button hrm-circle-icon-button--theme_neutral"
                                                            data-bind="hrmTooltip, hrmTooltipText: 'Рассчитанных, относит., &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                    </button>
                                                </label>

                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                    <span class="hrm-form-field__basis-prefix">></span>

                                                    <input data-bind="
                                                        textInput: bonusAndFineCalculatedRelativeSum,
                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                        hrmFormFieldInputControl: control
                                                    " placeholder="0">
                                                </div>
                                            </div>
                                        <!-- /ko -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                <!-- /ko -->

                <div class="position-page__rank-modal-dialog-action-list">
                    <button class="hrm-button hrm-basic-button
                                   position-page__rank-modal-dialog-action-list-item position-page__rank-modal-dialog-cancel-button"
                            data-bind="click: function() {$component.cancel();}">
                        Отменить
                    </button>

                    <button class="hrm-button hrm-basic-button hrm-accent-button
                                   position-page__rank-modal-dialog-action-list-item position-page__rank-modal-dialog-save-button"
                            data-bind="click: function() {$component.save();}">
                        Сохранить
                    </button>
                </div>
            <!-- /ko -->
        <!-- /ko -->

        <!-- ko if: isLoading() -->
            Загрузка...
        <!-- /ko -->
    <!-- /ko -->
</template>


<script type="text/javascript">
    ko.components.register('position-page__rank-modal-dialog', {
        viewModel: {
            createViewModel: function (params, componentInfo) {
                const $element = $(componentInfo.element);

                return new (function () {
                    this.windowResizeHandler = () => {
                        this.viewportSize({width: $(window).width(), height: $(window).height()});
                    };
                    this.viewportSize = ko.observable({width: $(window).width(), height: $(window).height()});

                    this.initializing = ko.observable(true);

                    this.mode = params.data.mode;
                    this.data = params.data.data;

                    this.isSubmitted = ko.observable(true);
                    this.isLoading = ko.observable(true);

                    this.createConditionFormModel = function (production, productionFactor, bonusFactor) {
                        const pf = ko.observable(productionFactor);
                        const bf = ko.observable(bonusFactor);

                        return {
                            production: ko.observable(production).extend({
                                required: {
                                    message: 'Обязательное поле',
                                    onlyIf: () => {
                                        return pf() !== '' || bf() !== '';
                                    }
                                }
                            }),
                            productionFactor: pf,
                            bonusFactor: bf
                        }
                    };

                    this.formModel = ko.validatedObservable({
                        number: ko.observable(this.mode === 'edit' ? this.data.number : '').extend({
                            required: {
                                message: 'Обязательное поле'
                            },
                            validation: {
                                validator: value => {
                                    return !params.data.rankNumbers.includes(value);
                                },
                                message: 'Номер уже используется'
                            }
                        }),
                        salaryBulk: ko.observable(this.mode === 'edit' ? this.data.salaryBulk : params.data.salaryBulk).extend({
                            required: {
                                message: 'Обязательное поле'
                            }
                        }),
                        documentsRequired: ko.observable(this.mode === 'edit' ? this.data.documentsRequired : false),
                        productionStandardFactor: ko.observable(this.mode === 'edit' ? this.data.productionStandardFactor : '1'),
                        bonusFactor: ko.observable(this.mode === 'edit' ? this.data.bonusFactor : '1'),
                        fineFactor: ko.observable(this.mode === 'edit' ? this.data.fineFactor : '1'),
                        bonusIncreasePeriod: ko.observable(this.mode === 'edit' ? this.data.bonusIncreasePeriod : ''),
                        conditions: ko.observableArray(this.mode === 'edit' ? this.data.conditions.map(c => {
                            return this.createConditionFormModel(c.production, c.productionFactor, c.bonusFactor);
                        }) : []),
                        increaseRankShiftCount: ko.observable(this.mode === 'edit' ? this.data.increaseRankShiftCount : ''),
                        bonusAndFineCommonAbsoluteSum: ko.observable(this.mode === 'edit' ? this.data.bonusAndFineCommonAbsoluteSum : ''),
                        bonusAndFineAssignedAbsoluteSum: ko.observable(this.mode === 'edit' ? this.data.bonusAndFineAssignedAbsoluteSum : ''),
                        bonusAndFineCalculatedAbsoluteSum: ko.observable(this.mode === 'edit' ? this.data.bonusAndFineCalculatedAbsoluteSum : ''),
                        bonusAndFineAssignedRelativeSum: ko.observable(this.mode === 'edit' ? this.data.bonusAndFineAssignedRelativeSum : ''),
                        bonusAndFineCalculatedRelativeSum: ko.observable(this.mode === 'edit' ? this.data.bonusAndFineCalculatedRelativeSum : ''),
                    });

                    this.formControlErrorStateMatcher = function (formControl) {
                        return ko.pureComputed(() => {
                            return this.isSubmitted() && !formControl.isValid();
                        });
                    };

                    this.onDelete = function () {
                        if ('delete' in params.data) {
                            params.data.delete();
                        }
                    };

                    this.save = function () {
                        this.isSubmitted(true);

                        if (this.formModel.isValid()) {
                            params.submit({
                                number: this.formModel().number(),
                                salaryBulk: this.formModel().salaryBulk(),
                                documentsRequired: this.formModel().documentsRequired(),
                                productionStandardFactor: this.formModel().productionStandardFactor(),
                                bonusFactor: this.formModel().bonusFactor(),
                                fineFactor: this.formModel().fineFactor(),
                                bonusIncreasePeriod: this.formModel().bonusIncreasePeriod(),
                                increaseRankShiftCount: this.formModel().increaseRankShiftCount(),
                                conditions: this.formModel().conditions().map(c => ({
                                    production: c.production(),
                                    productionFactor: c.productionFactor(),
                                    bonusFactor: c.bonusFactor()
                                })),
                                bonusAndFineCommonAbsoluteSum: this.formModel().bonusAndFineCommonAbsoluteSum(),
                                bonusAndFineAssignedAbsoluteSum: this.formModel().bonusAndFineAssignedAbsoluteSum(),
                                bonusAndFineCalculatedAbsoluteSum: this.formModel().bonusAndFineCalculatedAbsoluteSum(),
                                bonusAndFineAssignedRelativeSum: this.formModel().bonusAndFineAssignedRelativeSum(),
                                bonusAndFineCalculatedRelativeSum: this.formModel().bonusAndFineCalculatedRelativeSum()
                            })
                        }
                    };

                    this.cancel = function () {
                        params.cancel();
                    };

                    this.addCondition = function () {
                        this.formModel().conditions.push(this.createConditionFormModel('', '', ''));
                    };

                    this.removeCondition = function (condition) {
                        this.formModel().conditions.remove(condition);
                    };

                    this.afterRender = function () {
                        $element.removeClass('position-page__rank-modal-dialog--initializing');
                        this.initializing(false);
                    }.bind(this);

                    this.dispose = function () {
                        $(window).off('resize', this.windowResizeHandler);
                    };

                    (() => {
                        $element.addClass([
                            'position-page__rank-modal-dialog',
                            'position-page__rank-modal-dialog--initializing'
                        ]);

                        $(window).on('resize', this.windowResizeHandler);

                        setTimeout(() => {
                            this.isLoading(false);
                        }, 1000)
                    })();
                });
            }
        },
        template: { element: 'position-page-rank-modal-dialog-template' }
    });
</script>

    <script type="text/javascript">
    $(function () {
        ko.components.register('positions-page-delete-speciality-modal-dialog', {
            viewModel: {
                createViewModel: function (params, componentInfo) {
                    const $element = $(componentInfo.element);
                    $element.addClass([
                        'modal-dialog',
                        'modal-dialog-centered',
                        'hrm-modal-dialog',
                        'hrm-basic-modal-dialog',
                        'position-page__delete-speciality-modal-dialog',
                        'position-page__delete-speciality-modal-dialog--initializing'
                    ]);

                    return new (function () {
                        this.initializing = ko.observable(true);

                        this.cancel = function () {
                            if ('cancel' in params) {
                                params.cancel();
                            }
                        };

                        this.submit = function () {
                            if ('submit' in params) {
                                params.submit();
                            }
                        };

                        this.afterRender = function () {
                            $element.removeClass('position-page__delete-speciality-modal-dialog--initializing');
                            this.initializing(false);
                        }.bind(this);
                    });
                }
            },
            template: `
                <!-- ko template: { afterRender: afterRender } -->
                    <button class="hrm-button hrm-basic-modal-dialog__close-button"
                            data-bind="click: function() { cancel(); }" aria-label="Close">
                    </button>

                    <div class="hrm-basic-modal-dialog__header">
                        <h2 class="hrm-basic-modal-dialog__title">Удалить специальность</h2>
                    </div>

                    <div class="hrm-basic-modal-dialog__body">
                        Специальность будет удалена без возможности восстановления.
                    </div>

                    <div class="hrm-basic-modal-dialog__action-list">
                        <button class="hrm-button hrm-basic-button hrm-basic-modal-dialog__action-list-item
                                       position-page__delete-speciality-modal-dialog-cancel-button"
                                data-bind="click: function() {cancel();}">
                            Отменить
                        </button>

                        <button class="hrm-button hrm-basic-button hrm-accent-button hrm-basic-modal-dialog__action-list-item
                                       position-page__delete-speciality-modal-dialog-submit-button"
                                data-bind="click: function() {submit();}">
                            Удалить
                        </button>
                    </div>
                <!-- /ko -->
            `
        });
    });
</script>

    <script type="text/javascript">
    $(function () {
        ko.components.register('positions-page-speciality-modal-dialog', {
            viewModel: {
                createViewModel: function (params, componentInfo) {
                    const $element = $(componentInfo.element);
                    $element.addClass([
                        'modal-dialog',
                        'modal-dialog-centered',
                        'hrm-modal-dialog',
                        'hrm-basic-modal-dialog',
                        'position-page__speciality-modal-dialog',
                        'position-page__speciality-modal-dialog--initializing'
                    ]);

                    return new (function () {
                        this.initializing = ko.observable(true);

                        this.mode = params.data.mode;
                        this.data = params.data.data;

                        this.isSubmitted = ko.observable(this.mode === 'edit');

                        this.formModel = ko.validatedObservable({
                            name: ko.observable(this.mode === 'edit' ? this.data.name : '').extend({
                                required: {
                                    message: 'Обязательное поле'
                                },
                                validation: {
                                    validator: value => {
                                        return !params.data.specialityNames.includes(value);
                                    },
                                    message: 'Название уже используется'
                                }
                            })
                        });

                        this.formControlErrorStateMatcher = function (formControl) {
                            return ko.pureComputed(() => {
                                return this.isSubmitted() && !formControl.isValid();
                            });
                        };

                        this.cancel = function () {
                            if ('cancel' in params) {
                                params.cancel();
                            }
                        };

                        this.submit = function () {
                            this.isSubmitted(true);

                            if (this.formModel.isValid()) {
                                if ('submit' in params) {
                                    params.submit({
                                        name: this.formModel().name()
                                    })
                                }
                            }
                        };

                        this.afterRender = function () {
                            $element.removeClass('position-page__speciality-modal-dialog--initializing');
                            this.initializing(false);
                        }.bind(this);
                    });
                }
            },
            template: `
                <!-- ko template: { afterRender: afterRender } -->
                    <button class="hrm-button hrm-basic-modal-dialog__close-button"
                            data-bind="click: function() { cancel(); }" aria-label="Close">
                    </button>

                    <div class="hrm-basic-modal-dialog__header">
                        <h2 class="hrm-basic-modal-dialog__title"
                            data-bind="text: mode === 'edit' ? 'Редактировать специальность' : 'Новая специальность'">
                        </h2>
                    </div>

                    <div class="hrm-basic-modal-dialog__body" data-bind="using: formModel">
                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                            <div data-bind="
                                hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                            ">
                                <label data-bind="hrmFormFieldLabel: label">Название специальности</label>

                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                    <input data-bind="
                                        textInput: name,
                                        hrmFormFieldInputControl: control,
                                        hrmFormFieldInputControlErrorStateMatcher: $component.formControlErrorStateMatcher.bind($component)
                                    ">
                                </div>

                                <div data-bind="
                                    component: {name: 'hrm-form-field-error'},
                                    hrmSlide,
                                    hrmSlideValue: control() !== null ? control().errorState : false,
                                    hrmSlideDuration: 150
                                ">
                                    <!-- ko text: $parent.name.error() --><!-- /ko -->
                                </div>
                            </div>
                        <!-- /ko -->
                    </div>

                    <div class="hrm-basic-modal-dialog__action-list">
                        <button class="hrm-button hrm-basic-button hrm-basic-modal-dialog__action-list-item
                                       position-page__speciality-modal-dialog-cancel-button"
                                data-bind="click: function() {cancel();}">
                            Отменить
                        </button>

                        <button class="hrm-button hrm-basic-button hrm-accent-button hrm-basic-modal-dialog__action-list-item
                                       position-page__speciality-modal-dialog-submit-button"
                                data-bind="click: function() {submit();}, attr: {disabled: isSubmitted() && !formModel.isValid()}">
                            Сохранить
                        </button>
                    </div>
                <!-- /ko -->
            `
        });
    });
</script>

    <script type="text/javascript">
    $(function () {
        ko.components.register('position-page-xml-control', {
            viewModel: {
                createViewModel: function (params, componentInfo) {
                    const $element = $(componentInfo.element);
                    $element.addClass(['position-page__xml-control', 'position-page__xml-control--initializing']);

                    return new (function () {
                        this._subscriptions = [];

                        this.textareaElement = ko.observable(null);

                        this.value = params.value;
                        this.selfUpdate = false;

                        this.afterRender = function () {
                            const editor = CodeMirror.fromTextArea(this.textareaElement(), {
                                mode: "xml",
                                lineNumbers: true
                            });

                            editor.getDoc().setValue(this.value());

                            this._subscriptions.push(this.value.subscribe(v => {
                                if (!this.selfUpdate) {
                                    editor.getDoc().setValue(v);
                                }
                            }));

                            editor.on('change', () => {
                                this.selfUpdate = true;
                                this.value(editor.getValue());
                                this.selfUpdate = false;
                            });

                            setTimeout(() => {
                                $element.removeClass('position-page__xml-control--initializing');
                                editor.refresh();
                            }, 1000);
                        }.bind(this);

                        this.dispose = function () {
                            this._subscriptions.forEach(s => s.dispose());
                        }
                    });
                }
            },
            template: `
                <!-- ko template: { afterRender: afterRender } -->
                    <textarea data-bind="hrmElement: textareaElement" id="1"></textarea>
                <!-- /ko -->
            `
        });
    });
</script>

    <script type="text/javascript">
    $(function () {
        const $page = $(document.documentElement);

        const FormModel = function () {
            this.createAdditionalWorkloadFormModel = function (type, factor, name) {
                const typeObservable = ko.observable(type);

                return {
                    type: typeObservable,
                    factor: ko.observable(factor).extend({
                        required: {
                            message: 'Обязательное поле',
                            onlyIf: () => {
                                return typeObservable() !== '';
                            }
                        }
                    }),
                    name: ko.observable(name).extend({
                        required: {
                            message: 'Обязательное поле',
                            onlyIf: () => {
                                return typeObservable() === '2';
                            }
                        }
                    })
                };
            };

            this.createRankFormModel = function (data) {
                return {
                    number: ko.observable(data.number),
                    salaryBulk: ko.observable(data.salaryBulk),
                    documentsRequired: ko.observable(data.documentsRequired),
                    productionStandardFactor: ko.observable(data.productionStandardFactor),
                    bonusFactor: ko.observable(data.bonusFactor),
                    fineFactor: ko.observable(data.fineFactor),
                    bonusIncreasePeriod: ko.observable(data.bonusIncreasePeriod),
                    conditions: ko.observableArray(data.conditions.map(c => {
                        return {...c}
                    })),
                    increaseRankShiftCount: ko.observable(data.increaseRankShiftCount),
                    bonusAndFineCommonAbsoluteSum: ko.observable(data.bonusAndFineCommonAbsoluteSum),
                    bonusAndFineAssignedAbsoluteSum: ko.observable(data.bonusAndFineAssignedAbsoluteSum),
                    bonusAndFineCalculatedAbsoluteSum: ko.observable(data.bonusAndFineCalculatedAbsoluteSum),
                    bonusAndFineAssignedRelativeSum: ko.observable(data.bonusAndFineAssignedRelativeSum),
                    bonusAndFineCalculatedRelativeSum: ko.observable(data.bonusAndFineCalculatedRelativeSum)
                }
            };

            this.createSpecialityFormModel = function (data) {
                return {
                    name: ko.observable(data.name)
                }
            };

            this.createShiftFormModel = function (data) {
                const formModel = ko.validatedObservable(null, {deep: true, live: true});

                formModel({
                    interval: {
                        start: ko.observable(data.interval.start).extend({
                            required: {
                                message: 'Обязательное поле'
                            },
                            hrmDate: {
                                params: 'HH:mm',
                                message: 'Неверный формат времени'
                            },
                            validation: {
                                validator: value => {
                                    if (formModel() === null) {
                                        return false;
                                    }

                                    const start = moment(value, 'HH:mm');
                                    const end = moment(formModel().interval.end(), 'HH:mm');

                                    return end.isAfter(start);
                                }
                            }
                        }),
                        end: ko.observable(data.interval.end).extend({
                            required: {
                                message: 'Обязательное поле'
                            },
                            hrmDate: {
                                params: 'HH:mm',
                                message: 'Неверный формат времени'
                            },
                            validation: {
                                validator: value => {
                                    if (formModel() === null) {
                                        return false;
                                    }

                                    const start = moment(formModel().interval.start(), 'HH:mm');
                                    const end = moment(value, 'HH:mm');

                                    return end.isAfter(start);
                                }
                            }
                        })
                    },
                    salaryFactor: ko.observable(data.salaryFactor),
                    productionStandard: {
                        type: ko.observable(data.productionStandard.type),
                        value: ko.observable(data.productionStandard.value),
                        range: {
                            min: ko.observable(data.productionStandard.range.min).extend({
                                required: {
                                    onlyIf: () => {
                                        return formModel() === null || formModel().productionStandard.range.max() !== '';
                                    }
                                },
                                validation: {
                                    validator: value => {
                                        return formModel() !== null && (
                                            formModel().productionStandard.type() !== '1' ||
                                            formModel().productionStandard.range.max() === '' ||
                                            this.unmaskDecimal(formModel().productionStandard.range.max()) > this.unmaskDecimal(value)
                                        );
                                    }
                                }
                            }),
                            max: ko.observable(data.productionStandard.range.max).extend({
                                required: {
                                    onlyIf: () => {
                                        return formModel() === null || formModel().productionStandard.range.min() !== '';
                                    }
                                },
                                validation: {
                                    validator: value => {
                                        return formModel() !== null && (
                                            formModel().productionStandard.type() !== '1' ||
                                            formModel().productionStandard.range.min() === '' ||
                                            this.unmaskDecimal(formModel().productionStandard.range.min()) < this.unmaskDecimal(value)
                                        );
                                    }
                                }
                            })
                        }
                    },
                    bonus: {
                        rate: ko.observable(data.bonus.rate),
                        sum: ko.observable(data.bonus.sum),
                        max: ko.observable(data.bonus.max)
                    },
                    fine: {
                        rate: ko.observable(data.fine.rate),
                        sum: ko.observable(data.fine.sum),
                        max: ko.observable(data.fine.max)
                    }
                });

                return formModel;
            };

            this.value = ko.validatedObservable(null, {deep: true, live: true});

            this.value({
                name: ko.observable('').extend({
                    required: {
                        message: 'Обязательное поле'
                    },
                    minLength: {
                        params: 2,
                        message: 'Должно быть введено хотя бы 2 символа'
                    }
                }),
                workloadType: ko.observable('').extend({
                    required: {
                        message: 'Обязательное поле'
                    }
                }),
                productionStandard: {
                    type: ko.observable('0'),
                    value: ko.observable('').extend({
                        required: {
                            message: 'Обязательное поле',
                            onlyIf: () => {
                                return this.value() === null || this.value().productionStandard.type() === '0';
                            }
                        }
                    }),
                    range: {
                        min: ko.observable('').extend({
                            required: {
                                message: 'Обязательное поле',
                                onlyIf: () => {
                                    return this.value() === null || this.value().productionStandard.type() === '1';
                                }
                            },
                            validation: {
                                validator: value => {
                                    return this.value().productionStandard.type() !== '1' || (
                                        this.value() !== null &&
                                        this.unmaskDecimal(this.value().productionStandard.range.max()) > this.unmaskDecimal(value)
                                    );
                                }
                            }
                        }),
                        max: ko.observable('').extend({
                            required: {
                                message: 'Обязательное поле',
                                onlyIf: () => {
                                    return this.value() === null || this.value().productionStandard.type() === '1';
                                }
                            },
                            validation: {
                                validator: value => {
                                    return this.value().productionStandard.type() !== '1' || (
                                        this.value() !== null &&
                                        this.unmaskDecimal(this.value().productionStandard.range.min()) < this.unmaskDecimal(value)
                                    );
                                }
                            }
                        })
                    }
                },
                units: ko.observable('1'),
                dishCategories: ko.observableArray([]),
                dishCategoriesExclusionFlag: ko.observable(false),
                orderTypes: ko.observableArray([]),
                additionalWorkload: ko.observableArray([
                    this.createAdditionalWorkloadFormModel()
                ]),
                bulk: ko.observable('').extend({
                    required: {
                        message: 'Обязательное поле'
                    }
                }),
                bonus: {
                    rate: ko.observable(''),
                    sum: ko.observable(''),
                    max: ko.observable('')
                },
                fine: {
                    rate: ko.observable(''),
                    sum: ko.observable(''),
                    max: ko.observable('')
                },
                premiumAccount: ko.observable(false),
                ranks: ko.observableArray([]).extend({
                    required: true
                }),
                specialities: ko.observableArray([]).extend({
                    required: true
                }),
                shifts: ko.observableArray([]).extend({
                    required: true
                }),
                deposit: {
                    sum: ko.observable('').extend({
                        required: {
                            message: 'Обязательное поле'
                        }
                    }),
                    manual: ko.observable(false),
                    shiftSum: {
                        type: ko.observable('0'),
                        value: ko.observable('').extend({
                            required: {
                                message: 'Обязательное поле',
                                onlyIf: () => {
                                    return this.value() === null || !this.value().deposit.manual();
                                }
                            }
                        })
                    },
                    minSalary: ko.observable(''),
                    shiftCount: ko.observable(''),
                    rank: ko.observable(''),
                    isAssignedToBranch: ko.observable(false)
                },
                equipment: ko.observableArray([]),
                recruiting: {
                    positionCode: ko.observable('').extend({
                        required: {
                            message: 'Обязательное поле'
                        }
                    }),
                    template: ko.observable(''),
                    hatimakiVacancyId: ko.observable('').extend({
                        minLength: {
                            params: 9,
                            message: 'ID должен состоять из 9 символов'
                        }
                    }),
                    avitoVacancyXml: ko.observable(''),
                    avitoActivity: ko.observable(false)
                }
            });

            this.formatDecimal = function (value) {
                return Inputmask.format(value, {alias: 'decimal', digits: '2', groupSeparator: ' ', autoGroup: true, allowMinus: false}).replace('.00', '');
            };

            this.unmaskDecimal = function (value) {
                const result = Inputmask.unmask(value, {alias: 'decimal', digits: '2', groupSeparator: ' ', autoGroup: true, allowMinus: false, unmaskAsNumber: true});

                if (result === '') {
                    return 0;
                }

                return result;
            };
        };

        const WorkloadTabViewModel = function (formModel, save) {
            this.isSubmitted = ko.observable(false);
            this.isResetting = ko.observable(false);

            this.formModel = formModel;

            this.formModelValue = ko.pureComputed(() => {
                return {
                    name: this.formModel.value().name(),
                    workloadType: this.formModel.value().workloadType(),
                    productionStandard: {
                        type: this.formModel.value().productionStandard.type(),
                        value: this.formModel.value().productionStandard.value(),
                        range: {
                            min: this.formModel.value().productionStandard.range.min(),
                            max: this.formModel.value().productionStandard.range.max(),
                        }
                    },
                    units: this.formModel.value().units(),
                    dishCategories: this.formModel.value().dishCategories(),
                    dishCategoriesExclusionFlag: this.formModel.value().dishCategoriesExclusionFlag(),
                    orderTypes: this.formModel.value().orderTypes(),
                    additionalWorkload: this.formModel.value().additionalWorkload().map(item => ({
                        type: item.type(),
                        factor: item.factor(),
                        name: item.name()
                    }))
                }
            });

            this.lastFormModelValue = this.formModelValue();

            const validationObject = ko.validatedObservable({
                name: this.formModel.value().name,
                workloadType: this.formModel.value().workloadType,
                units: this.formModel.value().units,
                productionStandard: {
                    type: this.formModel.value().productionStandard.type,
                    value: this.formModel.value().productionStandard.value,
                    range: {
                        min: this.formModel.value().productionStandard.range.min,
                        max: this.formModel.value().productionStandard.range.max
                    }
                },
                dishCategories: this.formModel.value().dishCategories,
                orderTypes: this.formModel.value().orderTypes,
                additionalWorkload: this.formModel.value().additionalWorkload,
            }, {deep: true, live: true});

            this.isValid = ko.pureComputed(() => {
                return validationObject.isValid();
            });

            this.cancel = function () {
                this.isResetting(true);

                this.formModel.value().name(this.lastFormModelValue.name);
                this.formModel.value().workloadType(this.lastFormModelValue.workloadType);
                this.formModel.value().units(this.lastFormModelValue.units);
                this.formModel.value().productionStandard.type(this.lastFormModelValue.productionStandard.type);
                this.formModel.value().productionStandard.value(this.lastFormModelValue.productionStandard.value);
                this.formModel.value().productionStandard.range.min(this.lastFormModelValue.productionStandard.range.min);
                this.formModel.value().productionStandard.range.max(this.lastFormModelValue.productionStandard.range.max);
                this.formModel.value().dishCategories(this.lastFormModelValue.dishCategories);
                this.formModel.value().orderTypes(this.lastFormModelValue.orderTypes);
                this.formModel.value().additionalWorkload(this.lastFormModelValue.additionalWorkload.map(item => {
                    return this.formModel.createAdditionalWorkloadFormModel(item.type, item.factor, item.name);
                }));

                this.isResetting(false);
            };

            this.submit = function () {
                this.isSubmitted(true);

                if (this.isValid()) {
                    this.lastFormModelValue = this.formModelValue();

                    save();
                }
            };

            this.productionStandardFormFieldRangeControlSuffix = ko.pureComputed(() => {
                if (['6', '7'].includes(this.formModel.value().workloadType())) {
                    return 'штук';
                }

                switch (this.formModel.value().units()) {
                    case '1': return 'штук';
                    case '2': return 'рублей';
                    case '3': return 'часов';
                }
            });

            this.additionalWorkloadSectionDisabled = ko.pureComputed(() => {
                return this.formModel.value().workloadType() === '';
            });

            this.formControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return this.isSubmitted() && !formControl.isValid();
                });
            };

            this.additionalWorkloadSectionFormControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return this.isSubmitted() && !this.additionalWorkloadSectionDisabled() && !formControl.isValid();
                });
            };

            this.removeAdditionalWorkloadItem = function (item) {
                if (this.formModel.value().additionalWorkload().length === 1) {
                    item.type('');
                    item.factor('');
                    item.name('');
                } else {
                    this.formModel.value().additionalWorkload.remove(item);
                }
            };

            this.addAdditionalWorkloadItem = function () {
                this.formModel.value().additionalWorkload.push(this.formModel.createAdditionalWorkloadFormModel());
            };
        };

        const SalaryTabViewModel = function (formModel, save) {
            this.isSubmitted = ko.observable(false);

            this.formModel = formModel;

            this.lastFormModelValue = {
                bulk: '',
                bonus: {
                    rate: '',
                    sum: '',
                    max: ''
                },
                fine: {
                    rate: '',
                    sum: '',
                    max: ''
                },
                premiumAccount: false
            };

            this.isValid = ko.pureComputed(() => {
                return this.formModel.value().bulk.isValid();
            });

            this.cancel = function () {
                this.formModel.value().bulk(this.lastFormModelValue.bulk);
                this.formModel.value().bonus.rate(this.lastFormModelValue.bonus.rate);
                this.formModel.value().bonus.sum(this.lastFormModelValue.bonus.sum);
                this.formModel.value().bonus.max(this.lastFormModelValue.bonus.max);
                this.formModel.value().fine.rate(this.lastFormModelValue.fine.rate);
                this.formModel.value().fine.sum(this.lastFormModelValue.fine.sum);
                this.formModel.value().fine.max(this.lastFormModelValue.fine.max);
                this.formModel.value().premiumAccount(this.lastFormModelValue.premiumAccount);
            };

            this.submit = function () {
                this.isSubmitted(true);

                if (this.isValid()) {
                    this.lastFormModelValue = {
                        bulk: this.formModel.value().bulk(),
                        bonus: {
                            rate: this.formModel.value().bonus.rate(),
                            sum: this.formModel.value().bonus.sum(),
                            max: this.formModel.value().bonus.max()
                        },
                        fine: {
                            rate: this.formModel.value().fine.rate(),
                            sum: this.formModel.value().fine.sum(),
                            max: this.formModel.value().fine.max()
                        },
                        premiumAccount: this.formModel.value().premiumAccount()
                    };

                    save();
                }
            };

            this.formControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return this.isSubmitted() && !formControl.isValid();
                });
            };
        };

        const RanksTabViewModel = function (formModel, modalOpens, save) {
            this.isSubmitted = ko.observable(false);
            this.isResetting = ko.observable(false);

            this.formModel = formModel;

            this.formModelValue = ko.pureComputed(() => {
                return {
                    ranks: this.formModel.value().ranks().map(rank => ({
                        number: rank.number(),
                        salaryBulk: rank.salaryBulk(),
                        documentsRequired: rank.documentsRequired(),
                        productionStandardFactor: rank.productionStandardFactor(),
                        bonusFactor: rank.bonusFactor(),
                        fineFactor: rank.fineFactor(),
                        bonusIncreasePeriod: rank.bonusIncreasePeriod(),
                        increaseRankShiftCount: rank.increaseRankShiftCount(),
                        conditions: rank.conditions(),
                        bonusAndFineCommonAbsoluteSum: rank.bonusAndFineCommonAbsoluteSum(),
                        bonusAndFineAssignedAbsoluteSum: rank.bonusAndFineAssignedAbsoluteSum(),
                        bonusAndFineCalculatedAbsoluteSum: rank.bonusAndFineCalculatedAbsoluteSum(),
                        bonusAndFineAssignedRelativeSum: rank.bonusAndFineAssignedRelativeSum(),
                        bonusAndFineCalculatedRelativeSum: rank.bonusAndFineCalculatedRelativeSum(),
                    }))
                }
            });

            this.lastFormModelValue = this.formModelValue();

            this.isValid = ko.pureComputed(() => {
                return this.formModel.value().ranks.isValid();
            });

            this.cancel = function () {
                this.isResetting(true);

                this.formModel.value().ranks(this.lastFormModelValue.ranks.map(r => {
                    return this.formModel.createRankFormModel(r);
                }));

                this.isResetting(false);
            };

            this.submit = function () {
                this.isSubmitted(true);

                if (this.isValid()) {
                    this.lastFormModelValue = this.formModelValue();

                    save();
                }
            };

            this.edit = function (rank) {
                const open = {
                    dialogTemplateName: 'position-page-rank-modal-content-template',
                    data: {
                        mode: 'edit',
                        data: {
                            number: rank.number(),
                            salaryBulk: rank.salaryBulk(),
                            documentsRequired: rank.documentsRequired(),
                            productionStandardFactor: rank.productionStandardFactor(),
                            bonusFactor: rank.bonusFactor(),
                            fineFactor: rank.fineFactor(),
                            bonusIncreasePeriod: rank.bonusIncreasePeriod(),
                            increaseRankShiftCount: rank.increaseRankShiftCount(),
                            conditions: rank.conditions(),
                            bonusAndFineCommonAbsoluteSum: rank.bonusAndFineCommonAbsoluteSum(),
                            bonusAndFineAssignedAbsoluteSum: rank.bonusAndFineAssignedAbsoluteSum(),
                            bonusAndFineCalculatedAbsoluteSum: rank.bonusAndFineCalculatedAbsoluteSum(),
                            bonusAndFineAssignedRelativeSum: rank.bonusAndFineAssignedRelativeSum(),
                            bonusAndFineCalculatedRelativeSum: rank.bonusAndFineCalculatedRelativeSum(),
                        },
                        delete: () => {
                            modalOpens.remove(open);
                            this.delete(rank);
                        },
                        rankNumbers: this.formModel.value().ranks().filter(r => r !== rank).map(r => r.number()),
                        salaryBulk: this.formModel.value().bulk()
                    },
                    options: {
                        modalClass: 'position-page__rank-modal'
                    },
                    close: result => {
                        if (result !== undefined) {
                            rank.number(result.number);
                            rank.salaryBulk(result.salaryBulk);
                            rank.documentsRequired(result.documentsRequired);
                            rank.productionStandardFactor(result.productionStandardFactor);
                            rank.bonusFactor(result.bonusFactor);
                            rank.fineFactor(result.fineFactor);
                            rank.bonusIncreasePeriod(result.bonusIncreasePeriod);
                            rank.increaseRankShiftCount(result.increaseRankShiftCount);
                            rank.conditions(result.conditions);
                            rank.bonusAndFineCommonAbsoluteSum(result.bonusAndFineCommonAbsoluteSum);
                            rank.bonusAndFineAssignedAbsoluteSum(result.bonusAndFineAssignedAbsoluteSum);
                            rank.bonusAndFineCalculatedAbsoluteSum(result.bonusAndFineCalculatedAbsoluteSum);
                            rank.bonusAndFineAssignedRelativeSum(result.bonusAndFineAssignedRelativeSum);
                            rank.bonusAndFineCalculatedRelativeSum(result.bonusAndFineCalculatedRelativeSum);
                        }
                    }
                };

                modalOpens.push(open);
            };

            this.create = function () {
                modalOpens.push({
                    dialogTemplateName: 'position-page-rank-modal-content-template',
                    data: {
                        mode: 'create',
                        rankNumbers: this.formModel.value().ranks().map(r => r.number()),
                        salaryBulk: this.formModel.value().bulk()
                    },
                    options: {
                        modalClass: 'position-page__rank-modal'
                    },
                    close: result => {
                        if (result !== undefined) {
                            this.formModel.value().ranks.splice(0, 0, this.formModel.createRankFormModel(result));
                        }
                    }
                });
            };

            this.delete = function (rank) {
                modalOpens.push({
                    dialogTemplateName: 'position-page-delete-rank-modal-content-template',
                    close: result => {
                        if (result !== undefined) {
                            this.formModel.value().ranks.remove(rank);
                        }
                    }
                });
            };

            this.formControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return this.isSubmitted() && !formControl.isValid();
                });
            };
        };

        const SpecialitiesTabViewModel = function (formModel, modalOpens, save) {
            this.isSubmitted = ko.observable(false);
            this.isResetting = ko.observable(false);

            this.formModel = formModel;

            this.formModelValue = ko.pureComputed(() => {
                return {
                    specialities: this.formModel.value().specialities().map(speciality => ({
                        name: speciality.name()
                    }))
                }
            });

            this.lastFormModelValue = this.formModelValue();

            this.isValid = ko.pureComputed(() => {
                return this.formModel.value().specialities.isValid();
            });

            this.cancel = function () {
                this.isResetting(true);

                this.formModel.value().specialities(this.lastFormModelValue.specialities.map(s => {
                    return this.formModel.createSpecialityFormModel(s);
                }));

                this.isResetting(false);
            };

            this.submit = function () {
                this.isSubmitted(true);

                if (this.isValid()) {
                    this.lastFormModelValue = this.formModelValue();

                    save();
                }
            };

            this.edit = function (speciality) {
                const open = {
                    dialogTemplateName: 'position-page-speciality-modal-content-template',
                    data: {
                        mode: 'edit',
                        data: {
                            name: speciality.name()
                        },
                        specialityNames: this.formModel.value().specialities().filter(s => s !== speciality).map(s => s.name())
                    },
                    options: {
                        modalClass: 'position-page__speciality-modal'
                    },
                    close: result => {
                        if (result !== undefined) {
                            speciality.name(result.name);
                        }
                    }
                };

                modalOpens.push(open);
            };

            this.create = function () {
                modalOpens.push({
                    dialogTemplateName: 'position-page-speciality-modal-content-template',
                    data: {
                        mode: 'create',
                        specialityNames: this.formModel.value().specialities().map(s => s.name())
                    },
                    options: {
                        modalClass: 'position-page__speciality-modal'
                    },
                    close: result => {
                        if (result !== undefined) {
                            this.formModel.value().specialities.splice(0, 0, this.formModel.createSpecialityFormModel(result));
                        }
                    }
                });
            };

            this.delete = function (speciality) {
                modalOpens.push({
                    dialogTemplateName: 'position-page-delete-speciality-modal-content-template',
                    close: result => {
                        if (result !== undefined) {
                            this.formModel.value().specialities.remove(speciality);
                        }
                    }
                });
            };

            this.formControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return this.isSubmitted() && !formControl.isValid();
                });
            };
        };

        const ShiftsTabViewModel = function (formModel, modalOpens, save) {
            this.isSubmitted = ko.observable(false);
            this.isResetting = ko.observable(false);

            this.formModel = formModel;

            this.formModelValue = ko.pureComputed(() => {
                return {
                    shifts: this.formModel.value().shifts().map(shift => ({
                        interval: {
                            start: shift().interval.start(),
                            end: shift().interval.end()
                        },
                        salaryFactor: shift().salaryFactor(),
                        productionStandard: {
                            type: shift().productionStandard.type(),
                            value: shift().productionStandard.value(),
                            range: {
                                min: shift().productionStandard.range.min(),
                                max: shift().productionStandard.range.max()
                            }
                        },
                        bonus: {
                            rate: shift().bonus.rate(),
                            sum: shift().bonus.sum(),
                            max: shift().bonus.max()
                        },
                        fine: {
                            rate: shift().fine.rate(),
                            sum: shift().fine.sum(),
                            max: shift().fine.max()
                        }
                    }))
                }
            });

            this.lastFormModelValue = this.formModelValue();

            this.isValid = ko.pureComputed(() => {
                return this.formModel.value().shifts.isValid() && this.formModel.value().shifts().every(s => s.isValid());
            });

            this.cancel = function () {
                this.isResetting(true);

                this.formModel.value().shifts(this.lastFormModelValue.shifts.map(s => {
                    return this.formModel.createShiftFormModel(s);
                }));

                this.isResetting(false);
            };

            this.submit = function () {
                this.isSubmitted(true);

                if (this.isValid()) {
                    this.lastFormModelValue = this.formModelValue();

                    save();
                }
            };

            this.create = function () {
                this.formModel.value().shifts.push(this.formModel.createShiftFormModel({
                    interval: {
                        start: '',
                        end: ''
                    },
                    salaryFactor: '',
                    productionStandard: {
                        type: '0',
                        value: '',
                        range: {
                            min: '',
                            max: ''
                        }
                    },
                    bonus: {
                        rate: '',
                        sum: '',
                        max: ''
                    },
                    fine: {
                        rate: '',
                        sum: '',
                        max: ''
                    }
                }));
            };

            this.delete = function (shift) {
                this.formModel.value().shifts.remove(shift);
            };

            this.formControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return this.isSubmitted() && !formControl.isValid();
                });
            };
        };

        const DepositTabViewModel = function (formModel, save) {
            this.isSubmitted = ko.observable(false);

            this.formModel = formModel;

            this.formModelValue = ko.pureComputed(() => {
               return {
                   sum: this.formModel.value().deposit.sum(),
                   manual: this.formModel.value().deposit.manual(),
                   shiftSum: {
                       type: this.formModel.value().deposit.shiftSum.type(),
                       value: this.formModel.value().deposit.shiftSum.value()
                   },
                   minSalary: this.formModel.value().deposit.minSalary(),
                   shiftCount: this.formModel.value().deposit.shiftCount(),
                   rank: this.formModel.value().deposit.rank(),
                   isAssignedToBranch: this.formModel.value().deposit.isAssignedToBranch()
               };
            });

            this.lastFormModelValue = this.formModelValue();

            this.isValid = ko.pureComputed(() => {
                return this.formModel.value().deposit.sum.isValid() && this.formModel.value().deposit.shiftSum.value.isValid();
            });

            this.cancel = function () {
                this.formModel.value().deposit.sum(this.lastFormModelValue.sum);
                this.formModel.value().deposit.manual(this.lastFormModelValue.manual);
                this.formModel.value().deposit.shiftSum.type(this.lastFormModelValue.shiftSum.type);
                this.formModel.value().deposit.shiftSum.value(this.lastFormModelValue.shiftSum.value);
                this.formModel.value().deposit.minSalary(this.lastFormModelValue.minSalary);
                this.formModel.value().deposit.shiftCount(this.lastFormModelValue.shiftCount);
                this.formModel.value().deposit.rank(this.lastFormModelValue.rank);
                this.formModel.value().deposit.isAssignedToBranch(this.lastFormModelValue.isAssignedToBranch);
            };

            this.submit = function () {
                this.isSubmitted(true);

                if (this.isValid()) {
                    this.lastFormModelValue = this.formModelValue();

                    save();
                }
            };

            this.formControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return this.isSubmitted() && !formControl.isValid();
                });
            };
        };

        const EquipmentTabViewModel = function (formModel, save) {
            this.equipment = [
                {id: 0, name: 'Китель поварской'},
                {id: 1, name: 'Брюки поварские'},
                {id: 2, name: 'Бандана поварская'},
                {id: 3, name: 'Фартук поварской'},
                {id: 4, name: 'Футболка поварская'},
                {id: 5, name: 'Кардиган администратора'},
                {id: 6, name: 'Футболка администратора'},
                {id: 7, name: 'Кепка администратора'},
                {id: 8, name: 'Жилетка курьера'},
                {id: 9, name: 'Футболка курьера'},
                {id: 10, name: 'Кепка курьера'},
                {id: 11, name: 'Халат тех.сотрудника'},
                {id: 12, name: 'Брюки тех.сотрудника'},
                {id: 13, name: 'Кепка тех.сотрудника'},
                {id: 14, name: 'Китель поварской Б/У'},
                {id: 15, name: 'Бандана поварская Б/У'},
                {id: 16, name: 'Блузка администратора'}
            ];

            this.searchTerm = ko.observable('');

            this.formModel = formModel;

            this.formModelValue = ko.pureComputed(() => {
                return {
                    equipment: [...this.formModel.value().equipment()]
                };
            });

            this.lastFormModelValue = this.formModelValue();

            this.afterRender = function () {
                this.searchTerm('');
            }.bind(this);

            this.cancel = function () {
                this.formModel.value().equipment([...this.lastFormModelValue.equipment]);
            };

            this.submit = function () {
                this.lastFormModelValue = this.formModelValue();

                save();
            };

            this.filteredEquipment = ko.pureComputed(() => {
                return this.equipment.filter(c => c.name.toLowerCase().includes(this.searchTerm().toLowerCase()));
            });

            this.getEquipmentChecked = function (id) {
                return ko.pureComputed({
                    read: () => {
                        return this.formModel.value().equipment().includes(id);
                    },
                    write: value => {
                        if (value) {
                            this.formModel.value().equipment.push(id);
                        } else {
                            this.formModel.value().equipment.remove(id);
                        }
                    },
                    owner: this
                });
            };

            this.formControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return this.isSubmitted() && !formControl.isValid();
                });
            };
        };

        const RecruitingTabViewModel = function (formModel, save) {
            this.isSubmitted = ko.observable(false);

            this.formModel = formModel;

            this.formModelValue = ko.pureComputed(() => {
                return {
                    positionCode: this.formModel.value().recruiting.positionCode(),
                    template: this.formModel.value().recruiting.template(),
                    hatimakiVacancyId: this.formModel.value().recruiting.hatimakiVacancyId(),
                    avitoVacancyXml: this.formModel.value().recruiting.avitoVacancyXml(),
                    avitoActivity: this.formModel.value().recruiting.avitoActivity()
                };
            });

            this.lastFormModelValue = this.formModelValue();

            this.isValid = ko.pureComputed(() => {
                return this.formModel.value().recruiting.positionCode.isValid();
            });

            this.cancel = function () {
                this.formModel.value().recruiting.positionCode(this.lastFormModelValue.positionCode);
                this.formModel.value().recruiting.template(this.lastFormModelValue.template);
                this.formModel.value().recruiting.hatimakiVacancyId(this.lastFormModelValue.hatimakiVacancyId);
                this.formModel.value().recruiting.avitoVacancyXml(this.lastFormModelValue.avitoVacancyXml);
                this.formModel.value().recruiting.avitoActivity(this.lastFormModelValue.avitoActivity);
            };

            this.submit = function () {
                this.isSubmitted(true);

                if (this.isValid()) {
                    this.lastFormModelValue = this.formModelValue();

                    save();
                }
            };

            this.formControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return this.isSubmitted() && !formControl.isValid();
                });
            };
        };

        const ViewModel = function () {
            this.dishCategories = [
                {id: '1', name: 'Пицца'},
                {id: '2', name: 'Роллы'},
                {id: '3', name: 'Супы'},
                {id: '4', name: 'Салаты'},
                {id: '5', name: 'Закуски'},
                {id: '6', name: 'Десерты'},
                {id: '7', name: 'Напитки'}
            ];

            this.modalOpens = ko.observableArray([]);

            this.subscriptions = [];

            this.isSidebarCollapsed = ko.observable(localStorage.getItem(HRM_SIDEBAR_COLLAPSED_LOCAL_STORAGE_KEY) === 'true');

            this.windowResizeHandler = () => {
                this.viewportSize({width: $(window).width(), height: $(window).height()});
            };
            this.viewportSize = ko.observable({width: $(window).width(), height: $(window).height()});

            this.navigationTabs = [
                new HrmTabGroupItem('Нагрузка'),
                new HrmTabGroupItem('Расчет ЗП', true),
                new HrmTabGroupItem('Разряды', true),
                new HrmTabGroupItem('Специальности', true),
                new HrmTabGroupItem('Смены', true),
                new HrmTabGroupItem('Депозит', true),
                new HrmTabGroupItem('Мат. ценности', true),
                /*new HrmTabGroupItem('Договоры', true),
                new HrmTabGroupItem('Доплаты', true),*/
                new HrmTabGroupItem('Подбор персонала', true),
            ];

            this.activeTab = ko.observable(0);

            this.formModel = new FormModel();

            this.workloadTabViewModel = new WorkloadTabViewModel(this.formModel, () => {
                this.activeTab(1);
            });

            this.salaryTabViewModel = new SalaryTabViewModel(this.formModel, () => {
                this.activeTab(2);
            });

            this.ranksTabViewModel = new RanksTabViewModel(this.formModel, this.modalOpens, () => {
                this.activeTab(3);
            });

            this.specialitiesTabViewModel = new SpecialitiesTabViewModel(this.formModel, this.modalOpens, () => {
                this.activeTab(4);
            });

            this.shiftsTabViewModel = new ShiftsTabViewModel(this.formModel, this.modalOpens, () => {
                this.activeTab(5);
            });

            this.depositTabViewModel = new DepositTabViewModel(this.formModel, () => {
                this.activeTab(6);
            });

            this.equipmentTabViewModel = new EquipmentTabViewModel(this.formModel, () => {
                this.activeTab(7);
            });

            this.recruitingTabViewModel = new RecruitingTabViewModel(this.formModel, () => {});

            this.descendantsComplete = function () {
                $page.removeClass('hrm-page--initializing');
            };

            this.getUnitsName = function (units) {
                switch (units) {
                    case '1': return 'Штуки';
                    case '2': return 'Рубли';
                    case '3': return 'Норма времени';
                }
            };

            this.updateTabActivities = function () {
                const isWorkloadTabPassed = this.workloadTabViewModel.isValid() && this.workloadTabViewModel.isSubmitted();
                const isSalaryTabPassed = this.salaryTabViewModel.isValid() && this.salaryTabViewModel.isSubmitted();

                this.navigationTabs[1].disabled(!isWorkloadTabPassed);
                this.navigationTabs[2].disabled(!isWorkloadTabPassed || !isSalaryTabPassed);
                this.navigationTabs[3].disabled(!isWorkloadTabPassed || !isSalaryTabPassed);

                this.navigationTabs[4].disabled(!isWorkloadTabPassed || !isSalaryTabPassed);
                this.navigationTabs[5].disabled(!isWorkloadTabPassed || !isSalaryTabPassed);
                this.navigationTabs[6].disabled(!isWorkloadTabPassed || !isSalaryTabPassed);
                this.navigationTabs[7].disabled(!isWorkloadTabPassed || !isSalaryTabPassed);

                /*this.navigationTabs[8].disabled(!isWorkloadTabPassed || !isSalaryTabPassed || !isRanksTabPassed || !isSpecialitiesTabPassed);
                this.navigationTabs[9].disabled(!isWorkloadTabPassed || !isSalaryTabPassed || !isRanksTabPassed || !isSpecialitiesTabPassed);*/
            };

            this.formatDecimal = function (value) {
                return Inputmask.format(value, {alias: 'decimal', digits: '2', groupSeparator: ' ', autoGroup: true, allowMinus: false}).replace('.00', '');
            };

            this.unmaskDecimal = function (value) {
                const result = Inputmask.unmask(value, {alias: 'decimal', digits: '2', groupSeparator: ' ', autoGroup: true, allowMinus: false, unmaskAsNumber: true});

                if (result === '') {
                    return 0;
                }

                return result;
            };

            (() => {
                $(window).on('resize', this.windowResizeHandler);

                this.subscriptions.push(this.isSidebarCollapsed.subscribe(collapsed => {
                    localStorage.setItem(HRM_SIDEBAR_COLLAPSED_LOCAL_STORAGE_KEY, collapsed);
                }));

                this.updateTabActivities();
                this.subscriptions.push(this.workloadTabViewModel.isSubmitted.subscribe(() => {
                    this.updateTabActivities();
                }));
                this.subscriptions.push(this.workloadTabViewModel.isValid.subscribe(() => {
                    this.updateTabActivities();
                }));
                this.subscriptions.push(this.salaryTabViewModel.isSubmitted.subscribe(() => {
                    this.updateTabActivities();
                }));
                this.subscriptions.push(this.salaryTabViewModel.isValid.subscribe(() => {
                    this.updateTabActivities();
                }));

                setTimeout(() => {
                    // Раскомментировать, чтобы заполнить первую вкладку тестовыми данными:
                    /*this.formModel.value().name('Администратор филиала');
                    this.formModel.value().workloadType('10');
                    this.formModel.value().productionStandard.value('2000');
                    this.workloadTabViewModel.submit();
                    this.formModel.value().bulk(1);
                    this.salaryTabViewModel.submit();
                    this.activeTab(7);*/
                });
            })();
        };

        const viewModel = new ViewModel();

        ViewModel.prototype.dispose = function() {
            $(window).off('resize', this.windowResizeHandler);
            this.subscriptions.forEach(s => s.dispose());
        };

        ko.applyBindings(
            viewModel,
            $page.get()[0]
        );
    });
</script>

</body>
</html>
