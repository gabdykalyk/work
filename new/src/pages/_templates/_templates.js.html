<script type="text/javascript">
    $(function () {
        const $page = $(document.documentElement);

        const ViewModel = function () {
            this.windowResizeHandler = () => {
                this.viewportSize({width: $(window).width(), height: $(window).height()});
            };
            this.viewportSize = ko.observable({width: $(window).width(), height: $(window).height()});

            this.value = ko.observable('').extend({
                required: {
                    message: 'Обязательное поле'
                }
            });

            this.value1 = ko.observable('').extend({
                required: {
                    message: 'Обязательное поле'
                }
            });

            this.value2 = ko.observable('').extend({
                required: {
                    message: 'Обязательное поле'
                }
            });

            this.value3 = ko.observable('').extend({
                required: {
                    message: 'Обязательное поле'
                },
                hrmDate: 'HH:mm'
            });

            this.value5 = ko.observableArray([]).extend({
                required: {
                    message: 'Обязательное поле'
                }
            });

            this.value4 = ko.observable('').extend({
                required: {
                    message: 'Пример ошибки'
                }
            });

            this.value6 = ko.observable('').extend({
                required: {
                    message: 'Пример ошибки'
                },
                hrmDate: {
                    message: 'Неверный формат даты',
                    params: 'DD.MM.YYYY, dddd'
                }
            });

            this.formattedDate = ko.observable('').extend({
                required: {
                    message: 'Пример ошибки'
                },
                hrmDate: {
                    message: 'Неверный формат даты',
                    params: 'DD.MM.YYYY'
                }
            });

            this.value7 = ko.observable('0');

            this.value8 = ko.observable('').extend({
                required: {
                    message: 'Пример ошибки'
                }
            });



            this.navigationTabs = [
                new HrmTabGroupItem('Вкладка #1'),
                new HrmTabGroupItem('Вкладка #2'),
                new HrmTabGroupItem('Неактивная вкладка', true),
                new HrmTabGroupItem('Вкладка #4'),
                new HrmTabGroupItem('Вкладка #5'),
                new HrmTabGroupItem('Вкладка #6'),
                new HrmTabGroupItem('Вкладка #7'),
                new HrmTabGroupItem('Вкладка #8'),
                new HrmTabGroupItem('Вкладка #9'),
                new HrmTabGroupItem('Вкладка #10'),
                new HrmTabGroupItem('Вкладка #11'),
                new HrmTabGroupItem('Вкладка #12'),
                new HrmTabGroupItem('Вкладка #13'),
                new HrmTabGroupItem('Вкладка #14'),
                new HrmTabGroupItem('Вкладка #15'),
            ];

            this.formControlErrorStateMatcher = function (formControl) {
                return ko.pureComputed(() => {
                    return !formControl.isValid();
                });
            };

            this.editableCellControlErrorExtractor = function (control) {
                return ko.pureComputed(() => {
                    return !control.isValid() ? {message: control.error()} : null;
                });
            };

            this.childrenComplete = function () {
                $page.removeClass('hrm-page--initializing');
            };

            $(window).on('resize', this.windowResizeHandler);
        };

        const viewModel = new ViewModel();

        ViewModel.prototype.dispose = function() {
            $(window).off('resize', this.windowResizeHandler);
        };

        ko.applyBindings(
            viewModel,
            $page.get()[0]
        );
    });
</script>
