<!DOCTYPE html>
<html class="hrm-page employee-forecast-page hrm-page--initializing"
      data-bind="childrenComplete: childrenComplete" lang="ru">
<head>
    @@include('../../base/_page-head-content.html')
</head>

<body>
    <div class="hrm-scaffold">
        <div class="hrm-scaffold__sidebar" data-bind="component: {name: 'hrm-basic-sidebar'}"></div>
        <div class="hrm-scaffold__body">
            <div class="hrm-scaffold__content employee-forecast-page__content">
                <div class="employee-forecast-page__header">
                    <span class="employee-forecast-page__title">
                        Прогноз по сотрудникам
                    </span>

                    <!-- ko if: viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                        <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_secondary
                                       hrm-button-with-arrow-left-icon employee-forecast-page__back-button">
                            К мастеру настроек
                        </button>
                    <!-- /ko -->

                    <!-- ko if: viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                        <button class="hrm-button hrm-circle-icon-button hrm-circle-icon-button--theme_secondary
                                       hrm-circle-arrow-left-icon-button employee-forecast-page__back-button">
                        </button>
                    <!-- /ko -->
                </div>

                <div class="employee-forecast-page__form">
                    <div class="employee-forecast-page__form-header">
                        <!-- ko let: {formField: ko.observable(null)} -->
                            <div class="employee-forecast-page__date-form-field" data-bind="
                                component: {
                                    name: 'hrm-form-field',
                                    params: {
                                        hasError: $root.formControlErrorStateMatcher($root.date),
                                        exportAs: formField
                                    }
                                }
                            ">
                                <hrm-slot name="label">
                                    <label data-bind="hrmFormFieldLabel, hrmFormFieldLabelOwner: formField">
                                        Расчёт на дату
                                    </label>
                                </hrm-slot>

                                <input data-bind="
                                    value: $root.date,
                                    hrmDatepicker,
                                    hrmFormFieldDatepickerControl,
                                    hrmFormFieldDatepickerControlOwner: formField
                                ">

                                <hrm-slot name="suffix">
                                    <i class="hrm-form-field__suffix hrm-form-field-icon hrm-form-field-calendar-icon"></i>
                                </hrm-slot>

                                <hrm-slot name="error">
                                    <div data-bind="
                                        component: {name: 'hrm-form-field-error'},
                                        hrmSlide,
                                        hrmSlideValue: $root.formControlErrorStateMatcher($root.date),
                                        hrmSlideDuration: 150
                                    ">
                                        <!-- ko text: $root.date.error() --><!-- /ko -->
                                    </div>
                                </hrm-slot>
                            </div>
                        <!-- /ko -->

                        <!-- ko template: {
                            foreach: hrmTemplateIf(!isBuilt(), $data),
                            afterAdd: hrmFadeAfterAddFactory(200, 200),
                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                        } -->
                            <div class="hrm-button hrm-basic-button hrm-accent-button employee-forecast-page__form-header-action
                                        employee-forecast-page__build-forecast-button"
                                 data-bind="click: function () {buildForecast();}">
                                Построить прогноз
                            </div>
                        <!-- /ko -->

                        <!-- ko template: {
                            foreach: hrmTemplateIf(isBuilt(), $data),
                            afterAdd: hrmFadeAfterAddFactory(200, 200),
                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                        } -->
                            <div class="hrm-button hrm-basic-button employee-forecast-page__form-header-action
                                        employee-forecast-page__recalculate-forecast-button">
                                Пересчитать
                            </div>
                        <!-- /ko -->
                    </div>

                    <!-- ko template: {
                        foreach: hrmTemplateIf(isBuilt(), $data),
                        afterAdd: hrmFadeAfterAddFactory(200, 200),
                        beforeRemove: hrmFadeBeforeRemoveFactory(200)
                    } -->
                        <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                            <table class="employee-forecast-page__positions-table" data-bind="hrmTable">
                                <thead>
                                <tr>
                                    <th>
                                        <div class="hrm-table__head-cell-content">
                                            Должность
                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                    data-bind="hrmTooltip, hrmTooltipText: 'Должность'">
                                            </button>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="hrm-table__head-cell-content">
                                            Тип нагрузки
                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                    data-bind="hrmTooltip, hrmTooltipText: 'Тип нагрузки'">
                                            </button>
                                        </div>
                                    </th>
                                    <th colspan="2">
                                        <div class="hrm-table__head-cell-content">
                                            Нагрузка
                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                    data-bind="hrmTooltip, hrmTooltipText: 'Нагрузка'">
                                            </button>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="hrm-table__head-cell-content">
                                            Сотрудники
                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                    data-bind="hrmTooltip, hrmTooltipText: 'Сотрудники'">
                                            </button>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="hrm-table__head-cell-content">
                                            Нормо-часы
                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                    data-bind="hrmTooltip, hrmTooltipText: 'Нормо-часы'">
                                            </button>
                                        </div>
                                    </th>
                                </tr>
                                </thead>

                                <tbody>
                                <!-- ko foreach: formModel().positions -->
                                    <tr>
                                        <td data-bind="text: name"></td>
                                        <td>
                                            <!-- ko text: $root.getWorkloadTypeName(workloadType) --><!-- /ko -->
                                            <!-- ko if: workloadType === 2 -->
                                                <span class="employee-forecast-page__positions-table-categories-count"
                                                      data-bind="text: categories.length, hrmTooltip, hrmTooltipText: $root.getCategoriesTooltipText(categories)">
                                                </span>
                                            <!-- /ko -->
                                        </td>
                                        <!-- ko let: {editableCell: ko.observable(null)} -->
                                            <td data-bind="hrmTableEditableCell: editableCell">
                                                <select data-bind="
                                                    value: units,
                                                    hrmSelect,
                                                    hrmTableEditableCellSelectControl,
                                                    hrmTableEditableCellSelectControlOwner: editableCell
                                                ">
                                                    <option value="1">Штуки</option>
                                                    <option value="2">Рубли</option>
                                                    <option value="3">Норма времени</option>
                                                </select>
                                            </td>
                                        <!-- /ko -->
                                        <!-- ko let: {editableCell: ko.observable(null)} -->
                                            <td class="employee-forecast-page__positions-table-workload-cell"
                                                data-bind="hrmTableEditableCell: editableCell">
                                                <input data-bind="
                                                    value: workload,
                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                    hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                    hrmTableEditableCellInputControl,
                                                    hrmTableEditableCellInputControlOwner: editableCell
                                                " placeholder="0">
                                            </td>
                                        <!-- /ko -->
                                        <td class="employee-forecast-page__positions-table-employee-count-cell"
                                            data-bind="text: employees().length">
                                        </td>
                                        <td class="employee-forecast-page__positions-table-estimated-hours-cell"
                                            data-bind="text: estimatedHours">
                                        </td>
                                    </tr>
                                <!-- /ko -->
                                </tbody>
                            </table>
                        <!-- /ko -->

                        <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                            <div class="hrm-table__fixed-section-container employee-forecast-page__positions-table">
                                <table class="hrm-table__fixed-section hrm-table__fixed-section--position_left
                                              employee-forecast-page__positions-table-fixed-section"
                                       data-bind="hrmTable">
                                    <thead>
                                    <tr>
                                        <th>
                                            <div class="hrm-table__head-cell-content employee-forecast-page__positions-table-table-head-cell-content">
                                                Должность
                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                               hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                        data-bind="hrmTooltip, hrmTooltipText: 'Должность'">
                                                </button>
                                            </div>
                                        </th>
                                    </tr>

                                    <tr>
                                        <th>
                                            <div class="hrm-table__head-cell-content employee-forecast-page__positions-table-table-head-cell-content">
                                                Тип нагрузки
                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                               hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                        data-bind="hrmTooltip, hrmTooltipText: 'Тип нагрузки'">
                                                </button>
                                            </div>
                                        </th>
                                    </tr>

                                    <tr>
                                        <th>
                                            <div class="hrm-table__head-cell-content employee-forecast-page__positions-table-table-head-cell-content">
                                                Нагрузка
                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                               hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                        data-bind="hrmTooltip, hrmTooltipText: 'Нагрузка'">
                                                </button>
                                            </div>
                                        </th>
                                    </tr>

                                    <tr>
                                        <th>
                                            <div class="hrm-table__head-cell-content employee-forecast-page__positions-table-table-head-cell-content">
                                                Сотрудники
                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                               hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                        data-bind="hrmTooltip, hrmTooltipText: 'Сотрудники'">
                                                </button>
                                            </div>
                                        </th>
                                    </tr>

                                    <tr>
                                        <th>
                                            <div class="hrm-table__head-cell-content employee-forecast-page__positions-table-table-head-cell-content">
                                                Нормо-часы
                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                               hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                        data-bind="hrmTooltip, hrmTooltipText: 'Нормо-часы'">
                                                </button>
                                            </div>
                                        </th>
                                    </tr>
                                    </thead>
                                </table>

                                <div class="hrm-table__scrollable-wrapper">
                                    <table class="employee-forecast-page__positions-table-table"
                                           data-bind="hrmTable">
                                        <tbody>
                                        <tr>
                                            <!-- ko foreach: formModel().positions -->
                                                <td colspan="2" data-bind="text: name"></td>
                                            <!-- /ko -->
                                        </tr>
                                        <tr>
                                            <!-- ko foreach: formModel().positions -->
                                                <td colspan="2">
                                                    <!-- ko text: $root.getWorkloadTypeName(workloadType) --><!-- /ko -->
                                                    <!-- ko if: workloadType === 2 -->
                                                        <span class="employee-forecast-page__positions-table-categories-count"
                                                              data-bind="text: categories.length, hrmTooltip, hrmTooltipText: $root.getCategoriesTooltipText(categories)">
                                                        </span>
                                                    <!-- /ko -->
                                                </td>
                                            <!-- /ko -->
                                        </tr>

                                        <tr>
                                            <!-- ko foreach: formModel().positions -->
                                                <!-- ko let: {editableCell: ko.observable(null)} -->
                                                    <td data-bind="hrmTableEditableCell: editableCell">
                                                        <select data-bind="
                                                            value: units,
                                                            hrmSelect,
                                                            hrmTableEditableCellSelectControl,
                                                            hrmTableEditableCellSelectControlOwner: editableCell
                                                        ">
                                                            <option value="1">Штуки</option>
                                                            <option value="2">Рубли</option>
                                                            <option value="3">Норма времени</option>
                                                        </select>
                                                    </td>
                                                <!-- /ko -->

                                                <!-- ko let: {editableCell: ko.observable(null)} -->
                                                    <td class="employee-forecast-page__positions-table-workload-cell"
                                                        data-bind="hrmTableEditableCell: editableCell">
                                                        <input data-bind="
                                                            value: workload,
                                                            hrmMask, hrmMaskPattern: 'decimal',
                                                            hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                            hrmTableEditableCellInputControl,
                                                            hrmTableEditableCellInputControlOwner: editableCell
                                                        " placeholder="0">
                                                    </td>
                                                <!-- /ko -->
                                            <!-- /ko -->
                                        </tr>

                                        <tr>
                                            <!-- ko foreach: formModel().positions -->
                                                <td class="employee-forecast-page__positions-table-estimated-hours-cell"
                                                    data-bind="text: estimatedHours" colspan="2">
                                                </td>
                                            <!-- /ko -->
                                        </tr>

                                        <tr>
                                            <!-- ko foreach: formModel().positions -->
                                                <td class="employee-forecast-page__positions-table-estimated-hours-cell"
                                                    data-bind="text: estimatedHours" colspan="2">
                                                </td>
                                            <!-- /ko -->
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        <!-- /ko -->

                        <div class="employee-forecast-page__form-employees-section">
                            <!-- ko template: {
                                foreach: hrmTemplateIf(!isEmployeesCalculated(), $data),
                                afterAdd: hrmFadeAfterAddFactory(200, 200),
                                beforeRemove: hrmFadeBeforeRemoveFactory(200)
                            } -->
                                <div class="hrm-button hrm-basic-button hrm-accent-button employee-forecast-page__form-employees-section-action
                                            employee-forecast-page__add-employees-button"
                                     data-bind="click: function () {calculateEmployees();}">
                                    Добавить сотрудников
                                </div>
                            <!-- /ko -->

                            <!-- ko template: {
                                foreach: hrmTemplateIf(isEmployeesCalculated(), $data),
                                afterAdd: hrmFadeAfterAddFactory(200, 200),
                                beforeRemove: hrmFadeBeforeRemoveFactory(200)
                            } -->
                                <div class="hrm-button hrm-basic-button employee-forecast-page__form-employees-section-action
                                            employee-forecast-page__recalculate-employees-button"
                                     data-bind="click: function() {recalculateEmployees();}">
                                    Пересчитать сотрудников
                                </div>

                                <span class="employee-forecast-page__form-employees-section-title">Сотрудники</span>

                                <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                                    <div class="hrm-table__fixed-section-container
                                                employee-forecast-page__employees-table-fixed-section-container">
                                        <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.tabletMaxWidth -->
                                            <table class="hrm-table__fixed-section hrm-table__fixed-section--position_left
                                                          employee-forecast-page__employees-table
                                                          employee-forecast-page__employees-table-fixed-section"
                                                   data-bind="hrmTable">
                                                <thead>
                                                <tr>
                                                    <th>
                                                        Сотрудник
                                                    </th>
                                                </tr>
                                                </thead>

                                                <tbody>
                                                <!-- ko foreach: {data: formModel().positions, as: 'position'} -->
                                                    <tr class="employee-forecast-page__employees-table-position-row">
                                                        <td class="employee-forecast-page__employees-table-position-name-cell">
                                                            <div class="hrm-table__cell-content">
                                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-plus-icon-button
                                                                               hrm-circle-icon-button--theme_neutral employee-forecast-page__employees-table-position-name-cell-add-button"
                                                                        data-bind="click: function() {$root.addEmployee(position);}" title="Добавить сотрудника">
                                                                </button>
                                                                <span class="employee-forecast-page__employees-table-position-name-cell-name"
                                                                      data-bind="text: name">
                                                                </span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <!-- ko foreach: {
                                                        data: employees,
                                                        as: 'employee',
                                                        afterAdd: hrmFadeAfterAddFactory(200),
                                                        beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                    } -->
                                                        <tr class="employee-forecast-page__employees-table-employee-row"
                                                            data-bind="
                                                                css: {
                                                                    'employee-forecast-page__employees-table-employee-row--multi-interval': employee.workingIntervals().length > 1
                                                                }
                                                            "
                                                        >
                                                            <td class="employee-forecast-page__employees-table-employee-name-cell"
                                                                data-bind="style: {height: employee.workingIntervals().length * 40 }">
                                                                <div class="employee-forecast-page__employees-table-employee">
                                                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-times-icon-button
                                                                                   hrm-circle-icon-button--theme_secondary
                                                                                   employee-forecast-page__employees-table-employee-remove-button"
                                                                            data-bind="click: function() {position.employees.remove(employee);}"
                                                                            title="Удалить сотрудника">
                                                                    </button>
                                                                    <span class="employee-forecast-page__employees-table-employee-name"
                                                                          data-bind="text: name">
                                                                    </span>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    <!-- /ko -->
                                                <!-- /ko -->
                                                </tbody>
                                            </table>
                                        <!-- /ko -->

                                        <div class="hrm-table__scrollable-wrapper">
                                            <table class="employee-forecast-page__employees-table" data-bind="hrmTable">
                                                <thead>
                                                <tr>
                                                    <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.tabletMaxWidth -->
                                                        <th class="employee-forecast-page__employees-table-name-head-cell">
                                                            Сотрудник
                                                        </th>
                                                    <!-- /ko -->
                                                    <th class="employee-forecast-page__employees-table-working-intervals-head-cell">
                                                        <div class="hrm-table__head-cell-content">
                                                            Начало/конец работы
                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Начало/конец работы'">
                                                            </button>
                                                        </div>
                                                    </th>
                                                    <th>
                                                        <div class="hrm-table__head-cell-content">
                                                            Рабочее время
                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Рабочее время'">
                                                            </button>
                                                        </div>
                                                    </th>
                                                    <th>
                                                        <div class="hrm-table__head-cell-content">
                                                            <span>Оклад, <i class="far fa-ruble-sign"></i>/час</span>
                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Оклад, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;/час'">
                                                            </button>
                                                        </div>
                                                    </th>
                                                    <th>
                                                        <div class="hrm-table__head-cell-content">
                                                            Норматив выручки
                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Норматив выручки'">
                                                            </button>
                                                        </div>
                                                    </th>

                                                    <th class="employee-forecast-page__employees-table-salary-bulk-head-cell">
                                                        <div class="hrm-table__head-cell-content">
                                                            <span>Основная часть зп, <i class="far fa-ruble-sign"></i></span>
                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Основная часть зп, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                            </button>
                                                        </div>
                                                    </th>

                                                    <th>
                                                        <div class="hrm-table__head-cell-content">
                                                            <span>Премия, <i class="far fa-ruble-sign"></i></span>
                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Прем., &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                            </button>
                                                        </div>
                                                    </th>

                                                    <th>
                                                        <div class="hrm-table__head-cell-content">
                                                            <span>Депрем, <i class="far fa-ruble-sign"></i></span>
                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'Депрем, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                            </button>
                                                        </div>
                                                    </th>

                                                    <th>
                                                        <div class="hrm-table__head-cell-content">
                                                            <span>К выплате, <i class="far fa-ruble-sign"></i></span>
                                                            <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                           hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                    data-bind="hrmTooltip, hrmTooltipText: 'К выплате, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                            </button>
                                                        </div>
                                                    </th>
                                                </tr>
                                                </thead>

                                                <tbody>
                                                <!-- ko foreach: {data: formModel().positions, as: 'position'} -->
                                                    <tr class="employee-forecast-page__employees-table-position-row">
                                                        <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.tabletMaxWidth -->
                                                            <td class="employee-forecast-page__employees-table-position-name-cell" colspan="3">
                                                                <div class="hrm-table__cell-content">
                                                                    <button class="hrm-button hrm-circle-icon-button hrm-circle-plus-icon-button
                                                                                   hrm-circle-icon-button--theme_neutral employee-forecast-page__employees-table-position-name-cell-add-button"
                                                                            data-bind="click: function() {$root.addEmployee(position);}" title="Добавить сотрудника">
                                                                    </button>
                                                                    <span class="employee-forecast-page__employees-table-position-name-cell-name"
                                                                          data-bind="text: name">
                                                                    </span>
                                                                </div>
                                                            </td>
                                                        <!-- /ko -->
                                                        <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.tabletMaxWidth -->
                                                            <td colspan="2"></td>
                                                        <!-- /ko -->
                                                        <!-- ko let: {editableCell: ko.observable(null)} -->
                                                            <td class="employee-forecast-page__employees-table-rate-cell"
                                                                data-bind="hrmTableEditableCell: editableCell">
                                                                <input data-bind="
                                                                    textInput: rate,
                                                                    event: {
                                                                        input: function () {
                                                                            $root.onRateInput(position);
                                                                        }
                                                                    },
                                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                                    hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                    hrmTableEditableCellInputControl,
                                                                    hrmTableEditableCellInputControlOwner: editableCell
                                                                " placeholder="0">
                                                            </td>
                                                        <!-- /ko -->
                                                        <td class="employee-forecast-page__employees-table-statistics-cell" colspan="5">
                                                            ФОТ — <b>34%</b>, норматив выработки — <b>90%</b>
                                                        </td>
                                                    </tr>
                                                    <!-- ko foreach: {
                                                        data: employees,
                                                        as: 'employee',
                                                        afterAdd: hrmFadeAfterAddFactory(200),
                                                        beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                    } -->
                                                        <tr class="employee-forecast-page__employees-table-employee-row"
                                                            data-bind="
                                                                css: {
                                                                    'employee-forecast-page__employees-table-employee-row--multi-interval': employee.workingIntervals().length > 1
                                                                }
                                                            "
                                                        >
                                                            <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.tabletMaxWidth -->
                                                                <td class="employee-forecast-page__employees-table-employee-name-cell"
                                                                    data-bind="attr: {rowspan: employee.workingIntervals().length}">
                                                                    <div class="employee-forecast-page__employees-table-employee">
                                                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-times-icon-button
                                                                                       hrm-circle-icon-button--theme_secondary
                                                                                       employee-forecast-page__employees-table-employee-remove-button"
                                                                                data-bind="click: function() {position.employees.remove(employee);}" title="Удалить сотрудника">
                                                                        </button>
                                                                        <span class="employee-forecast-page__employees-table-employee-name"
                                                                              data-bind="text: name">
                                                                        </span>
                                                                    </div>
                                                                </td>
                                                            <!-- /ko -->
                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                <td class="employee-forecast-page__employees-table-interval-cell"
                                                                    data-bind="
                                                                        hrmTableEditableCell: editableCell,
                                                                        hrmTableEditableCellError: $root.editableCellControlErrorExtractor(employee.workingIntervals()[0].value),
                                                                    ">
                                                                    <div class="hrm-table__cell-content hrm-table__editable-cell-content">
                                                                        <input data-bind="
                                                                            textInput: employee.workingIntervals()[0].value,
                                                                            hrmMask,
                                                                            hrmMaskPattern: '99:99 – 99:99',
                                                                            hrmTableEditableCellInputControl,
                                                                            hrmTableEditableCellInputControlOwner: editableCell
                                                                        " placeholder="00:00 - 00:00">
                                                                        <div class="employee-forecast-page__employees-table-interval-cell-actions">
                                                                            <!-- ko if: employee.workingIntervals().length > 1 -->
                                                                                <button class="hrm-button hrm-icon-button hrm-times-icon-button
                                                                                               hrm-icon-button--theme_negative
                                                                                               employee-forecast-page__employees-table-interval-cell-remove-button"
                                                                                        data-bind="
                                                                                            click: function () {employee.workingIntervals.splice(0, 1);},
                                                                                            attr: {title: 'Удалить интервал ' + employee.workingIntervals()[0].value()}
                                                                                        ">
                                                                                </button>
                                                                            <!-- /ko -->

                                                                            <div class="hrm-spacer"></div>

                                                                            <!-- ko if: employee.workingIntervals().length === 1 -->
                                                                                <button class="hrm-button hrm-icon-button hrm-plus-icon-button
                                                                                               hrm-icon-button--theme_positive
                                                                                               employee-forecast-page__employees-table-interval-cell-add-button"
                                                                                        title="Добавить рабочий интервал"
                                                                                        data-bind="click: function () {$root.addWorkingInterval(employee);}">
                                                                                </button>
                                                                            <!-- /ko -->
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                            <!-- /ko -->
                                                            <td class="employee-forecast-page__employees-table-working-hours-cell"
                                                                data-bind="
                                                                    text: $root.formatDuration($root.getEmployeeWorkingHours(employee)()),
                                                                    attr: {rowspan: employee.workingIntervals().length}
                                                                ">
                                                            </td>
                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                <td class="employee-forecast-page__employees-table-rate-cell" data-bind="
                                                                    hrmTableEditableCell: editableCell,
                                                                    attr: {rowspan: employee.workingIntervals().length}
                                                                ">
                                                                    <input data-bind="
                                                                        textInput: employee.rate,
                                                                        event: {
                                                                            input: function () {
                                                                                $root.onEmployeeRateInput(position);
                                                                            }
                                                                        },
                                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                        hrmTableEditableCellInputControl,
                                                                        hrmTableEditableCellInputControlOwner: editableCell
                                                                    " placeholder="0">
                                                                </td>
                                                            <!-- /ko -->
                                                            <td class="employee-forecast-page__employees-table-return-rate-cell"
                                                                data-bind="
                                                                    html: returnRate + ' ' + $root.getUnitsSuffixHtml(position.units()),
                                                                    attr: {rowspan: employee.workingIntervals().length}
                                                                ">
                                                            </td>
                                                            <td class="employee-forecast-page__employees-table-salary-bulk-cell"
                                                                data-bind="text: $root.formatDecimal($root.getEmployeeSalaryBulk(employee)()), attr: {rowspan: employee.workingIntervals().length}">
                                                            </td>
                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                <td class="employee-forecast-page__employees-table-bonus-cell" data-bind="
                                                                    hrmTableEditableCell: editableCell,
                                                                    attr: {rowspan: employee.workingIntervals().length}
                                                                ">
                                                                    <input data-bind="
                                                                        textInput: employee.bonus,
                                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                        hrmTableEditableCellInputControl,
                                                                        hrmTableEditableCellInputControlOwner: editableCell
                                                                    " placeholder="0">
                                                                </td>
                                                            <!-- /ko -->
                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                <td class="employee-forecast-page__employees-table-fine-cell" data-bind="
                                                                    hrmTableEditableCell: editableCell,
                                                                    attr: {rowspan: employee.workingIntervals().length}
                                                                ">
                                                                    <input data-bind="
                                                                        textInput: employee.fine,
                                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                        hrmTableEditableCellInputControl,
                                                                        hrmTableEditableCellInputControlOwner: editableCell
                                                                    " placeholder="0">
                                                                </td>
                                                            <!-- /ko -->
                                                            <td class="employee-forecast-page__employees-table-salary-cell"
                                                                data-bind="
                                                                    text: $root.formatDecimal($root.getEmployeeSalary(employee)()),
                                                                    attr: {rowspan: employee.workingIntervals().length}
                                                                ">
                                                            </td>
                                                        </tr>

                                                        <!-- ko foreach: {data: workingIntervals().slice(1), as: 'workingInterval'} -->
                                                            <tr class="employee-forecast-page__employees-table-employee-row"
                                                                data-bind="
                                                                    css: {
                                                                        'employee-forecast-page__employees-table-employee-row--multi-interval': employee.workingIntervals().length > 1
                                                                    }
                                                                "
                                                            >
                                                                <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                    <td class="employee-forecast-page__employees-table-interval-cell"
                                                                        data-bind="
                                                                            hrmTableEditableCell: editableCell,
                                                                            hrmTableEditableCellError: $root.editableCellControlErrorExtractor(workingInterval.value),
                                                                        ">
                                                                        <div class="hrm-table__cell-content hrm-table__editable-cell-content">
                                                                            <input data-bind="
                                                                                textInput: workingInterval.value,
                                                                                hrmMask,
                                                                                hrmMaskPattern: '99:99 – 99:99',
                                                                                hrmTableEditableCellInputControl,
                                                                                hrmTableEditableCellInputControlOwner: editableCell
                                                                            " placeholder="00:00 - 00:00">
                                                                            <div class="employee-forecast-page__employees-table-interval-cell-actions">
                                                                                <button class="hrm-button hrm-icon-button hrm-times-icon-button
                                                                                               hrm-icon-button--theme_negative
                                                                                               employee-forecast-page__employees-table-interval-cell-remove-button"
                                                                                        data-bind="
                                                                                            click: function () {employee.workingIntervals.remove(workingInterval);},
                                                                                            attr: {title: 'Удалить интервал ' + workingInterval.value()}
                                                                                        ">
                                                                                </button>

                                                                                <div class="hrm-spacer"></div>

                                                                                <!-- ko if: employee.workingIntervals().length === workingIntervalIndex() + 2  -->
                                                                                    <button class="hrm-button hrm-icon-button hrm-plus-icon-button
                                                                                                   hrm-icon-button--theme_positive
                                                                                                   employee-forecast-page__employees-table-interval-cell-add-button"
                                                                                            title="Добавить рабочий интервал"
                                                                                            data-bind="click: function () {$root.addWorkingInterval(employee);}">
                                                                                    </button>
                                                                                <!-- /ko -->
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                <!-- /ko -->
                                                            </tr>
                                                        <!-- /ko -->
                                                    <!-- /ko -->
                                                <!-- /ko -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                <!-- /ko -->

                                <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                    <div class="employee-forecast-page__employees-table">
                                        <!-- ko foreach: {data: formModel().positions, as: 'position'} -->
                                            <!-- ko let: {isOpen: ko.observable(positionIndex() === 0)} -->
                                                <div class="employee-forecast-page__employees-table-position-section"
                                                     data-bind="css: {'employee-forecast-page__employees-table-position-section--open': isOpen() && employees().length > 0}">
                                                    <div class="employee-forecast-page__employees-table-position-section-header">
                                                        <button class="hrm-button hrm-circle-icon-button
                                                                       hrm-circle-icon-button--theme_neutral
                                                                       hrm-circle-arrow-down-icon-button
                                                                       employee-forecast-page__employees-table-position-section-header-toggle-button"
                                                                data-bind="click: function() {isOpen(!isOpen());}">
                                                        </button>

                                                        <span class="employee-forecast-page__employees-table-position-section-header-title"
                                                              data-bind="
                                                                text: name,
                                                                click: function() {isOpen(!isOpen());}
                                                              ">
                                                        </span>

                                                        <div class="hrm-spacer"></div>

                                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-plus-icon-button
                                                                       hrm-circle-icon-button--theme_neutral employee-forecast-page__employees-table-position-section-header-add-button"
                                                                data-bind="click: function() {$root.addEmployee(position); isOpen(true);}" title="Добавить сотрудника">
                                                        </button>
                                                    </div>

                                                    <div class="employee-forecast-page__employees-table-position-section-body"
                                                         data-bind="hrmSlide, hrmSlideValue: isOpen() && employees().length > 0">
                                                        <div class="employee-forecast-page__employees-table-position-section-body-header">
                                                            <!-- ko let: {formField: ko.observable(null)} -->
                                                                <div class="employee-forecast-page__employees-table-position-section-body-header-rate-form-field" data-bind="
                                                                    component: {
                                                                        name: 'hrm-form-field',
                                                                        params: {exportAs: formField}
                                                                    }
                                                                ">
                                                                    <hrm-slot name="label">
                                                                        <label data-bind="hrmFormFieldLabel, hrmFormFieldLabelOwner: formField">
                                                                            Оклад, <i class="far fa-ruble-sign"></i>/час
                                                                        </label>
                                                                    </hrm-slot>

                                                                    <input data-bind="
                                                                        textInput: position.rate,
                                                                        event: {
                                                                            input: function () {
                                                                                $root.onRateInput(position);
                                                                            }
                                                                        },
                                                                        hrmFormFieldInputControl,
                                                                        hrmFormFieldInputControlOwner: formField
                                                                    ">
                                                                </div>
                                                            <!-- /ko -->

                                                            <span class="employee-forecast-page__employees-table-position-section-body-header-statistics">
                                                                ФОТ — <b>34%</b><br>норматив выраб. — <b>90%</b>
                                                            </span>
                                                        </div>

                                                        <!-- ko if: employees().length > 0 -->
                                                            <div class="hrm-table__fixed-section-container
                                                                        employee-forecast-page__employees-table-position-section-table-fixed-section-container">
                                                                <table class="hrm-table__fixed-section hrm-table__fixed-section--position_left
                                                                              employee-forecast-page__employees-table-position-section-table-fixed-section"
                                                                       data-bind="hrmTable">
                                                                    <thead>
                                                                    <tr>
                                                                        <th class="employee-forecast-page__employees-table-name-head-cell">
                                                                            Сотрудник
                                                                        </th>
                                                                    </tr>
                                                                    <tr>
                                                                        <th class="employee-forecast-page__employees-table-working-intervals-head-cell"
                                                                            data-bind="
                                                                                style: {height: $root.getPositionMaxWorkingIntervalCount(position)() * 40},
                                                                                css: {
                                                                                    'employee-forecast-page__employees-table-working-intervals-head-cell--single-line': $root.getPositionMaxWorkingIntervalCount(position)() === 1
                                                                                }
                                                                            ">
                                                                            <div class="hrm-table__head-cell-content">
                                                                                Начало/конец работы
                                                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                                   hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                                        data-bind="hrmTooltip, hrmTooltipText: 'Начало/конец работы'">
                                                                                </button>
                                                                            </div>
                                                                        </th>
                                                                    </tr>
                                                                    <tr>
                                                                        <th>
                                                                            <div class="hrm-table__head-cell-content">
                                                                                Рабочее время
                                                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                                   hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                                        data-bind="hrmTooltip, hrmTooltipText: 'Рабочее время'">
                                                                                </button>
                                                                            </div>
                                                                        </th>
                                                                    </tr>
                                                                    <tr>
                                                                        <th>
                                                                            <div class="hrm-table__head-cell-content">
                                                                                <span>Оклад, <i class="far fa-ruble-sign"></i>/час</span>
                                                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                                   hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                                        data-bind="hrmTooltip, hrmTooltipText: 'Оклад, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;/час'">
                                                                                </button>
                                                                            </div>
                                                                        </th>
                                                                    </tr>
                                                                    <tr>
                                                                        <th>
                                                                            <div class="hrm-table__head-cell-content">
                                                                                Норматив выручки
                                                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                                   hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                                        data-bind="hrmTooltip, hrmTooltipText: 'Норматив выручки'">
                                                                                </button>
                                                                            </div>
                                                                        </th>
                                                                    </tr>

                                                                    <tr>
                                                                        <th class="employee-forecast-page__employees-table-salary-bulk-head-cell">
                                                                            <div class="hrm-table__head-cell-content">
                                                                                <span>Основная часть зп, <i class="far fa-ruble-sign"></i></span>
                                                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                                   hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                                        data-bind="hrmTooltip, hrmTooltipText: 'Основная часть зп, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                                                </button>
                                                                            </div>
                                                                        </th>
                                                                    </tr>

                                                                    <tr>
                                                                        <th>
                                                                            <div class="hrm-table__head-cell-content">
                                                                                <span>Прем., <i class="far fa-ruble-sign"></i></span>
                                                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                                   hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                                        data-bind="hrmTooltip, hrmTooltipText: 'Прем., &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                                                </button>
                                                                            </div>
                                                                        </th>
                                                                    </tr>

                                                                    <tr>
                                                                        <th>
                                                                            <div class="hrm-table__head-cell-content">
                                                                                <span>Депрем, <i class="far fa-ruble-sign"></i></span>
                                                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                                   hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                                        data-bind="hrmTooltip, hrmTooltipText: 'Депрем, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                                                </button>
                                                                            </div>
                                                                        </th>
                                                                    </tr>

                                                                    <tr>
                                                                        <th>
                                                                            <div class="hrm-table__head-cell-content">
                                                                                <span>К выплате, <i class="far fa-ruble-sign"></i></span>
                                                                                <button class="hrm-button hrm-circle-icon-button hrm-circle-info-icon-button
                                                                                   hrm-table__head-cell-info-button hrm-circle-icon-button--theme_neutral"
                                                                                        data-bind="hrmTooltip, hrmTooltipText: 'К выплате, &lt;i class=&quot;far fa-ruble-sign&quot;&gt;&lt;/i&gt;'">
                                                                                </button>
                                                                            </div>
                                                                        </th>
                                                                    </tr>

                                                                    <tr>
                                                                        <th>
                                                                            Удалить
                                                                        </th>
                                                                    </tr>
                                                                    </thead>
                                                                </table>

                                                                <div class="hrm-table__scrollable-wrapper">
                                                                    <table class="employee-forecast-page__employees-table-position-section-table"
                                                                           data-bind="hrmTable">
                                                                        <tbody>
                                                                            <tr>
                                                                                <!-- ko foreach: {
                                                                                    data: employees,
                                                                                    as: 'employee',
                                                                                    afterAdd: hrmFadeAfterAddFactory(200),
                                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                                } -->
                                                                                    <td class="employee-forecast-page__employees-table-employee-name-cell"
                                                                                        data-bind="text: name">
                                                                                    </td>
                                                                                <!-- /ko -->
                                                                            </tr>

                                                                            <!-- ko foreach: {data: _.range($root.getPositionMaxWorkingIntervalCount(position)()), as: 'workingIntervalIndex'} -->
                                                                                <tr>
                                                                                    <!-- ko foreach: {
                                                                                        data: position.employees,
                                                                                        as: 'employee',
                                                                                        afterAdd: hrmFadeAfterAddFactory(200),
                                                                                        beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                                    } -->
                                                                                        <!-- ko if: workingIntervalIndex < workingIntervals().length -->
                                                                                            <!-- ko let: {
                                                                                                editableCell: ko.observable(null),
                                                                                                workingInterval: workingIntervals()[workingIntervalIndex]
                                                                                            } -->
                                                                                                <td class="employee-forecast-page__employees-table-interval-cell"
                                                                                                    data-bind="
                                                                                                        hrmTableEditableCell: editableCell,
                                                                                                        hrmTableEditableCellError: $root.editableCellControlErrorExtractor(workingInterval.value),
                                                                                                        css: {'employee-forecast-page__employees-table-interval-cell--single-line': $root.getPositionMaxWorkingIntervalCount(position)() === 1}
                                                                                                    ">
                                                                                                    <div class="hrm-table__cell-content hrm-table__editable-cell-content">
                                                                                                        <input data-bind="
                                                                                                            textInput: workingInterval.value,
                                                                                                            hrmMask,
                                                                                                            hrmMaskPattern: '99:99 – 99:99',
                                                                                                            hrmTableEditableCellInputControl,
                                                                                                            hrmTableEditableCellInputControlOwner: editableCell
                                                                                                        " placeholder="00:00 - 00:00">
                                                                                                        <div class="employee-forecast-page__employees-table-interval-cell-actions">
                                                                                                            <!-- ko if: employee.workingIntervals().length > 1 -->
                                                                                                                <button class="hrm-button hrm-icon-button hrm-times-icon-button
                                                                                                                               hrm-icon-button--theme_negative
                                                                                                                               employee-forecast-page__employees-table-interval-cell-remove-button"
                                                                                                                        data-bind="
                                                                                                                            click: function () {employee.workingIntervals.remove(workingInterval);},
                                                                                                                            attr: {title: 'Удалить интервал ' + workingInterval.value()}
                                                                                                                        ">
                                                                                                                </button>
                                                                                                            <!-- /ko -->

                                                                                                            <div class="hrm-spacer"></div>

                                                                                                            <!-- ko if: employee.workingIntervals().length === workingIntervalIndex + 1  -->
                                                                                                                <button class="hrm-button hrm-icon-button hrm-plus-icon-button
                                                                                                                               hrm-icon-button--theme_positive
                                                                                                                               employee-forecast-page__employees-table-interval-cell-add-button"
                                                                                                                        title="Добавить рабочий интервал"
                                                                                                                        data-bind="click: function () {$root.addWorkingInterval(employee);}">
                                                                                                                </button>
                                                                                                            <!-- /ko -->
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </td>
                                                                                            <!-- /ko -->
                                                                                        <!-- /ko -->

                                                                                        <!-- ko if: workingIntervalIndex >= workingIntervals().length -->
                                                                                            <td class="employee-forecast-page__employees-table-interval-cell"></td>
                                                                                        <!-- /ko -->
                                                                                    <!-- /ko -->
                                                                                </tr>
                                                                            <!-- /ko -->

                                                                            <tr>
                                                                                <!-- ko foreach: {
                                                                                    data: employees,
                                                                                    as: 'employee',
                                                                                    afterAdd: hrmFadeAfterAddFactory(200),
                                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                                } -->
                                                                                    <td class="employee-forecast-page__employees-table-working-hours-cell"
                                                                                        data-bind="text: $root.formatDuration($root.getEmployeeWorkingHours(employee)())">
                                                                                    </td>
                                                                                <!-- /ko -->
                                                                            </tr>

                                                                            <tr>
                                                                                <!-- ko foreach: {
                                                                                    data: employees,
                                                                                    as: 'employee',
                                                                                    afterAdd: hrmFadeAfterAddFactory(200),
                                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                                } -->
                                                                                    <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                        <td class="employee-forecast-page__employees-table-rate-cell"
                                                                                            data-bind="hrmTableEditableCell: editableCell">
                                                                                            <input data-bind="
                                                                                                textInput: employee.rate,
                                                                                                event: {
                                                                                                    input: function () {
                                                                                                        $root.onEmployeeRateInput(position);
                                                                                                    }
                                                                                                },
                                                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                                                hrmTableEditableCellInputControl,
                                                                                                hrmTableEditableCellInputControlOwner: editableCell
                                                                                            " placeholder="0">
                                                                                        </td>
                                                                                    <!-- /ko -->
                                                                                <!-- /ko -->
                                                                            </tr>

                                                                            <tr>
                                                                                <!-- ko foreach: {
                                                                                    data: employees,
                                                                                    as: 'employee',
                                                                                    afterAdd: hrmFadeAfterAddFactory(200),
                                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                                } -->
                                                                                    <td class="employee-forecast-page__employees-table-return-rate-cell"
                                                                                        data-bind="html: returnRate + ' ' + $root.getUnitsSuffixHtml(position.units())">
                                                                                    </td>
                                                                                <!-- /ko -->
                                                                            </tr>

                                                                            <tr>
                                                                                <!-- ko foreach: {
                                                                                    data: employees,
                                                                                    as: 'employee',
                                                                                    afterAdd: hrmFadeAfterAddFactory(200),
                                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                                } -->
                                                                                    <td class="employee-forecast-page__employees-table-salary-bulk-cell"
                                                                                        data-bind="text: $root.formatDecimal($root.getEmployeeSalaryBulk(employee)())">
                                                                                    </td>
                                                                                <!-- /ko -->
                                                                            </tr>

                                                                            <tr>
                                                                                <!-- ko foreach: {
                                                                                    data: employees,
                                                                                    as: 'employee',
                                                                                    afterAdd: hrmFadeAfterAddFactory(200),
                                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                                } -->
                                                                                    <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                        <td class="employee-forecast-page__employees-table-bonus-cell"
                                                                                            data-bind="hrmTableEditableCell: editableCell">
                                                                                            <input data-bind="
                                                                                                textInput: employee.bonus,
                                                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                                                hrmTableEditableCellInputControl,
                                                                                                hrmTableEditableCellInputControlOwner: editableCell
                                                                                            " placeholder="0">
                                                                                        </td>
                                                                                    <!-- /ko -->
                                                                                <!-- /ko -->
                                                                            </tr>

                                                                            <tr>
                                                                                <!-- ko foreach: {
                                                                                    data: employees,
                                                                                    as: 'employee',
                                                                                    afterAdd: hrmFadeAfterAddFactory(200),
                                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                                } -->
                                                                                    <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                        <td class="employee-forecast-page__employees-table-fine-cell"
                                                                                            data-bind="hrmTableEditableCell: editableCell">
                                                                                            <input data-bind="
                                                                                                textInput: employee.fine,
                                                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                                                hrmTableEditableCellInputControl,
                                                                                                hrmTableEditableCellInputControlOwner: editableCell
                                                                                            " placeholder="0">
                                                                                        </td>
                                                                                    <!-- /ko -->
                                                                                <!-- /ko -->
                                                                            </tr>

                                                                            <tr>
                                                                                <!-- ko foreach: {
                                                                                    data: employees,
                                                                                    as: 'employee',
                                                                                    afterAdd: hrmFadeAfterAddFactory(200),
                                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                                } -->
                                                                                    <td class="employee-forecast-page__employees-table-salary-cell"
                                                                                        data-bind="text: $root.formatDecimal($root.getEmployeeSalary(employee)())">
                                                                                    </td>
                                                                                <!-- /ko -->
                                                                            </tr>

                                                                            <tr>
                                                                                <!-- ko foreach: {
                                                                                    data: employees,
                                                                                    as: 'employee',
                                                                                    afterAdd: hrmFadeAfterAddFactory(200),
                                                                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                                                } -->
                                                                                    <td class="employee-forecast-page__employees-table-remove-cell">
                                                                                        <button class="hrm-button hrm-circle-icon-button hrm-circle-times-icon-button
                                                                                                       hrm-circle-icon-button--theme_secondary"
                                                                                                data-bind="click: function() {position.employees.remove(employee);}" title="Удалить сотрудника">
                                                                                        </button>
                                                                                    </td>
                                                                                <!-- /ko -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        <!-- /ko -->
                                                    </div>
                                                </div>
                                            <!-- /ko -->
                                        <!-- /ko -->
                                    </div>
                                <!-- /ko -->

                                <div class="employee-forecast-page__form-employees-section-additional-actions-list">
                                    <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_positive
                                                   hrm-button-with-excel-icon employee-forecast-page__form-employees-section-additional-actions-list-item">
                                        Выгрузить в excel
                                    </button>

                                    <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_secondary
                                                   hrm-button-with-printer-icon employee-forecast-page__form-employees-section-additional-actions-list-item">
                                        Распечатать
                                    </button>
                                </div>
                            <!-- /ko -->
                        </div>
                    <!-- /ko -->
                </div>
            </div>
            <div class="hrm-scaffold__footer employee-forecast-page__footer">
                <span class="employee-forecast-page__footer-text" data-bind="html: footerTextHtml"></span>

                <button class="hrm-button hrm-basic-button hrm-primary-button employee-forecast-page__footer-login-button">
                    <span class="hrm-primary-button__content">Войти/зарегистрироваться</span>
                    <span class="hrm-primary-button__background hrm-primary-button__hover-background"></span>
                    <span class="hrm-primary-button__background hrm-primary-button__active-background"></span>
                </button>
            </div>
        </div>
    </div>
    @@include('../../base/_page-scripts.html')
    @@include('./_employee-forecast-page.js.html')
</body>
</html>