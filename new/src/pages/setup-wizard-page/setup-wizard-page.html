<!DOCTYPE html>
<html class="hrm-page setup-wizard-page hrm-page--initializing"
      data-bind="childrenComplete: childrenComplete" lang="ru">
<head>
    @@include('../../base/_page-head-content.html')
</head>

<body>
    <div class="hrm-scaffold">
        <div class="hrm-scaffold__body">
            <div class="hrm-scaffold__content setup-wizard-page__content">
                <div class="hrm-stepper setup-wizard-page__stepper"
                     data-bind="css: {'hrm-stepper--dense': viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth}">
                    <!-- ko let: {step: 1} -->
                        <div class="hrm-stepper__step" data-bind="css: {'hrm-stepper__step--active': activeStep() === step}">
                            <div class="hrm-stepper__step-content"
                                 data-bind="click: function () {if(maxAvailableStep() >= step) {activeStep(step);}}">
                                <span class="hrm-stepper__step-label">Тип предприятия</span>
                                <div class="hrm-stepper__step-index-number" data-bind="text: step"></div>
                            </div>
                        </div>
                    <!-- /ko -->

                    <!-- ko let: {step: 2} -->
                        <div class="hrm-stepper__step" data-bind="css: {'hrm-stepper__step--active': activeStep() === step}">
                            <div class="hrm-stepper__step-content"
                                 data-bind="click: function () {if(maxAvailableStep() >= step) {activeStep(step);}}">
                                <span class="hrm-stepper__step-label">Категории</span>
                                <div class="hrm-stepper__step-index-number" data-bind="text: step"></div>
                            </div>
                        </div>
                    <!-- /ko -->

                    <!-- ko let: {step: 3} -->
                        <div class="hrm-stepper__step" data-bind="css: {'hrm-stepper__step--active': activeStep() === step}">
                            <div class="hrm-stepper__step-content"
                                 data-bind="click: function () {if(maxAvailableStep() >= step) {activeStep(step);}}">
                                <span class="hrm-stepper__step-label">График работы</span>
                                <div class="hrm-stepper__step-index-number" data-bind="text: step"></div>
                            </div>
                        </div>
                    <!-- /ko -->

                    <!-- ko let: {step: 4} -->
                        <div class="hrm-stepper__step" data-bind="css: {'hrm-stepper__step--active': activeStep() === step}">
                            <div class="hrm-stepper__step-content"
                                 data-bind="click: function () {if(maxAvailableStep() >= step) {activeStep(step);}}">
                                <span class="hrm-stepper__step-label">Оборот и нагрузка</span>
                                <div class="hrm-stepper__step-index-number" data-bind="text: step"></div>
                            </div>
                        </div>
                    <!-- /ko -->

                    <!-- ko let: {step: 5} -->
                        <div class="hrm-stepper__step" data-bind="css: {'hrm-stepper__step--active': activeStep() === step}">
                            <div class="hrm-stepper__step-content"
                                 data-bind="click: function () {if(maxAvailableStep() >= step) {activeStep(step);}}">
                                <span class="hrm-stepper__step-label">Должности</span>
                                <div class="hrm-stepper__step-index-number" data-bind="text: step"></div>
                            </div>
                        </div>
                    <!-- /ko -->

                    <!-- ko let: {step: 6} -->
                        <div class="hrm-stepper__step" data-bind="css: {'hrm-stepper__step--active': activeStep() === step}">
                            <div class="hrm-stepper__step-content"
                                 data-bind="click: function () {if(maxAvailableStep() >= step) {activeStep(step);}}">
                                <span class="hrm-stepper__step-label">Тип нагрузки</span>
                                <div class="hrm-stepper__step-index-number" data-bind="text: step"></div>
                            </div>
                        </div>
                    <!-- /ko -->
                </div>

                <div class="setup-wizard-page__tab-container" data-bind="using: formModel">
                    <!-- ko template: {
                        foreach: hrmTemplateIf($root.activeStep() === 1, $data),
                        afterAdd: hrmFadeAfterAddFactory(300, 400),
                        beforeRemove: hrmFadeBeforeRemoveFactory(300)
                    } -->
                        <div class="setup-wizard-page__tab-pane setup-wizard-page__company-type-tab-pane">
                            <div class="setup-wizard-page__company-type-selector">
                                <div class="setup-wizard-page__company-type-selector-option setup-wizard-page__company-type-selector-option--value_retail"
                                     data-bind="click: function () {$root.companyTypeStepSelect(0);}">
                                    <div class="setup-wizard-page__company-type-selector-option-icon"></div>

                                    <span class="setup-wizard-page__company-type-selector-option-label">
                                        Розничная торговля
                                    </span>
                                </div>

                                <div class="setup-wizard-page__company-type-selector-option setup-wizard-page__company-type-selector-option--value_foodservice"
                                     data-bind="click: function () {$root.companyTypeStepSelect(1);}">
                                    <div class="setup-wizard-page__company-type-selector-option-icon"></div>

                                    <span class="setup-wizard-page__company-type-selector-option-label">
                                        Общепит / Рестораны
                                    </span>
                                </div>
                            </div>
                        </div>
                    <!-- /ko -->
                    <!-- ko template: {
                        foreach: hrmTemplateIf($root.activeStep() === 2, $data),
                        afterAdd: hrmFadeAfterAddFactory(300, 400),
                        beforeRemove: hrmFadeBeforeRemoveFactory(300)
                    } -->
                        <div class="setup-wizard-page__tab-pane setup-wizard-page__dish-categories-tab-pane">
                            <div class="setup-wizard-page__dish-categories-selector">
                                <span class="setup-wizard-page__dish-categories-selector-title">Выберите категории блюд</span>

                                <div class="setup-wizard-page__dish-categories-selector-list">
                                    <!-- ko foreach: {
                                        data: dishCategories,
                                        beforeRemove: hrmSlideBeforeRemoveFactory(),
                                        afterAdd: hrmSlideAfterAddFactory()
                                    } -->
                                        <div class="setup-wizard-page__dish-categories-selector-item">
                                            <div class="setup-wizard-page__dish-categories-selector-item-content">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="setup-wizard-page__dish-categories-selector-item-field" data-bind="
                                                        hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">Категория</label>

                                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <select data-bind="
                                                                options: $root.dishCategories,
                                                                optionsText: 'name',
                                                                optionsValue: 'id',
                                                                optionsCaption: '',
                                                                value: value,
                                                                hrmSelect, hrmSelectSearchEnabled: true,
                                                                hrmFormFieldSelectControl: control,
                                                                hrmFormFieldSelectControlErrorStateMatcher: $root.dishCategoriesStepFormControlErrorStateMatcher.bind($root)
                                                            ">
                                                                <option></option>
                                                            </select>
                                                        </div>

                                                        <div data-bind="
                                                            component: {name: 'hrm-form-field-error'},
                                                            hrmSlide,
                                                            hrmSlideValue: control() !== null ? control() !== null ? control().errorState : false : false,
                                                            hrmSlideDuration: 150
                                                        ">
                                                            <!-- ko text: $parent.value.error() --><!-- /ko -->
                                                        </div>
                                                    </div>
                                                <!-- /ko -->
                                                <!-- ko if: $parent.dishCategories().length > 1 -->
                                                    <button class="hrm-button hrm-icon-button hrm-trash-icon-button
                                                                   hrm-icon-button--theme_negative
                                                                   setup-wizard-page__dish-categories-selector-item-remove-button"
                                                            title="Удалить"
                                                            data-bind="click: function () {$root.dishCategoriesStepRemove($index());}">
                                                    </button>
                                                <!-- /ko -->
                                            </div>
                                        </div>
                                    <!-- /ko -->
                                </div>

                                <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_neutral
                                            hrm-button-with-plus-icon setup-wizard-page__dish-categories-selector-add-button"
                                     data-bind="click: function () {$root.dishCategoriesStepAdd();}">
                                    Добавить
                                </button>
                            </div>

                            <div class="setup-wizard-page__tab-pane-actions">
                                <button class="hrm-button hrm-basic-button setup-wizard-page__tab-pane-actions-button"
                                        data-bind="click: function () { $root.back(); }">
                                    Назад
                                </button>
                                <button class="hrm-button hrm-basic-button hrm-accent-button setup-wizard-page__tab-pane-actions-button"
                                        data-bind="
                                            click: function () { $root.dishCategoriesStepSubmit(); },
                                            attr: {disabled: $root.isDishCategoriesStepSubmitted() && !$root.isDishCategoriesStepValid()}
                                        "
                                >
                                    Далее
                                </button>
                            </div>
                        </div>
                    <!-- /ko -->
                    <!-- ko template: {
                        foreach: hrmTemplateIf($root.activeStep() === 3, $data),
                        afterAdd: hrmFadeAfterAddFactory(300, 400),
                        beforeRemove: hrmFadeBeforeRemoveFactory(300)
                    } -->
                        <div class="setup-wizard-page__tab-pane setup-wizard-page__schedule-tab-pane">
                            <div class="setup-wizard-page__schedule-selector">
                                <span class="setup-wizard-page__schedule-selector-title">График работы предприятия</span>

                                <div class="setup-wizard-page__schedule-selector-controls">
                                    <div class="setup-wizard-page__schedule-selector-interval-selector">
                                        <span class="setup-wizard-page__schedule-selector-interval-selector-label">
                                            Задать интервал таблицы
                                        </span>

                                        <div class="setup-wizard-page__schedule-selector-interval-selector-control">

                                            <!-- ko let: {control: ko.observable(null)} -->
                                                <div class="setup-wizard-page__schedule-selector-interval-selector-control-field
                                                            setup-wizard-page__schedule-selector-interval-selector-control-start-field"
                                                     data-bind="hrmFormField, hrmFormFieldControlRef: control">
                                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                        <input data-bind="
                                                            textInput: intervalStart,
                                                            hrmTimeAutocompleter,
                                                            hrmMask,
                                                            hrmMaskPattern: 'datetime',
                                                            hrmMaskOptions: {
                                                                inputFormat: 'HH:MM',
                                                                placeholder: ' '
                                                            },
                                                            hrmFormFieldInputControl: control,
                                                            hrmFormFieldInputControlErrorStateMatcher: $root.scheduleStepIntervalBoundaryFormControlErrorStateMatcher.bind($root)
                                                        ">
                                                    </div>
                                                </div>
                                            <!-- /ko -->

                                            <span class="setup-wizard-page__schedule-selector-interval-selector-control-separator">—</span>

                                            <!-- ko let: {control: ko.observable(null)} -->
                                                <div class="setup-wizard-page__schedule-selector-interval-selector-control-field
                                                            setup-wizard-page__schedule-selector-interval-selector-control-end-field"
                                                     data-bind="hrmFormField, hrmFormFieldControlRef: control">
                                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                        <input data-bind="
                                                            textInput: intervalEnd,
                                                            hrmTimeAutocompleter,
                                                            hrmMask,
                                                            hrmMaskPattern: 'datetime',
                                                            hrmMaskOptions: {
                                                                inputFormat: 'HH:MM',
                                                                placeholder: ' '
                                                            },
                                                            hrmFormFieldInputControl: control,
                                                            hrmFormFieldInputControlErrorStateMatcher: $root.scheduleStepIntervalBoundaryFormControlErrorStateMatcher.bind($root)
                                                        ">
                                                    </div>
                                                </div>
                                            <!-- /ko -->
                                        </div>
                                    </div>

                                    <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_positive
                                                   hrm-button-with-check-icon setup-wizard-page__schedule-selector-pick-all-button"
                                            data-bind="click: function() {$root.scheduleStepFill();}">
                                        Заполнить автоматически
                                    </button>
                                </div>

                                <div data-bind="component: {
                                    name: 'setup-wizard-page-schedule-selector-calendar',
                                    params: {
                                        value: schedule,
                                        intervalStart: $root.scheduleStepUsedIntervalStart,
                                        intervalEnd: $root.scheduleStepUsedIntervalEnd,
                                        exportAs: $root.scheduleStepCalendar
                                    }
                                }">
                                </div>

                                <div class="setup-wizard-page__schedule-selector-actions">
                                    <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_negative
                                                hrm-button-with-times-icon setup-wizard-page__schedule-selector-action"
                                         data-bind="click: function() {$root.scheduleStepCalendar().clear();}">
                                        Очистить
                                    </button>
                                </div>
                            </div>

                            <div class="setup-wizard-page__tab-pane-actions">
                                <button class="hrm-button hrm-basic-button setup-wizard-page__tab-pane-actions-button"
                                        data-bind="click: function () { $root.back(); }">
                                    Назад
                                </button>
                                <button class="hrm-button hrm-basic-button hrm-accent-button setup-wizard-page__tab-pane-actions-button"
                                        data-bind="
                                            click: function () { $root.scheduleStepSubmit(); },
                                            attr: {
                                                disabled: !$root.isScheduleStepValid()
                                            }
                                        "
                                >
                                    Далее
                                </button>
                            </div>
                        </div>
                    <!-- /ko -->
                    <!-- ko template: {
                        foreach: hrmTemplateIf($root.activeStep() === 4, $data),
                        afterAdd: hrmFadeAfterAddFactory(300, 400),
                        beforeRemove: hrmFadeBeforeRemoveFactory(300)
                    } -->
                        <div class="setup-wizard-page__tab-pane setup-wizard-page__turnover-tab-pane"
                             data-bind="css: {'setup-wizard-page__turnover-tab-pane--calculated': isTurnoverCalculated}">
                            <div class="setup-wizard-page__turnover-selector">
                                <span class="setup-wizard-page__turnover-selector-title">Оборот предприятия</span>

                                <span class="setup-wizard-page__turnover-selector-description"
                                      data-bind="hrmFade, hrmFadeValue: !isTurnoverCalculated()">
                                    Заполните поля хотя бы для одной категории
                                </span>

                                <!-- ko template: {
                                    foreach: hrmTemplateIf(!isTurnoverCalculated() && !$root.isTurnoverStepCalculating(), $data),
                                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                } -->
                                    <div>
                                        <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                                            <table data-bind="hrmTable, setupWizardPageTurnoverSelectorTable">
                                                <thead>
                                                    <tr>
                                                        <th class="setup-wizard-page__turnover-selector-table-units-head-cell">
                                                            Единица измерения
                                                        </th>
                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Пн</th>
                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Вт</th>
                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Ср</th>
                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Чт</th>
                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Пт</th>
                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Сб</th>
                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Вс</th>
                                                        <th class="setup-wizard-page__turnover-selector-table-week-total-head-cell">
                                                            За неделю
                                                        </th>
                                                    </tr>
                                                </thead>

                                                <tbody data-bind="foreach: {data: dishCategories, as: 'dishCategory'}">
                                                    <tr>
                                                        <td class="setup-wizard-page__turnover-selector-table-category-name-cell"
                                                            data-bind="text: $root.getDishCategory(value()).name" colspan="9">
                                                        </td>
                                                    </tr>

                                                    <tr class="setup-wizard-page__turnover-selector-table-week-row">
                                                        <!-- ko let: {editableCell: ko.observable(null)} -->
                                                            <td class="setup-wizard-page__turnover-selector-table-units-cell"
                                                                data-bind="hrmTableEditableCell: editableCell">
                                                                <select data-bind="
                                                                    value: units,
                                                                    hrmSelect,
                                                                    hrmTableEditableCellSelectControl,
                                                                    hrmTableEditableCellSelectControlOwner: editableCell
                                                                ">
                                                                    <option value="1">Штуки</option>
                                                                    <option value="2">Рубли</option>
                                                                    <option value="3">Норма времени</option>
                                                                </select>
                                                            </td>
                                                        <!-- /ko -->
                                                        <!-- ko foreach: {data: [1, 2, 3, 4, 5, 6, 7], as: 'weekday'} -->
                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                <td class="setup-wizard-page__turnover-selector-table-weekday-cell"
                                                                    data-bind="
                                                                        hrmTableEditableCell: editableCell,
                                                                        hrmTableEditableCellError: $root.turnoverStepWeekdayTotalErrorExtractor(dishCategoryIndex(), weekday)
                                                                    ">
                                                                    <input data-bind="
                                                                        textInput: $parent.week[weekday - 1].weekdayTotal,
                                                                        event: {
                                                                            input: function() {
                                                                                $root.onTurnoverStepWeekdayTotalInput($parentContext.dishCategoryIndex());
                                                                            },
                                                                            change: function() {
                                                                                $root.onTurnoverStepWeekdayTotalChange($parentContext.dishCategoryIndex(), weekdayIndex());
                                                                            }
                                                                        },
                                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                        hrmTableEditableCellInputControl,
                                                                        hrmTableEditableCellInputControlOwner: editableCell
                                                                    " placeholder="0">
                                                                </td>
                                                            <!-- /ko -->
                                                        <!-- /ko -->

                                                        <!-- ko let: {editableCell: ko.observable(null)} -->
                                                            <td class="setup-wizard-page__turnover-selector-table-week-total-cell"
                                                                data-bind="
                                                                    hrmTableEditableCell: editableCell,
                                                                    hrmTableEditableCellError: $root.turnoverStepTableErrorExtractor(weekTotal)
                                                                ">
                                                                <input data-bind="
                                                                    value: weekTotal,
                                                                    event: {
                                                                        change: function (_, event) {
                                                                            $root.onTurnoverStepWeekTotalChange(dishCategoryIndex());
                                                                        }
                                                                    },
                                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                                    hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                    hrmTableEditableCellInputControl,
                                                                    hrmTableEditableCellInputControlOwner: editableCell
                                                                " placeholder="0">
                                                            </td>
                                                        <!-- /ko -->
                                                    </tr>
                                                </tbody>
                                            </table>
                                        <!-- /ko -->

                                        <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                            <div data-bind="setupWizardPageTurnoverSelectorTable">
                                                <!-- ko foreach: {data: dishCategories, as: 'dishCategory'} -->
                                                    <div class="setup-wizard-page__turnover-selector-table-category-section">
                                                        <div class="setup-wizard-page__turnover-selector-table-category-section-header">
                                                            <span class="setup-wizard-page__turnover-selector-table-category-section-header-title"
                                                                  data-bind="text: $root.getDishCategory(value()).name">
                                                            </span>

                                                            <span class="hrm-spacer"></span>

                                                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                                <div class="setup-wizard-page__turnover-selector-table-category-section-header-units-field" data-bind="
                                                                    hrmFormField, hrmFormFieldControlRef: control
                                                                ">
                                                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                        <select data-bind="
                                                                            value: units,
                                                                            hrmSelect,
                                                                            hrmFormFieldSelectControl: control
                                                                        ">
                                                                            <option value="1">Штуки</option>
                                                                            <option value="2">Рубли</option>
                                                                            <option value="3">Норма времени</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            <!-- /ko -->
                                                        </div>

                                                        <div class="setup-wizard-page__turnover-selector-table-category-section-body">
                                                            <div class="hrm-table__fixed-section-container setup-wizard-page__turnover-selector-table-category-section-table-fixed-section-container">
                                                                <table class="hrm-table__fixed-section hrm-table__fixed-section--position_left
                                                                              setup-wizard-page__turnover-selector-table-category-section-table-fixed-section"
                                                                       data-bind="hrmTable">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="setup-wizard-page__turnover-selector-table-category-section-table-week-total-cell">
                                                                                За неделю
                                                                            </th>
                                                                        </tr>
                                                                    </thead>

                                                                    <tbody>
                                                                        <tr>
                                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                <td class="setup-wizard-page__turnover-selector-table-category-section-table-week-total-cell"
                                                                                    data-bind="
                                                                                        hrmTableEditableCell: editableCell,
                                                                                        hrmTableEditableCellError: $root.turnoverStepTableErrorExtractor(weekTotal)
                                                                                    ">
                                                                                    <input data-bind="
                                                                                        value: weekTotal,
                                                                                        event: {
                                                                                            change: function (_, event) {
                                                                                                $root.onTurnoverStepWeekTotalChange(dishCategoryIndex());
                                                                                            }
                                                                                        },
                                                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                                        hrmTableEditableCellInputControl,
                                                                                        hrmTableEditableCellInputControlOwner: editableCell
                                                                                    " placeholder="0">
                                                                                </td>
                                                                            <!-- /ko -->
                                                                        </tr>
                                                                    </tbody>
                                                                </table>

                                                                <div data-bind="component: {name: 'hrm-scrollable-wrapper'}">
                                                                    <table class="setup-wizard-page__turnover-selector-table-category-section-table"
                                                                           data-bind="hrmTable">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Пн</th>
                                                                                <th>Вт</th>
                                                                                <th>Ср</th>
                                                                                <th>Чт</th>
                                                                                <th>Пт</th>
                                                                                <th>Сб</th>
                                                                                <th>Вс</th>
                                                                            </tr>
                                                                        </thead>

                                                                        <tbody>
                                                                            <tr>
                                                                                <!-- ko foreach: {data: [1, 2, 3, 4, 5, 6, 7], as: 'weekday'} -->
                                                                                    <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                        <td class="setup-wizard-page__turnover-selector-table-category-section-table-weekday-cell"
                                                                                            data-bind="
                                                                                                hrmTableEditableCell: editableCell,
                                                                                                hrmTableEditableCellError: $root.turnoverStepWeekdayTotalErrorExtractor(dishCategoryIndex(), weekday)
                                                                                            "
                                                                                        >
                                                                                            <input data-bind="
                                                                                                textInput: $parent.week[weekday - 1].weekdayTotal,
                                                                                                event: {
                                                                                                    input: function() {
                                                                                                        $root.onTurnoverStepWeekdayTotalInput($parentContext.dishCategoryIndex());
                                                                                                    },
                                                                                                    change: function() {
                                                                                                        $root.onTurnoverStepWeekdayTotalChange($parentContext.dishCategoryIndex(), weekdayIndex());
                                                                                                    }
                                                                                                },
                                                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                                                hrmTableEditableCellInputControl,
                                                                                                hrmTableEditableCellInputControlOwner: editableCell
                                                                                            " placeholder="0">
                                                                                        </td>
                                                                                    <!-- /ko -->
                                                                                <!-- /ko -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                <!-- /ko -->
                                            </div>
                                        <!-- /ko -->
                                    </div>
                                <!-- /ko -->

                                <!-- ko template: {
                                    foreach: hrmTemplateIf(isTurnoverCalculated() && !$root.isTurnoverStepCalculating(), $data),
                                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                } -->
                                    <div>
                                        <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                                            <!-- ko let: {table: ko.observable(null), stickySectionWrappers: ko.observableArray([]), categoryRowElements: ko.observableArray([])} -->
                                                <div class="setup-wizard-page__turnover-selector-table-sticky-section-container"
                                                     data-bind="
                                                        hrmTableStickySectionContainer,
                                                        hrmTableStickySectionContainerSectionWrappers: stickySectionWrappers
                                                     "
                                                >
                                                    <div class="hrm-table__sticky-section-rail">
                                                        <div class="setup-wizard-page__turnover-selector-table-sticky-header-wrapper"
                                                             data-bind="hrmTableStickySectionWrapper: stickySectionWrappers">
                                                            <!-- ko let: {activeCategoryIndex: table() !== null && table().activeCategoryIndex() !== null ? table().activeCategoryIndex() : 0} -->
                                                                <table class="hrm-table__sticky-section
                                                                              hrm-table__sticky-section--position_top
                                                                              setup-wizard-page__turnover-selector-table
                                                                              setup-wizard-page__turnover-selector-table-sticky-header"
                                                                   data-bind="hrmTable, using: $root.formModel().dishCategories()[activeCategoryIndex]">
                                                                <thead>
                                                                    <tr>
                                                                        <th class="setup-wizard-page__turnover-selector-table-units-head-cell">
                                                                            <div class="setup-wizard-page__turnover-selector-table-units-head-cell-content"
                                                                                 data-bind="
                                                                                    text: $root.getDishCategory(value()).name,
                                                                                    attr: {title: $root.getDishCategory(value()).name}
                                                                                 "
                                                                            >
                                                                            </div>
                                                                        </th>
                                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Пн</th>
                                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Вт</th>
                                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Ср</th>
                                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Чт</th>
                                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Пт</th>
                                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Сб</th>
                                                                        <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Вс</th>
                                                                        <th class="setup-wizard-page__turnover-selector-table-week-total-head-cell">
                                                                            За неделю
                                                                        </th>
                                                                    </tr>
                                                                </thead>

                                                                <tbody>
                                                                    <tr class="setup-wizard-page__turnover-selector-table-week-row">
                                                                        <!-- ko with: $root.formModel().dishCategories()[activeCategoryIndex] -->
                                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                <td class="setup-wizard-page__turnover-selector-table-units-cell"
                                                                                    data-bind="hrmTableEditableCell: editableCell">
                                                                                    <select data-bind="
                                                                                        value: units,
                                                                                        hrmSelect,
                                                                                        hrmTableEditableCellSelectControl,
                                                                                        hrmTableEditableCellSelectControlOwner: editableCell
                                                                                    ">
                                                                                        <option value="1">Штуки</option>
                                                                                        <option value="2">Рубли</option>
                                                                                        <option value="3">Норма времени</option>
                                                                                    </select>
                                                                                </td>
                                                                            <!-- /ko -->
                                                                        <!-- /ko -->
                                                                        <!-- ko foreach: {data: [1, 2, 3, 4, 5, 6, 7], as: 'weekday'} -->
                                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                <td class="setup-wizard-page__turnover-selector-table-weekday-cell"
                                                                                    data-bind="
                                                                                    hrmTableEditableCell: editableCell,
                                                                                    hrmTableEditableCellError: $root.turnoverStepWeekdayTotalErrorExtractor($parentContext.activeCategoryIndex, weekday)
                                                                                ">
                                                                                    <input data-bind="
                                                                                        textInput: $parent.week[weekday - 1].weekdayTotal,
                                                                                        event: {
                                                                                            input: function() {
                                                                                                $root.onTurnoverStepWeekdayTotalInput($parentContext.activeCategoryIndex);
                                                                                            },
                                                                                            change: function() {
                                                                                                $root.onTurnoverStepWeekdayTotalChange($parentContext.activeCategoryIndex, weekdayIndex());
                                                                                            }
                                                                                        },
                                                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                                        hrmTableEditableCellInputControl,
                                                                                        hrmTableEditableCellInputControlOwner: editableCell
                                                                                    " placeholder="0">
                                                                                </td>
                                                                            <!-- /ko -->
                                                                        <!-- /ko -->
                                                                        <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                            <td class="setup-wizard-page__turnover-selector-table-week-total-cell"
                                                                                data-bind="
                                                                                    hrmTableEditableCell: editableCell,
                                                                                    hrmTableEditableCellError: $root.turnoverStepTableErrorExtractor(weekTotal)
                                                                                ">
                                                                                <input data-bind="
                                                                                    value: weekTotal,
                                                                                    event: {
                                                                                        change: function (_, event) {
                                                                                            $root.onTurnoverStepWeekTotalChange($parentContext.activeCategoryIndex);
                                                                                        }
                                                                                    },
                                                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                                                    hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                                    hrmTableEditableCellInputControl,
                                                                                    hrmTableEditableCellInputControlOwner: editableCell
                                                                                " placeholder="0">
                                                                            </td>
                                                                        <!-- /ko -->
                                                                    </tr>
                                                                </tbody>
                                                                </table>
                                                            <!-- /ko -->
                                                        </div>
                                                    </div>
                                                    <table data-bind="
                                                        hrmTable,
                                                        setupWizardPageTurnoverSelectorTable: table,
                                                        setupWizardPageTurnoverSelectorTableCategoryRowElements: categoryRowElements
                                                    ">
                                                    <thead>
                                                        <tr>
                                                            <th class="setup-wizard-page__turnover-selector-table-units-head-cell">
                                                                Единица измерения
                                                            </th>
                                                            <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Пн</th>
                                                            <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Вт</th>
                                                            <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Ср</th>
                                                            <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Чт</th>
                                                            <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Пт</th>
                                                            <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Сб</th>
                                                            <th class="setup-wizard-page__turnover-selector-table-weekday-head-cell">Вс</th>
                                                            <th class="setup-wizard-page__turnover-selector-table-week-total-head-cell">
                                                                За неделю
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody data-bind="foreach: {data: dishCategories, as: 'dishCategory'}">
                                                        <tr class="setup-wizard-page__turnover-selector-table-category-row"
                                                            data-bind="hrmElement: categoryRowElements, hrmElementIndex: dishCategoryIndex()">
                                                            <td class="setup-wizard-page__turnover-selector-table-category-name-cell"
                                                                data-bind="text: $root.getDishCategory(value()).name" colspan="9">
                                                            </td>
                                                        </tr>

                                                        <tr class="setup-wizard-page__turnover-selector-table-week-row">
                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                <td class="setup-wizard-page__turnover-selector-table-units-cell"
                                                                    data-bind="hrmTableEditableCell: editableCell">
                                                                    <select data-bind="
                                                                        value: units,
                                                                        hrmSelect,
                                                                        hrmTableEditableCellSelectControl,
                                                                        hrmTableEditableCellSelectControlOwner: editableCell
                                                                    ">
                                                                        <option value="1">Штуки</option>
                                                                        <option value="2">Рубли</option>
                                                                        <option value="3">Норма времени</option>
                                                                    </select>
                                                                </td>
                                                            <!-- /ko -->
                                                            <!-- ko foreach: {data: [1, 2, 3, 4, 5, 6, 7], as: 'weekday'} -->
                                                                <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                    <td class="setup-wizard-page__turnover-selector-table-weekday-cell"
                                                                        data-bind="
                                                                            hrmTableEditableCell: editableCell,
                                                                            hrmTableEditableCellError: $root.turnoverStepWeekdayTotalErrorExtractor(dishCategoryIndex(), weekday)
                                                                        ">
                                                                        <input data-bind="
                                                                            textInput: $parent.week[weekday - 1].weekdayTotal,
                                                                            event: {
                                                                                input: function() {
                                                                                    $root.onTurnoverStepWeekdayTotalInput($parentContext.dishCategoryIndex());
                                                                                },
                                                                                change: function() {
                                                                                    $root.onTurnoverStepWeekdayTotalChange($parentContext.dishCategoryIndex(), weekdayIndex());
                                                                                }
                                                                            },
                                                                            hrmMask, hrmMaskPattern: 'decimal',
                                                                            hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                            hrmTableEditableCellInputControl,
                                                                            hrmTableEditableCellInputControlOwner: editableCell
                                                                        " placeholder="0">
                                                                    </td>
                                                                <!-- /ko -->
                                                            <!-- /ko -->

                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                <td class="setup-wizard-page__turnover-selector-table-week-total-cell"
                                                                    data-bind="
                                                                        hrmTableEditableCell: editableCell,
                                                                        hrmTableEditableCellError: $root.turnoverStepTableErrorExtractor(weekTotal)
                                                                    ">
                                                                    <input data-bind="
                                                                        value: weekTotal,
                                                                        event: {
                                                                            change: function (_, event) {
                                                                                $root.onTurnoverStepWeekTotalChange(dishCategoryIndex());
                                                                            }
                                                                        },
                                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                        hrmTableEditableCellInputControl,
                                                                        hrmTableEditableCellInputControlOwner: editableCell
                                                                    " placeholder="0">
                                                                </td>
                                                            <!-- /ko -->
                                                        </tr>

                                                        <!-- ko foreach: {data: $root.turnoverStepIntervalHours, as: 'hour'} -->
                                                            <tr class="setup-wizard-page__turnover-selector-table-hour-row">
                                                                <!-- ko let: {data: $root.turnoverStepGetHourLabelData(hourIndex())} -->
                                                                    <td class="setup-wizard-page__turnover-selector-table-hour-label-cell">
                                                                        <span data-bind="text: data.start.hour"></span><sup class="setup-wizard-page__turnover-selector-table-hour-label-minute" data-bind="text: data.start.minute"></sup>–<span data-bind="text: data.end.hour"></span><sup class="setup-wizard-page__turnover-selector-table-hour-label-minute" data-bind="text: data.end.minute"></sup>
                                                                    </td>
                                                                <!-- /ko -->
                                                                <!-- ko foreach: {data: [1, 2, 3, 4, 5, 6, 7], as: 'weekday'} -->
                                                                    <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                        <!-- ko if: $parents[1].week[weekday - 1].hours()[hourIndex()] !== null -->
                                                                            <td class="setup-wizard-page__turnover-selector-table-hour-cell"
                                                                                data-bind="
                                                                                    hrmTableEditableCell: editableCell,
                                                                                    hrmTableEditableCellError: $root.turnoverStepTableErrorExtractor($parents[1].week[weekday - 1].hours()[hourIndex()])
                                                                                ">
                                                                                <input data-bind="
                                                                                    textInput: $parents[1].week[weekday - 1].hours()[hourIndex()],
                                                                                    event: {
                                                                                        input: function() {
                                                                                            $root.onTurnoverStepHourInput($parentContext.dishCategoryIndex(), weekdayIndex(), hourIndex());
                                                                                        }
                                                                                    },
                                                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                                                    hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                                    hrmTableEditableCellInputControl,
                                                                                    hrmTableEditableCellInputControlOwner: editableCell,
                                                                                " placeholder="0">
                                                                            </td>
                                                                        <!-- /ko -->

                                                                        <!-- ko if: $parents[1].week[weekday - 1].hours()[hourIndex()] === null -->
                                                                            <td class="setup-wizard-page__turnover-selector-table-hour-cell
                                                                                       setup-wizard-page__turnover-selector-table-hour-cell--disabled">
                                                                            </td>
                                                                        <!-- /ko -->
                                                                    <!-- /ko -->
                                                                <!-- /ko -->

                                                                <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                    <td class="setup-wizard-page__turnover-selector-table-hour-total-cell"
                                                                        data-bind="
                                                                            hrmTableEditableCell: editableCell,
                                                                            hrmTableEditableCellError: $root.turnoverStepTableErrorExtractor($parent.hourTotals()[hourIndex()])
                                                                        ">
                                                                        <input data-bind="
                                                                            value: $parent.hourTotals()[hourIndex()],
                                                                            event: {
                                                                                change: function() {
                                                                                    $root.onTurnoverStepHourTotalChange($parentContext.dishCategoryIndex(), hourIndex());
                                                                                }
                                                                            },
                                                                            hrmMask, hrmMaskPattern: 'decimal',
                                                                            hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                            hrmTableEditableCellInputControl,
                                                                            hrmTableEditableCellInputControlOwner: editableCell
                                                                        " placeholder="0">
                                                                    </td>
                                                                <!-- /ko -->
                                                            </tr>
                                                        <!-- /ko -->
                                                    </tbody>
                                                    </table>
                                                </div>
                                            <!-- /ko -->
                                        <!-- /ko -->

                                        <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                            <div data-bind="setupWizardPageTurnoverSelectorTable">
                                                <!-- ko foreach: {data: dishCategories, as: 'dishCategory'} -->
                                                    <!-- ko let: {isOpen: ko.observable(dishCategoryIndex() === 0)} -->
                                                        <div class="setup-wizard-page__turnover-selector-table-category-section">
                                                            <div class="setup-wizard-page__turnover-selector-table-category-section-header">
                                                                <button class="hrm-button hrm-circle-icon-button
                                                                               hrm-circle-icon-button--theme_neutral
                                                                               hrm-circle-arrow-down-icon-button
                                                                               setup-wizard-page__turnover-selector-table-category-section-header-toggle-button"
                                                                        data-bind="click: function() {isOpen(!isOpen());}">
                                                                </button>

                                                                <span class="setup-wizard-page__turnover-selector-table-category-section-header-title"
                                                                      data-bind="
                                                                        text: $root.getDishCategory(value()).name,
                                                                        click: function() {isOpen(!isOpen());}
                                                                      ">
                                                                </span>

                                                                <span class="hrm-spacer"></span>

                                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                                    <div class="setup-wizard-page__turnover-selector-table-category-section-header-units-field" data-bind="
                                                                        hrmFormField, hrmFormFieldControlRef: control
                                                                    ">
                                                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                            <select data-bind="
                                                                                value: units,
                                                                                hrmSelect, hrmSelectSearchEnabled: true,
                                                                                hrmFormFieldSelectControl: control
                                                                            ">
                                                                                <option value="1">Штуки</option>
                                                                                <option value="2">Рубли</option>
                                                                                <option value="3">Норма времени</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                <!-- /ko -->
                                                            </div>

                                                            <div class="setup-wizard-page__turnover-selector-table-category-section-body"
                                                                 data-bind="hrmSlide, hrmSlideValue: isOpen">
                                                                <div class="hrm-table__fixed-section-container setup-wizard-page__turnover-selector-table-category-section-table-fixed-section-container">
                                                                    <table class="hrm-table__fixed-section hrm-table__fixed-section--position_left
                                                                                  setup-wizard-page__turnover-selector-table-category-section-table-fixed-section"
                                                                           data-bind="hrmTable">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="setup-wizard-page__turnover-selector-table-category-section-table-hour-label-head-cell"></th>
                                                                                <th class="setup-wizard-page__turnover-selector-table-category-section-table-week-total-cell">
                                                                                    За неделю
                                                                                </th>
                                                                            </tr>
                                                                        </thead>

                                                                        <tbody>
                                                                            <tr>
                                                                                <td class="setup-wizard-page__turnover-selector-table-category-section-table-hour-label-cell"></td>

                                                                                <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                    <td class="setup-wizard-page__turnover-selector-table-category-section-table-week-total-cell"
                                                                                        data-bind="
                                                                                            hrmTableEditableCell: editableCell,
                                                                                            hrmTableEditableCellError: $root.turnoverStepTableErrorExtractor(weekTotal)
                                                                                        ">
                                                                                        <input data-bind="
                                                                                            value: weekTotal,
                                                                                            event: {
                                                                                                change: function (_, event) {
                                                                                                    $root.onTurnoverStepWeekTotalChange(dishCategoryIndex());
                                                                                                }
                                                                                            },
                                                                                            hrmMask, hrmMaskPattern: 'decimal',
                                                                                            hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                                            hrmTableEditableCellInputControl,
                                                                                            hrmTableEditableCellInputControlOwner: editableCell
                                                                                        " placeholder="0">
                                                                                    </td>
                                                                                <!-- /ko -->
                                                                            </tr>

                                                                            <!-- ko foreach: {data: $root.turnoverStepIntervalHours, as: 'hour'} -->
                                                                                <tr class="setup-wizard-page__turnover-selector-table-category-section-table-hour-row">
                                                                                    <!-- ko let: {data: $root.turnoverStepGetHourLabelData(hourIndex())} -->
                                                                                        <td class="setup-wizard-page__turnover-selector-table-category-section-table-hour-label-cell">
                                                                                            <span data-bind="text: data.start.hour"></span><sup class="setup-wizard-page__turnover-selector-table-hour-label-minute" data-bind="text: data.start.minute"></sup>
                                                                                        </td>
                                                                                    <!-- /ko -->

                                                                                    <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                        <td class="setup-wizard-page__turnover-selector-table-category-section-table-hour-total-cell"
                                                                                            data-bind="
                                                                                                hrmTableEditableCell: editableCell,
                                                                                                hrmTableEditableCellError: $root.turnoverStepTableErrorExtractor($parent.hourTotals()[hourIndex()])
                                                                                            ">
                                                                                            <input data-bind="
                                                                                                value: $parent.hourTotals()[hourIndex()],
                                                                                                event: {
                                                                                                    change: function() {
                                                                                                        $root.onTurnoverStepHourTotalChange($parentContext.dishCategoryIndex(), hourIndex());
                                                                                                    }
                                                                                                },
                                                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                                                hrmTableEditableCellInputControl,
                                                                                                hrmTableEditableCellInputControlOwner: editableCell
                                                                                            " placeholder="0">
                                                                                        </td>
                                                                                    <!-- /ko -->
                                                                                </tr>
                                                                            <!-- /ko -->
                                                                        </tbody>
                                                                    </table>

                                                                    <div data-bind="component: {name: 'hrm-scrollable-wrapper'}">
                                                                        <table class="setup-wizard-page__turnover-selector-table-category-section-table"
                                                                               data-bind="hrmTable">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>Пн</th>
                                                                                    <th>Вт</th>
                                                                                    <th>Ср</th>
                                                                                    <th>Чт</th>
                                                                                    <th>Пт</th>
                                                                                    <th>Сб</th>
                                                                                    <th>Вс</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                <tr>
                                                                                    <!-- ko foreach: {data: [1, 2, 3, 4, 5, 6, 7], as: 'weekday'} -->
                                                                                        <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                            <td class="setup-wizard-page__turnover-selector-table-category-section-table-weekday-cell"
                                                                                                data-bind="
                                                                                                    hrmTableEditableCell: editableCell,
                                                                                                    hrmTableEditableCellError: $root.turnoverStepWeekdayTotalErrorExtractor(dishCategoryIndex(), weekday)
                                                                                                "
                                                                                            >
                                                                                                <input data-bind="
                                                                                                    textInput: $parent.week[weekday - 1].weekdayTotal,
                                                                                                    event: {
                                                                                                        input: function() {
                                                                                                            $root.onTurnoverStepWeekdayTotalInput($parentContext.dishCategoryIndex());
                                                                                                        },
                                                                                                        change: function() {
                                                                                                            $root.onTurnoverStepWeekdayTotalChange($parentContext.dishCategoryIndex(), weekdayIndex());
                                                                                                        }
                                                                                                    },
                                                                                                    hrmMask, hrmMaskPattern: 'decimal',
                                                                                                    hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                                                    hrmTableEditableCellInputControl,
                                                                                                    hrmTableEditableCellInputControlOwner: editableCell
                                                                                                " placeholder="0">
                                                                                            </td>
                                                                                        <!-- /ko -->
                                                                                    <!-- /ko -->
                                                                                </tr>

                                                                                <!-- ko foreach: {data: $root.turnoverStepIntervalHours, as: 'hour'} -->
                                                                                    <tr class="setup-wizard-page__turnover-selector-table-hour-row">
                                                                                        <!-- ko foreach: {data: [1, 2, 3, 4, 5, 6, 7], as: 'weekday'} -->
                                                                                            <!-- ko let: {editableCell: ko.observable(null)} -->
                                                                                                <!-- ko if: $parents[1].week[weekday - 1].hours()[hourIndex()] !== null -->
                                                                                                    <td class="setup-wizard-page__turnover-selector-table-hour-cell"
                                                                                                        data-bind="
                                                                                                            hrmTableEditableCell: editableCell,
                                                                                                            hrmTableEditableCellError: $root.turnoverStepTableErrorExtractor($parents[1].week[weekday - 1].hours()[hourIndex()])
                                                                                                        ">
                                                                                                            <input data-bind="
                                                                                                                textInput: $parents[1].week[weekday - 1].hours()[hourIndex()],
                                                                                                                event: {
                                                                                                                    input: function() {
                                                                                                                        $root.onTurnoverStepHourInput($parentContext.dishCategoryIndex(), weekdayIndex(), hourIndex());
                                                                                                                    }
                                                                                                                },
                                                                                                                hrmMask, hrmMaskPattern: 'decimal',
                                                                                                                hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false},
                                                                                                                hrmTableEditableCellInputControl,
                                                                                                                hrmTableEditableCellInputControlOwner: editableCell,
                                                                                                            " placeholder="0">
                                                                                                    </td>
                                                                                                <!-- /ko -->

                                                                                                <!-- ko if: $parents[1].week[weekday - 1].hours()[hourIndex()] === null -->
                                                                                                    <td class="setup-wizard-page__turnover-selector-table-hour-cell
                                                                                                           setup-wizard-page__turnover-selector-table-hour-cell--disabled">
                                                                                                    </td>
                                                                                                <!-- /ko -->
                                                                                            <!-- /ko -->
                                                                                        <!-- /ko -->
                                                                                    </tr>
                                                                                <!-- /ko -->
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>

                                                                <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_negative
                                                                               hrm-button-with-times-icon setup-wizard-page__turnover-selector-table-category-section-clear-button"
                                                                        data-bind="click: function() {$root.turnoverStepClear();}">
                                                                    Очистить
                                                                </button>
                                                            </div>
                                                        </div>
                                                    <!-- /ko -->
                                                <!-- /ko -->
                                            </div>
                                        <!-- /ko -->
                                    </div>
                                <!-- /ko -->

                                <!-- ko template: {
                                    foreach: hrmTemplateIf($root.isTurnoverStepCalculating(), $data),
                                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                } -->
                                    <div>
                                        Производится рассчёт...
                                    </div>
                                <!-- /ko -->

                                <!-- ko template: {
                                    foreach: hrmTemplateIf(!($root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth && isTurnoverCalculated()), $data),
                                    afterAdd: hrmFadeAfterAddFactory(200, 200),
                                    beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                } -->
                                    <div class="setup-wizard-page__turnover-selector-actions">
                                        <!-- ko template: {
                                            foreach: hrmTemplateIf(!isTurnoverCalculated(), $data),
                                            afterAdd: hrmFadeAfterAddFactory(200, 200),
                                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                        } -->
                                            <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_positive
                                                           hrm-button-with-check-icon setup-wizard-page__turnover-selector-action"
                                                    data-bind="click: function() {$root.turnoverStepFill();}">
                                                Заполнить автоматически
                                            </button>
                                        <!-- /ko -->

                                        <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_negative
                                                        hrm-button-with-times-icon setup-wizard-page__turnover-selector-action"
                                                data-bind="click: function() {$root.turnoverStepClear();}">
                                            Очистить
                                        </button>
                                    </div>
                                <!-- /ko -->
                            </div>

                            <div class="setup-wizard-page__tab-pane-actions">
                                <button class="hrm-button hrm-basic-button setup-wizard-page__tab-pane-actions-button"
                                        data-bind="click: function () { $root.turnoverStepBack(); }">
                                    Назад
                                </button>
                                <button class="hrm-button hrm-basic-button hrm-accent-button setup-wizard-page__tab-pane-actions-button"
                                        data-bind="
                                            click: function () { $root.turnoverStepSubmit(); },
                                            attr: {disabled: $root.isTurnoverStepSubmitted() && !$root.isTurnoverStepValid()},
                                            css: {
                                                'setup-wizard-page__turnover-tab-pane-calculate-button': !isTurnoverCalculated()
                                            },
                                            text: !isTurnoverCalculated() ? 'Рассчитать' : 'Далее'
                                        ">
                                </button>
                            </div>
                        </div>
                    <!-- /ko -->
                    <!-- ko template: {
                        foreach: hrmTemplateIf($root.activeStep() === 5, $data),
                        afterAdd: hrmFadeAfterAddFactory(300, 400),
                        beforeRemove: hrmFadeBeforeRemoveFactory(300)
                    } -->
                        <div class="setup-wizard-page__tab-pane setup-wizard-page__positions-tab-pane">
                            <div class="setup-wizard-page__positions-selector">
                                <span class="setup-wizard-page__positions-selector-title">Выберите должности</span>

                                <div class="setup-wizard-page__positions-selector-list">
                                    <!-- ko foreach: {
                                        data: positions,
                                        beforeRemove: hrmSlideBeforeRemoveFactory(),
                                        afterAdd: hrmSlideAfterAddFactory()
                                    } -->
                                        <div class="setup-wizard-page__positions-selector-item">
                                            <div class="setup-wizard-page__positions-selector-item-content">
                                                <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                    <div class="setup-wizard-page__positions-selector-item-field" data-bind="
                                                        hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label
                                                    ">
                                                        <label data-bind="hrmFormFieldLabel: label">Должность</label>

                                                        <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                            <select data-bind="
                                                                options: _.uniq([...$root.builtinPositionNames, name()]),
                                                                optionsCaption: '',
                                                                value: name,
                                                                hrmSelect, hrmSelectSearchEnabled: true,
                                                                hrmSelectCustomValuesAllowed: true,
                                                                hrmFormFieldSelectControl: control,
                                                                hrmFormFieldSelectControlErrorStateMatcher: $root.positionsStepFormControlErrorStateMatcher.bind($root)
                                                            ">
                                                                <option></option>
                                                            </select>
                                                        </div>

                                                        <div data-bind="
                                                            component: {name: 'hrm-form-field-error'},
                                                            hrmSlide,
                                                            hrmSlideValue: control() !== null ? control() !== null ? control().errorState : false : false,
                                                            hrmSlideDuration: 150
                                                        ">
                                                            <!-- ko text: $parent.name.error() --><!-- /ko -->
                                                        </div>
                                                    </div>
                                                <!-- /ko -->

                                                <!-- ko if: $parent.positions().length > 1 -->
                                                    <button class="hrm-button hrm-icon-button hrm-trash-icon-button
                                                                   hrm-icon-button--theme_negative
                                                                   setup-wizard-page__positions-selector-item-remove-button"
                                                            title="Удалить"
                                                            data-bind="click: function () {$root.positionsStepRemove($index());}">
                                                    </button>
                                                <!-- /ko -->
                                            </div>
                                        </div>
                                    <!-- /ko -->
                                </div>

                                <button class="hrm-button hrm-button-with-icon hrm-button-with-icon--theme_neutral
                                                hrm-button-with-plus-icon setup-wizard-page__positions-selector-add-button"
                                        data-bind="click: function () {$root.positionsStepAdd();}">
                                    Добавить
                                </button>
                            </div>

                            <div class="setup-wizard-page__tab-pane-actions">
                                <button class="hrm-button hrm-basic-button setup-wizard-page__tab-pane-actions-button"
                                        data-bind="click: function () { $root.back(); }">
                                    Назад
                                </button>
                                <button class="hrm-button hrm-basic-button hrm-accent-button setup-wizard-page__tab-pane-actions-button"
                                        data-bind="
                                            click: function () { $root.positionsStepSubmit(); },
                                            attr: {disabled: $root.isPositionsStepSubmitted() && !$root.isPositionsStepValid()}
                                        "
                                >
                                    Далее
                                </button>
                            </div>
                        </div>
                    <!-- /ko -->
                    <!-- ko template: {
                        foreach: hrmTemplateIf($root.activeStep() === 6, $data),
                        afterAdd: hrmFadeAfterAddFactory(300, 400),
                        beforeRemove: hrmFadeBeforeRemoveFactory(300)
                    } -->
                        <div class="setup-wizard-page__tab-pane setup-wizard-page__workload-type-tab-pane">
                            <div class="setup-wizard-page__workload-type-selector">
                                <div class="setup-wizard-page__workload-type-selector-header">
                                    <span class="setup-wizard-page__workload-type-selector-title">Укажите тип нагрузки</span>

                                    <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                        <button class="hrm-button hrm-circle-icon-button
                                                       hrm-circle-icon-button--theme_neutral
                                                       hrm-circle-help-icon-button
                                                       setup-wizard-page__workload-type-selector-header-help-button"
                                                data-bind="
                                                    hrmTooltip,
                                                    hrmTooltipText: 'Для каждой должности выберите тип нагрузки и укажите норматив, который должен выполняться в день. Эти данные нужны для построения оптимального прогноза по персоналу для вашего предприятия.',
                                                    hrmTooltipMode: 'large'
                                                "
                                        >
                                        </button>
                                    <!-- /ko -->
                                </div>
                                <!-- ko if: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth -->
                                    <span class="setup-wizard-page__workload-type-selector-description">
                                        Для каждой должности выберите тип нагрузки и укажите норматив, который должен выполняться в день.
                                        Эти данные нужны для построения оптимального прогноза по персоналу для вашего предприятия.
                                    </span>
                                <!-- /ko -->

                                <div class="setup-wizard-page__workload-type-selector-list">
                                    <!-- ko foreach: {
                                        data: positions,
                                        beforeRemove: hrmSlideBeforeRemoveFactory(),
                                        afterAdd: hrmSlideAfterAddFactory()
                                    } -->
                                        <!-- ko let: {isOpen: ko.observable($index() === 0)} -->
                                            <div class="setup-wizard-page__workload-type-selector-item">
                                                <div class="setup-wizard-page__workload-type-selector-item-header">
                                                    <!-- ko if: $root.viewportSize().width <= HRM_BREAKPOINTS.mobileMaxWidth -->
                                                        <button class="hrm-button hrm-circle-icon-button
                                                                       hrm-circle-icon-button--theme_neutral
                                                                       hrm-circle-arrow-down-icon-button
                                                                       setup-wizard-page__workload-type-selector-item-header-toggle-button"
                                                                data-bind="click: function() {isOpen(!isOpen());}">
                                                        </button>
                                                    <!-- /ko -->

                                                    <span class="setup-wizard-page__workload-type-selector-item-position-name"
                                                          data-bind="text: name, click: function() {isOpen(!isOpen());}">
                                                    </span>
                                                </div>

                                                <div class="setup-wizard-page__workload-type-selector-item-control-list"
                                                     data-bind="hrmSlide, hrmSlideValue: $root.viewportSize().width > HRM_BREAKPOINTS.mobileMaxWidth || isOpen()">
                                                    <div class="setup-wizard-page__workload-type-selector-item-control-list-content">
                                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                            <div class="setup-wizard-page__workload-type-selector-item-workload-type-form-field
                                                                        setup-wizard-page__workload-type-selector-item-control-list-item"
                                                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                                                <label data-bind="hrmFormFieldLabel: label">Тип нагрузки</label>

                                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                    <select data-bind="
                                                                        value: workloadType,
                                                                        hrmSelect,
                                                                        hrmFormFieldSelectControl: control,
                                                                        hrmFormFieldSelectControlErrorStateMatcher: $root.workloadTypeStepFormControlErrorStateMatcher.bind($root)
                                                                    ">
                                                                        <option></option>
                                                                        <option value="1">Объём товара по всему предприятию</option>
                                                                        <option value="2">Объём товара по категориям</option>
                                                                    </select>
                                                                </div>

                                                                <div data-bind="
                                                                    component: {name: 'hrm-form-field-error'},
                                                                    hrmSlide,
                                                                    hrmSlideValue: control() !== null ? control() !== null ? control().errorState : false : false,
                                                                    hrmSlideDuration: 150
                                                                ">
                                                                    <!-- ko text: $parent.workloadType.error() --><!-- /ko -->
                                                                </div>
                                                            </div>
                                                        <!-- /ko -->

                                                        <!-- ko template: {
                                                            foreach: hrmTemplateIf(workloadType() === '2', $data),
                                                            afterAdd: hrmFadeAfterAddFactory(200, 200),
                                                            beforeRemove: hrmFadeBeforeRemoveFactory(200)
                                                        } -->
                                                            <!-- ko let: {checkboxGroup: ko.observable(null)} -->
                                                                <div class="hrm-form-field-checkbox-group setup-wizard-page__workload-type-selector-item-control-list-item"
                                                                     data-bind="component: {name: 'hrm-checkbox-group', params: {exportAs: checkboxGroup}}">
                                                                    <div data-bind="component: {name: 'hrm-checkbox', params: {checked: $parent.dishCategoriesExclusive, owner: checkboxGroup}}"></div>
                                                                    <label data-bind="hrmCheckboxGroupLabel, hrmCheckboxGroupLabelOwner: checkboxGroup">
                                                                        Все категории, кроме указанных
                                                                    </label>
                                                                </div>
                                                            <!-- /ko -->

                                                            <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                                <div class="setup-wizard-page__workload-type-selector-item-dish-categories-form-field
                                                                            setup-wizard-page__workload-type-selector-item-control-list-item"
                                                                     data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                                                    <label data-bind="hrmFormFieldLabel: label">Категория</label>

                                                                    <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                        <select data-bind="
                                                                            options: $root.dishCategories,
                                                                            optionsText: 'name',
                                                                            optionsValue: 'id',
                                                                            optionsCaption: '',
                                                                            selectedOptions: dishCategories,
                                                                            hrmSelect, hrmSelectSearchEnabled: true,
                                                                            hrmFormFieldSelectControl: control,
                                                                            hrmFormFieldSelectControlErrorStateMatcher: $root.workloadTypeStepFormControlErrorStateMatcher.bind($root)
                                                                        " multiple>
                                                                            <option></option>
                                                                        </select>
                                                                    </div>

                                                                    <div data-bind="
                                                                        component: {name: 'hrm-form-field-error'},
                                                                        hrmSlide,
                                                                        hrmSlideValue: control() !== null ? control() !== null ? control().errorState : false : false,
                                                                        hrmSlideDuration: 150
                                                                    ">
                                                                        <!-- ko text: $parent.dishCategories.error() --><!-- /ko -->
                                                                    </div>
                                                                </div>
                                                            <!-- /ko -->
                                                        <!-- /ko -->

                                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                            <div class="setup-wizard-page__workload-type-selector-item-units-form-field
                                                                        setup-wizard-page__workload-type-selector-item-control-list-item"
                                                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                                                <label data-bind="hrmFormFieldLabel: label">Единицы</label>

                                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                    <select data-bind="
                                                                        value: units,
                                                                        hrmSelect,
                                                                        hrmFormFieldSelectControl: control,
                                                                        hrmFormFieldSelectControlErrorStateMatcher: $root.workloadTypeStepFormControlErrorStateMatcher.bind($root)
                                                                    ">
                                                                        <option></option>
                                                                        <option value="1">Штуки</option>
                                                                        <option value="2">Рубли</option>
                                                                        <option value="3">Норма времени</option>
                                                                    </select>
                                                                </div>

                                                                <div data-bind="
                                                                    component: {name: 'hrm-form-field-error'},
                                                                    hrmSlide,
                                                                    hrmSlideValue: control() !== null ? control() !== null ? control().errorState : false : false,
                                                                    hrmSlideDuration: 150
                                                                ">
                                                                    <!-- ko text: $parent.units.error() --><!-- /ko -->
                                                                </div>
                                                            </div>
                                                        <!-- /ko -->

                                                        <!-- ko let: {control: ko.observable(null), label: ko.observable(null)} -->
                                                            <div class="setup-wizard-page__workload-type-selector-item-standard-form-field
                                                                        setup-wizard-page__workload-type-selector-item-control-list-item"
                                                                 data-bind="hrmFormField, hrmFormFieldControlRef: control, hrmFormFieldLabelRef: label">
                                                                <label data-bind="hrmFormFieldLabel: label">Норматив</label>

                                                                <div data-bind="hrmFormFieldBasis, hrmFormFieldBasisControl: control">
                                                                    <input data-bind="
                                                                        textInput: standard,
                                                                        hrmMask, hrmMaskPattern: 'decimal',
                                                                        hrmMaskOptions: {digits: '0,2', groupSeparator: ' ', autoGroup: true, allowMinus: false, rightAlign: false},
                                                                        hrmFormFieldInputControl: control,
                                                                        hrmFormFieldInputControlErrorStateMatcher: $root.workloadTypeStepFormControlErrorStateMatcher.bind($root)
                                                                    ">
                                                                </div>

                                                                <div data-bind="
                                                                    component: {name: 'hrm-form-field-error'},
                                                                    hrmSlide,
                                                                    hrmSlideValue: control() !== null ? control() !== null ? control().errorState : false : false,
                                                                    hrmSlideDuration: 150
                                                                ">
                                                                    <!-- ko text: $parent.standard.error() --><!-- /ko -->
                                                                </div>
                                                            </div>
                                                        <!-- /ko -->
                                                    </div>
                                                </div>
                                            </div>
                                        <!-- /ko -->
                                    <!-- /ko -->
                                </div>
                            </div>

                            <div class="setup-wizard-page__tab-pane-actions">
                                <button class="hrm-button hrm-basic-button setup-wizard-page__tab-pane-actions-button"
                                        data-bind="click: function () { $root.back(); }">
                                    Назад
                                </button>
                                <button class="hrm-button hrm-basic-button hrm-accent-button
                                               setup-wizard-page__tab-pane-actions-button setup-wizard-page__workload-type-tab-pane-build-forecast-button"
                                        data-bind="
                                            click: function () { $root.workloadTypeStepSubmit(); },
                                            attr: {disabled: $root.isWorkloadTypeStepSubmitted() && !$root.isWorkloadTypeStepValid()}
                                        "
                                >
                                    Построить прогноз
                                </button>
                            </div>
                        </div>
                    <!-- /ko -->
                </div>
            </div>

            <div class="hrm-scaffold__footer" data-bind="component: {name: 'hrm-basic-footer'}"></div>
        </div>
    </div>
    @@include('../../base/_page-scripts.html')
    @@include('./components/schedule-selector-calendar/_schedule-selector-calendar.js.html')
    @@include('./_setup-wizard-page.js.html')
</body>
</html>
