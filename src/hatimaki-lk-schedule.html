<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>График - отгулы и смены</title>
    <!-- Bootstrap -->
    <link href="bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <link href="fonts/fontawesome-pro-5.1.0-web/css/all.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700" rel="stylesheet">

    <link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css" />

    <link rel="stylesheet" href="js/scrolling-tabs/jquery.scrolling-tabs.min.css" />
 
    <link href="css/styles.css" rel="stylesheet">
    <link href="css/styles-lk.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body class="timeoff-or-shift">
    <nav class="navbar navbar-fixed-top navbar-lk">
        <div class="container-fluid">
            <div class="navbar-collapse collapse" id="navbar-collapse-block">
                <ul class="nav navbar-nav navbar-nav-main">
                    <li class="item-menu-manper"><a href="#">Личное дело<span class="count">1</span></a></li>
                    <li class="item-menu-messages"><a href="#">Сообщения<span class="count">5</span></a></li>
                    <li class="item-menu-alerts"><a href="#">Оповещения<span class="count">2</span></a></li>
                    <li class="item-menu-schedule"><a href="#">График работы</a></li>
                    <li class="item-menu-index"><a href="#">Ключевые показатели<span class="count">3</span></a></li>
                    <li class="item-menu-docs"><a href="#">Инструкции и приказы<span class="count">1</span></a></li>
                    <li class="item-menu-discus"><a href="#">Обсуждения<span class="count">4</span></a></li>
                    <li class="item-menu-complaints"><a href="#">Жалобы и предложения<span class="count">1</span></a></li>
                    <li class="item-menu-friends"><a href="#">Друзья</a></li>
                    <li class="item-menu-groups"><a href="#">Группы</a></li>
                    <li class="item-menu-settings"><a href="#">Настройки</a></li>
                    <li class="item-menu-help"><a href="#">Помощь</a></li>
                </ul>
            </div>
            <button type="button" class="navbar-toggle collapsed" id="navbar-toggle">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <i class="fa fa-chevron-left" aria-hidden="true"></i>
            </button>
            <div class="navbar-right navbar-login">
                <a href="#" class="btn"><span>Александр Константиновский</span> <i class="fa fa-sign-out hidden-sm hidden-xs" aria-hidden="true"></i></a>
            </div>
            <ul class="nav navbar-nav navbar-right navbar-nav-social">
                <li><a href="#" title="Вконтакте"><i class="fa fa-vk" aria-hidden="true"></i></a></li>
                <li><a href="#" title="Есть непросмотренные сообщения"><i class="fa fa-envelope" aria-hidden="true"></i><span class="badge"></span></a></li>
                <li class="item-bell" title="Есть непросмотренные уведомления"><a href="#"><i class="fa fa-bell" aria-hidden="true"></i><span class="badge"></span></a></li>
            </ul>
        </div>
    </nav>

    <div class="container-fluid content">
        <h1>Александр Константиновский</h1>

        <div class="clearfix info-peracc">
            <ul class="list-unstyled list-posts">
                <li>Повар-сушист / 9 / универсал</li>
                <li>Сборщик / 3 / &mdash;</li>
            </ul>
            <ul class="list-unstyled list-accounts">
                <li><span class="name">Депозит</span><span class="sum stat-dep-partly">10 000 <i class="fa fa-rub" aria-hidden="true"></i></span></li>
                <li><span class="name"><span class="full">Премиальный фонд</span><span class="short">Прем. фонд</span></span><span class="sum sum-yes">3000 <i class="fa fa-rub" aria-hidden="true"></i></span></li>
                <li><span class="name">Личный счёт</span><span class="sum sum-no">-500 <i class="fa fa-rub" aria-hidden="true"></i></span></li>
            </ul>
        </div>

        <!-- Nav tabs -->
        <ul class="nav nav-tabs nav-tabs-lk">
            <li><a href="#" data-toggle="tab">Движение в компании</a></li>
            <li><a href="#" data-toggle="tab">Основные показатели</a></li>
            <li><a href="#" data-toggle="tab">Штрафы и поощрения</a></li>
            <li><a href="#" data-toggle="tab">Анкета</a></li>
            <li><a href="#" data-toggle="tab">Депозит</a></li>
            <li><a href="#" data-toggle="tab">Личный счет</a></li>
            <li><a href="#" data-toggle="tab">Документы</a></li>
            <li><a href="#" data-toggle="tab">Форма</a></li>
            <li class="active"><a href="#" data-toggle="tab">График</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content tab-content-lk">
            <div class="tab-pane active">

                <ul class="nav nav-tabs-lk-xs tos-nav">
                    <li><a href="#">Движение в компании</a></li>
                    <li><a href="#">Основные показатели</a></li>
                    <li><a href="#">Штрафы и поощрения</a></li>
                    <li><a href="#">Анкета</a></li>
                    <li><a href="#">Депозит</a></li>
                    <li><a href="#">Личный счет</a></li>
                    <li><a href="#">Документы</a></li>
                    <li><a href="#">Форма</a></li>
                    <li class="active"><a href="#">График</a></li>
                </ul>
                <div class="row">
                        <div class="col-xs-12">
                            <h2 class="mt-0">Добавить отгул или смену</h2>
                        </div>
                    <form class="col-md-4 col-sm-12 col-xs-12">
                        <div class="row">
                            <div class="col-md-12 col-sm-6">
                                <div class="row">
                                    <div class="col-md-6 col-sm-6">
                                        <div class="form-group tos-radio">
                                            <label class="radio-inline active" for="tosRadio1">
                                                <input type="radio" name="timeoff-or-shift" value="option1" id="tosRadio1" checked> 
                                                отгул
                                            </label>
                                            <label class="radio-inline" for="tosRadio2">
                                                <input type="radio" name="timeoff-or-shift" value="option2" id="tosRadio2"> 
                                                смена
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6">
                                        <div class="form-group">
                                            <select class="form-control">
                                                <option value="1">Коммунарка</option>
                                                <option value="2">Коммунарка 2</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 col-sm-6 col-xs-12">
                                <div class="row">
                                    <div class="col-lg-5 col-md-6 col-sm-5 col-xs-6">
                                        <div class="form-group">
                                            <div class="input-group date datepicker form-control-sm">
                                                <input type="text" class="form-control" value="02.11.2018" name="data-start" id="data-start" placeholder="00.00.0000" maxlength="10">
                                                <span class="input-group-btn input-group-addon">
                                                    <button class="btn btn-default" type="button"><i class="glyphicon glyphicon-calendar"></i></button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-lg-1 col-sm-1 hidden-xs hidden-md">
                                    </div>

                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <div class="form-group tos-time-cont clearfix">
                                            <span class="separator col-md-2 col-sm-2 hidden-xs">c </span>
                                            <div class="input-group timepicker form-control-sm col-md-5 col-sm-5 col-xs-5">
                                                <input type="text" class="form-control" name="shift-start" id="shift-start" placeholder="00:00" maxlength="10">
                                            </div>
                                            <span class="separator col-md-2 col-sm-2 hidden-xs">до </span>
                                            <span class="separator visible-xs  col-xs-2"> - </span>
                                            <div class="input-group timepicker form-control-sm col-md-5 col-sm-5 col-xs-5">
                                                <input type="text" class="form-control" name="shift-end" id="shift-end" placeholder="00:00" maxlength="10">
                                            </div>
                                        </div>
                                        
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 col-sm-9">
                                <div class="tos-note clearfix form-group">
                                    <i class="fa fa-info-circle"></i>
                                    <p>Если время не заполнено, то отгул или смена добавляется на весь день</p>
                                </div>
                            </div>
                            <div class="col-md-12 col-sm-3 tos-btn-add">
                                <button type="submit" class="btn btn-primary pull-right">Добавить</button>
                            </div>
                        </div>
                    </form>

                    <div class="col-lg-1 col-sm-12 col-xs-12 hidden-md">
                        <div class="visible-sm visible-xs">
                            <div class="mb-40 xs-mb-25"></div>
                        </div>
                    </div>

                    <div class="col-md-3 col-sm-5 col-xs-12">
                        <div class="form-group tos-datetimepicker-inline">
                            <div class="input-group datetimepickerInline"></div>
                        </div>
                    </div>

                    <div class="col-xs-12 visible-xs">
                        <div class="xs-mb-10"></div>
                    </div>

                    <div class="visible-sm col-sm-1"></div>

                    <div class="col-lg-4 col-md-5 col-sm-6 col-xs-12">

                        <div class="table-timeoff-or-shift">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Тип</th>
                                        <th>
                                            <span>Дата</span>
                                            <span>Время</span>
                                        </th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Смена</td>
                                        <td>
                                            <span>27.11.2018</span>
                                            <span>11:00 – 23:00</span>
                                        </td>
                                        <td>
                                            <a href="#" class="btn btn-sm btn-default edit-tos-item" data-toggle="modal" data-target="#popup-edit-form" title="Редактировать смену/отгул"><i class="fa fa-pencil"></i></a>
                                            <a href="#" class="btn btn-sm btn-default" title="Удалить смену/отгул"><i class="fa fa-times"></i></a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Отгул</td>
                                        <td>
                                            <span>25.11.2018</span>
                                            <span>11:00 – 23:00</span>
                                        </td>
                                        <td>
                                            <a href="#" class="btn btn-sm btn-default edit-tos-item" data-toggle="modal" data-target="#popup-edit-form" title="Редактировать смену/отгул"><i class="fa fa-pencil"></i></a>
                                            <a href="#" class="btn btn-sm btn-default" title="Удалить смену/отгул"><i class="fa fa-times"></i></a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Смена</td>
                                        <td>
                                            <span>19.11.2018</span>
                                            <span>11:00 – 23:00</span>
                                        </td>
                                        <td>
                                            <a href="#" class="btn btn-sm btn-default edit-tos-item" data-toggle="modal" data-target="#popup-edit-form" title="Редактировать смену/отгул"><i class="fa fa-pencil"></i></a>
                                            <a href="#" class="btn btn-sm btn-default" title="Удалить смену/отгул"><i class="fa fa-times"></i></a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Отгул</td>
                                        <td>
                                            <span>18.11.2018</span>
                                            <span>11:00 – 23:00</span>
                                        </td>
                                        <td>
                                            <a href="#" class="btn btn-sm btn-default edit-tos-item" data-toggle="modal" data-target="#popup-edit-form" title="Редактировать смену/отгул"><i class="fa fa-pencil"></i></a>
                                            <a href="#" class="btn btn-sm btn-default" title="Удалить смену/отгул"><i class="fa fa-times"></i></a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Отгул</td>
                                        <td>
                                            <span>09.11.2018</span>
                                            <span>11:00 – 23:00</span>
                                        </td>
                                        <td>
                                            <a href="#" class="btn btn-sm btn-default edit-tos-item" data-toggle="modal" data-target="#popup-edit-form" title="Редактировать смену/отгул"><i class="fa fa-pencil"></i></a>
                                            <a href="#" class="btn btn-sm btn-default" title="Удалить смену/отгул"><i class="fa fa-times"></i></a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Смена</td>
                                        <td>
                                            <span>01.11.2018</span>
                                            <span>11:00 – 23:00</span>
                                        </td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

   <!-- Modal -->
    <div class="modal fade popup-edit-form" id="popup-edit-form" role="dialog" aria-labelledby="popup-edit-form-label">
        <div class="modal-dialog modal-dialog-gl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Редактировать отгул</h4>
                </div>
                <div class="modal-body">
                    <form action="" method="post" class="clearfix">
                        <div class="form-group">
                            <select class="form-control">
                                <option value="1">Коммунарка</option>
                                <option value="2">Коммунарка 2</option>
                            </select>
                        </div>
                        <div class="row">
                            <div class="col-md-6 col-lg-5 col-sm-5 col-xs-6">
                                <div class="form-group">
                                    <div class="input-group date datepicker form-control-sm">
                                        <input type="text" class="form-control" value="02.11.2018" name="data-start" id="data-start" placeholder="00.00.0000" maxlength="10">
                                        <span class="input-group-btn input-group-addon">
                                            <button class="btn btn-default" type="button"><i class="glyphicon glyphicon-calendar"></i></button>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-1 col-sm-1 hidden-xs hidden-md">
                            </div>

                            <div class="col-md-6 col-sm-6 col-xs-6">
                                <div class="form-group tos-time-cont clearfix">
                                    <span class="separator col-md-2 col-sm-2 hidden-xs">c </span>
                                    <div class="input-group timepicker form-control-sm col-md-5 col-sm-5 col-xs-5">
                                        <input type="text" class="form-control" name="shift-start" id="shift-start" placeholder="00:00" maxlength="10">
                                    </div>
                                    <span class="separator col-md-2 col-sm-2 hidden-xs">до </span>
                                    <span class="separator visible-xs  col-xs-2"> - </span>
                                    <div class="input-group timepicker form-control-sm col-md-5 col-sm-5 col-xs-5">
                                        <input type="text" class="form-control" name="shift-end" id="shift-end" placeholder="00:00" maxlength="10">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tos-note clearfix form-group">
                            <i class="fa fa-info-circle"></i>
                            <p>Если время не заполнено, то отгул или смена добавляется на весь день</p>
                        </div>
                        <div class="tos-btn-add">
                            <button type="submit" class="btn btn-primary pull-right">Сохранить</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap-3.3.7/js/bootstrap.min.js"></script>

    <!-- Bootstrap DateTimepicker, https://eonasdan.github.io/bootstrap-datetimepicker/ -->
    <script type="text/javascript" src="js/moment-with-locales.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-datetimepicker-v4.15.js"></script>

    <!-- https://github.com/LucasLazaro/bootstrap-nav-tab-scrollable -->
    <script type="text/javascript" src="js/scrolling-tabs/jquery.scrolling-tabs.js"></script>

    <script type="text/javascript" src="js/js-gl.js"></script>

    <script type="text/javascript">
    $(function () {
        initNavbar();

        $('.datepicker').datetimepicker({
            locale: 'ru',
            format: 'DD.MM.YYYY'
        });

        $('.timepicker input').datetimepicker({
            locale: 'ru',
            format: 'LT'
        });

        var $dayFree = {
            '01.11.2018' : '11:00-13:00',
            '19.11.2018' : '11:00-13:00',
            '27.11.2018' : '11:00-13:00',
            '10.12.2018' : '11:00-13:00',
			'09.12.2018' : '11:00-13:00'
        }
        var $dayBusy = {
            '09.11.2018' : '11:00-23:00',
            '18.11.2018' : '11:00-23:00',
            '25.11.2018' : '11:00-23:00',
            '25.12.2018' : '11:00-23:00'
        }
        var $dayGray = {
            '05.11.2018' : '11:00-23:00',
            '06.11.2018' : '11:00-23:00',
            '10.11.2018' : '11:00-23:00',
            '13.11.2018' : '11:00-23:00',
            '14.11.2018' : '11:00-23:00',
            '17.11.2018' : '11:00-23:00',
            '21.11.2018' : '11:00-23:00',
            '22.11.2018' : '11:00-23:00',
            '26.11.2018' : '11:00-23:00',
            '29.11.2018' : '11:00-23:00',
            '30.11.2018' : '11:00-23:00'
        }


        $.addInfoDays = function(daysArray,dayType){
            $.each(daysArray, function(key,value) {
                $('.datetimepickerInline td[data-day="' + key + '"]').addClass('day-tip');
                var $dayTypeText = '';
                if (dayType == 'free') {
                    $('.datetimepickerInline td[data-day="' + key + '"]').addClass('day-free');
                    $dayTypeText = 'Отгул / Московский';
                }
                if (dayType == 'busy') {
                    $('.datetimepickerInline td[data-day="' + key + '"]').addClass('day-busy');
                    $dayTypeText = 'Смена';
                }
                if (dayType == 'gray') {
                    $('.datetimepickerInline td[data-day="' + key + '"]').addClass('day-gray');
                    $dayTypeText = 'Серый';
                }
                $('.datetimepickerInline td[data-day="' + key + '"]').attr('data-note', $dayTypeText + '\n' + value);
            });
        };
        
        function daysDatepicker() {
            $.addInfoDays($dayFree,'free');
            $.addInfoDays($dayBusy,'busy');
            $.addInfoDays($dayGray,'gray');
			$('.datetimepickerInline td.day.active').attr('data-action','showPicker')
        }

        var datePickerInline = $('.datetimepickerInline').datetimepicker({
            inline: true,
            sideBySide: true,
            locale: 'ru',
            format: 'DD.MM.YYYY',
        });

        $('body').on('click', '.datetimepickerInline td.day.active', function() {
            console.log('test');
        });

        daysDatepicker();

        datePickerInline.on('dp.change', function(e) {
            daysDatepicker();
        });
        datePickerInline.on('dp.update', function() {
            daysDatepicker();
        });
        datePickerInline.on('dp.error', function() {
            daysDatepicker();
        });
        datePickerInline.on('dp.show', function() {
            daysDatepicker();
        });
        datePickerInline.on('dp.hide', function() {
            daysDatepicker();
        });

        $('body').on('click', '.tos-radio label', function(e) {
            $('.tos-radio label').removeClass('active');
            $(this).addClass('active');
        });

        $('.nav-tabs-lk').scrollingTabs({
            cssClassLeftArrow: 'fa fa-chevron-left',
            cssClassRightArrow: 'fa fa-chevron-right'
        });


    });
    </script>
</body>
</html>